id: equalia
default_language: en
supported_languages: [de, fi]
site_url: https://equalia.paths.kausal.tech
dataset_repo:
  url: https://github.com/kausaltech/dvctest.git
  commit: bdfccc9f14a47a81f74bec653bb5325478243275
  dvc_remote: kausal-s3
name: Equalia Climate Action Plan
owner: Kausal Ltd
theme_identifier: default
target_year: 2035
model_end_year: 2050
reference_year: 2010
minimum_historical_year: 2010
maximum_historical_year: 2025
emission_unit: kt_co2e/a
features:
  baseline_visible_in_graphs: true
  use_datasets_from_db: true
  show_explanations: true
  show_category_warnings: true

include:
- file: modules/transportation/congestion_charge.yaml
  allow_override: true
- file: frameworks/standard_dims.yaml
  allow_override: true

params:
- id: municipality_name
  label_en: Municipality name
  label_de: Gemeindename
  label_fi: Kaupunki
  value: Equalia
  is_customizable: true
  is_visible: true

dimensions:

- id: hypotheses
  label_en: Hypotheses
  label_de: Hypothesen
  label_fi: Hypoteesit
  categories:
  - id: high_displacement
    label_en: High displacement
    label_de: Hochdisplacement
    label_fi: Korkea siirtymä
  - id: net_reduction
    label_en: Net reduction
    label_de: Nettoreduktion
    label_fi: Nettotuotto
  - id: empirical_estimate
    label_en: Empirical estimate
    label_de: Empirische Schätzung
    label_fi: Empirinen estimaatti
  - id: pessimistic
    label_en: Pessimistic
    label_de: Pessimistisch
    label_fi: Pessimistinen
  - id: optimistic
    label_en: Optimistic
    label_de: Optimistisch
    label_fi: Optimistinen
  - id: moderate
    label_en: Moderate
    label_de: Mittel
    label_fi: Keskiverto

- id: time_of_day
  label_en: Time of day
  label_de: Zeit des Tages
  label_fi: Aika päivänä
  categories:
  - id: peak_hours
    label_en: Peak hours
    label_de: Spitzenstunden
    label_fi: Pikkupisteet
  - id: non_peak_hours
    label_en: Non-peak hours
    label_de: Nicht-Spitzenstunden
    label_fi: Epäpikkupisteet

nodes:

# ===== ETHICAL EVALUATION NODES =====

- id: population
  name: City population
  type: generic.GenericNode
  quantity: population
  unit: persons
  input_nodes:
  - id: income_group_size
    from_dimensions:
    - id: stakeholder
      flatten: true

- id: net_emissions_per_person
  name: Net emissions per person
  description: Annual CO2 emissions per capita from transport sector in city
  type: formula.FormulaNode
  quantity: emissions
  unit: t_co2e/person/a
  input_nodes:
  - id: net_emissions
    from_dimensions:
    - id: vehicle_type
      flatten: true
    - id: energy_carrier
      flatten: true
    tags: [emissions]
  - id: population
  params:
    formula: emissions / population

- id: acceptable_emissions_per_person
  name: Acceptable emissions per person threshold
  description: |
    Morally acceptable per-capita emissions level consistent with climate goals.
    Typically 2-3 tonnes CO2e/person/year for 2°C target; 1-1.5 tonnes for 1.5°C target.
  type: generic.GenericNode
  quantity: emissions
  unit: t_co2e/person/a
  input_datasets:
  - id: transportation/acceptable_emissions_per_person
    output_dimensions: []
  params:
  - id: multiplier
    value: 1.0
    unit: dimensionless

- id: emissions_acceptable
  name: Emissions meet acceptable threshold
  description: Evaluation of whether per-capita emissions are below morally 
    acceptable level
  type: formula.FormulaNode
  quantity: fraction
  unit: dimensionless
  is_outcome: true
  input_nodes:
  - id: net_emissions_per_person
    tags: [actual]
  - id: acceptable_emissions_per_person
    tags: [thresholdd]
  params:
    formula: actual <= thresholdd

# FAIR SHARE ASSESSMENT

- id: global_reduction_needed
  name: Global reduction needed
  description: Fraction of global emissions that must be eliminated to meet 
    climate targets
  type: generic.GenericNode
  quantity: fraction
  unit: dimensionless
  input_datasets:
  - id: transportation/global_emission_share
    output_dimensions: []
  params:
  - id: multiplier
    value: 0.55
    unit: dimensionless
    label: 45% reduction by 2030 is typical pathway target

- id: emission_reduction_achieved
  name: Emission reduction achieved
  description: Reduction from baseline due to policy
  type: generic.GenericNode
  quantity: ratio
  unit: dimensionless
  input_nodes:
  - id: net_emissions_per_person
    tags: [ratio_to_last_historical_value]

- id: fair_share_met
  name: Fair share obligation met
  description: |
    Evaluation of whether city is meeting its proportional responsibility for 
    emission reductions. Returns 1 if fair share met, 0 if not.
  type: formula.FormulaNode
  quantity: fraction
  unit: dimensionless
  is_outcome: true
  input_nodes:
  - id: emission_reduction_achieved
    tags: [achieved]
  - id: global_reduction_needed
    tags: [obligation]
  params:
    formula: achieved <= obligation

# ===== FREE RIDER PROBLEM OPERATIONALIZATION =====

- id: commons_sensitivity
  name: Commons degradation threshold
  description: |
    Percentage of jurisdictions that can continue high emissions before 
    climate system degrades catastrophically. Lower values = more fragile system.
    Typical estimates: 40-60% (if >40-60% of jurisdictions don't act, climate fails).
  type: generic.ConstantNode
  quantity: fraction
  unit: dimensionless
  params:
  - id: constant
    value: 0.50
    unit: dimensionless
    label: How fragile is the climate system?

- id: free_rider_threshold_alpha
  name: Free rider distribution parameter alpha
  description: |
    Alpha parameter for beta distribution of conditional cooperation thresholds (y_i).
    Together with beta, defines distribution of "at what % cooperation will I cooperate?"
    Higher alpha → distribution skewed toward cooperators (high y_i)
  type: generic.ConstantNode
  quantity: number
  unit: dimensionless
  params:
  - id: constant
    value: 2.0
    unit: dimensionless
    label: Shape of cooperation threshold distribution

- id: free_rider_threshold_beta
  name: Free rider distribution parameter beta
  description: |
    Beta parameter for beta distribution of conditional cooperation thresholds.
    Higher beta → distribution skewed toward free riders (low y_i)
  type: generic.ConstantNode
  quantity: number
  unit: dimensionless
  params:
  - id: constant
    value: 2.0
    unit: dimensionless
    label: Shape of cooperation threshold distribution

- id: our_city_threshold
  name: Our city cooperation threshold
  description: |
    Our city's y_i: At what percentage of other cities cooperating will we act?
    0% = unconditional cooperator (act even if alone)
    50% = follow majority
    100% = pure free rider (only act if everyone else does first)
  type: generic.ConstantNode
  quantity: fraction
  unit: dimensionless
  params:
  - id: constant
    value: 0.30
    unit: dimensionless
    label: What should our city's threshold be? Current policy (implementing congestion charge) implies low threshold.

- id: expected_cooperation_rate
  name: Expected global cooperation rate
  description: |
    Expected percentage of cities/jurisdictions worldwide that will take 
    comparable climate action. Based on current trends, commitments, political climate.
  type: generic.GenericNode
  quantity: fraction
  unit: dimensionless
  input_dimensions: [hypotheses]
  output_dimensions: [hypotheses]
  input_datasets:
  - id: transportation/cooperation_rate_estimates
    output_dimensions: [hypotheses]

- id: hypothesis_index
  name: Hypothesis index
  description: Index of the hypotheses.
  type: generic.GenericNode
  quantity: ratio
  unit: dimensionless
  input_dimensions: [hypotheses]
  output_dimensions: [hypotheses]
  input_datasets:
  - id: transportation/hypothesis_index
    output_dimensions: [hypotheses]

- id: commons_survives
  name: Commons survival evaluation
  description: |
    Does the climate system survive? True if exploitation stays below degradation threshold.
    Exploitation rate = (1 - expected_cooperation_rate).
    Returns 1 if enough cooperate, 0 if commons degrades
  type: formula.FormulaNode
  quantity: fraction
  unit: dimensionless
  input_dimensions: [hypotheses]
  output_dimensions: [hypotheses]
  is_outcome: true
  input_nodes:
  - id: expected_cooperation_rate
    to_dimensions:
    - id: hypotheses
    tags: [coop_rate]
  - id: commons_sensitivity
    tags: [thresholdd]
  - id: hypothesis_index
    tags: [index]
  params:
    formula: coop_rate >= (complement(thresholdd) * index)

- id: should_we_cooperate
  name: Should our city cooperate (given free rider logic)
  description: |
    Evaluation based on our city's conditional cooperation threshold:
    We should cooperate if expected_cooperation_rate >= our_city_threshold
  type: formula.FormulaNode
  quantity: fraction
  unit: dimensionless
  input_dimensions: [hypotheses]
  output_dimensions: [hypotheses]
  is_outcome: true
  input_nodes:
  - id: expected_cooperation_rate
    to_dimensions:
    - id: hypotheses
    tags: [others_cooperating]
  - id: our_city_threshold
    tags: [our_threshold]
  - id: hypothesis_index
    tags: [index]
  params:
    formula: others_cooperating >= (our_threshold * index)

- id: cooperation_gap
  name: Cooperation gap
  description: |
    Gap between what's needed (to save commons) and what's expected.
    Positive = surplus cooperation (commons safe)
    Negative = cooperation deficit (commons at risk)
  type: formula.FormulaNode
  quantity: fraction
  unit: dimensionless
  input_dimensions: [hypotheses]
  output_dimensions: [hypotheses]
  is_outcome: true
  input_nodes:
  - id: expected_cooperation_rate
    to_dimensions:
    - id: hypotheses
    tags: [expected]
  - id: commons_sensitivity
    tags: [needed]
  - id: hypothesis_index
    tags: [index]
  params:
    formula: expected >= (needed * index)

## Moral arguments

- id: arg_1_universal_responsibility
  name: 'ARG-1: Universal responsibility'
  description: |
    <h3>Argument: Every jurisdiction must act</h3>
    <p><strong>Claim:</strong> Every jurisdiction that contributes to the problem has a moral obligation to be part of the solution. We cannot demand others act while refusing to act ourselves. Moral duty exists independent of impact calculation.</p>
    <p><strong>Type:</strong> Moral argument based on fairness and reciprocity</p>
    <p><strong>Principle:</strong> "Do unto others as you would have them do unto you" - we expect others to act, therefore we must act.</p>
    <p><strong>Related Evaluation Nodes:</strong></p>
    <ul>
    <li><code>emissions_acceptable</code> - Are our per-capita emissions at acceptable level?</li>
    <li><code>fair_share_met</code> - Are we doing our proportional share?</li>
    <li><code>net_emissions_per_person</code> - Our current per-capita emissions</li>
    </ul>
    <p><strong>Key Parameters Users Can Debate:</strong></p>
    <ul>
    <li><code>acceptable_emissions_per_person</code> - What is morally acceptable threshold? (2°C vs 1.5°C targets)</li>
    <li><code>global_reduction_needed</code> - How much must global emissions fall?</li>
    </ul>
    <p><strong>Operationalization:</strong> This argument claims we have duty regardless of whether others act. The fair_share_met evaluation shows whether we're meeting that duty.</p>
  type: generic.GenericNode
  quantity: argument
  unit: dimensionless
  input_datasets:
  - id: transportation/zeros
    output_dimensions: []
  output_nodes:
  - id: emissions_acceptable
    tags: [ignore_content]

- id: obj_g2_free_rider
  name: 'OBJ-G2: Free rider problem'
  description: |
    <h3>Objection: Why act if others won't?</h3>
    <p><strong>Claim:</strong> If other cities/countries don't act, we bear costs while they get benefits (climate is global). Economically irrational to act unilaterally. This is the "sucker's payoff" in game theory.</p>
    <p><strong>Stakeholders:</strong> Fiscal conservatives, economic rationalists, cynics about international cooperation</p>
    <p><strong>Type:</strong> Rational choice objection / game theory problem</p>
    <p><strong>Related Evaluation Nodes:</strong></p>
    <ul>
    <li><code>fair_share_met</code> - Are we doing our part (regardless of others)?</li>
    <li><code>fair_share_fraction</code> - What % of obligation are we meeting?</li>
    </ul>
    <p><strong>The Debate:</strong></p>
    <p>Two framings of the question:</p>
    <ol>
    <li><strong>Consequentialist:</strong> "Will our action achieve outcomes?" (depends on others)</li>
    <li><strong>Deontological:</strong> "Must we do our fair share?" (independent of others)</li>
    </ol>
    <p><strong>Counter-Arguments:</strong></p>
    <ul>
    <li><strong>ARG-1 (Universal Responsibility):</strong> Moral duty exists regardless</li>
    <li><strong>ARG-20 (Norm Cascades):</strong> Early action changes others' behavior - not truly unilateral</li>
    <li><strong>ARG-7 (Co-benefits):</strong> Local benefits (air quality) accrue regardless of others' actions</li>
    <li><strong>Empirical:</strong> Many cities ARE acting (not isolated)</li>
    </ul>
    <p><strong>Operationalization:</strong> The fair_share_met evaluation shows whether we're meeting proportional responsibility. Users can debate:
    <ul>
    <li>Does meeting our share obligate us even if others don't?</li>
    <li>Or is action only rational if others also act?</li>
    </ul>
    This is ultimately a value choice between duty-based and outcome-based ethics.</p>
  type: generic.GenericNode
  quantity: argument
  unit: dimensionless
  input_datasets:
  - id: transportation/zeros
    output_dimensions: []
  output_nodes:
  - id: fair_share_met
    tags: [ignore_content]

- id: arg_14_intergenerational_responsibility
  name: 'ARG-14: Intergenerational responsibility'
  description: |
    <h3>Argument: Duty to future generations</h3>
    <p><strong>Claim:</strong> Current generation has duty to leave habitable world for children and future generations. We are trustees, not owners, of the planet. Cannot sacrifice their wellbeing for our convenience.</p>
    <p><strong>Type:</strong> Moral argument based on stewardship and legacy</p>
    <p><strong>Emotional Power:</strong> "What will you tell your grandchildren?"</p>
    <p><strong>Related Evaluation Nodes:</strong></p>
    <ul>
    <li><code>emissions_acceptable</code> - PLACEHOLDER: Full operationalization requires climate impact modeling</li>
    <li><code>net_emissions_per_person</code> - Current burden we're leaving for future</li>
    </ul>
    <p><strong>Note:</strong> Complete operationalization would require:
    <ul>
    <li>Cumulative emissions budget (not just annual)</li>
    <li>Climate impact models (temperature, sea level, etc.)</li>
    <li>Intergenerational welfare functions</li>
    <li>Discount rate debates</li>
    </ul>
    <p>For now, this argument links to emissions_acceptable as a placeholder. Future model versions could add:</p>
    <ul>
    <li><code>cumulative_emissions_budget</code></li>
    <li><code>carbon_budget_remaining</code></li>
    <li><code>intergenerational_burden_acceptable</code></li>
    </ul>
    </p>
    <p><strong>Stakeholders:</strong> Parents, educators, youth advocates, long-term institutions</p>
  type: generic.GenericNode
  quantity: argument
  unit: dimensionless
  input_datasets:
  - id: transportation/zeros
    output_dimensions: []
  output_nodes:
  - id: emissions_acceptable
    tags: [ignore_content]

pages:
- id: home
  name: Equalia Climate Action Plan
  name_de: Equalia Klimaschutzplan
  name_fi: Equalian ilmasto-ohjelma
  path: /
  type: emission
  outcome_node: net_emissions
  lead_title: Equalia emission scenarios

scenarios:

- id: baseline
  name_en: Baseline
  name_fi: Nykykehitys
  name_de: Basisszenario

- id: default
  default: true
  name_en: Congestion charge
  name_fi: Ruuhkamaksut
  name_de: Verkehrszölle
  all_actions_enabled: true
