# log 2025-08-27
# Trend-Szenario and MASTERPLAN-Szenario are taken from Zielwerte Masterplan V3.4
#  https://docs.google.com/spreadsheets/d/1KRb2OxOsz9DHG31R6KkE5pxQqz9MUcwF/edit?gid=1016792586#gid=1016792586
# Comparison: Sheets Kerndaten and action add have identical data. Only the calculated values differ. --> Use Kerndaten.


id: potsdam-gpc
default_language: de
supported_languages: []
site_url: https://potsdam-gpc.paths.staging.kausal.tech
dataset_repo:
  url: https://github.com/kausaltech/dvctest.git
  commit: 07e0912cdc4a0c0792f3ad0c67229d1ed84fd4fc
  dvc_remote: kausal-s3
name: Klimaschutz-Monitor-Potsdam Treibhausgasinventar
owner: Stadt Potsdam
theme_identifier: de-potsdam
target_year: 2045
model_end_year: 2050
reference_year: 1995
minimum_historical_year: 1995
maximum_historical_year: 2024
emission_unit: kt/a
emission_forecast_from: 2025
emission_dimensions: [energietrager, scope, ghg]
features:
  baseline_visible_in_graphs: true
  use_datasets_from_db: true
  show_explanations: true

include:
- file: frameworks/standard_dims.yaml
  allow_override: true

params:
- id: weather_correction
  label_de: Wetterkorrektur durchführen?
  value: true
  is_customizable: true
  is_visible: true

action_groups:
- id: stationary
  name: Wärme
  name_en: Heat
  color: '#989898'
- id: electricity
  name: Strom
  name_en: Electricity
  color: '#007C78'
- id: transport
  name: Verkehr
  name_en: Transport
  color: '#0505A0'
- id: afolu
  name: AFOLU
  name_en: AFOLU
  color: '#cccccc'
- id: heat_generation_networks
  name: Ausbau Erneuerbare Energien in der Wärmeerzeugung (Wärmenetze)
  name_en: Expansion of Renewable Energy in Heat Generation (District Heating)
  color: '#D4691A'
- id: heat_generation_individual
  name: Ausbau Erneuerbare Energien in der Wärmeerzeugung (Einzelversorgung)
  name_en: Expansion of Renewable Energy in Heat Generation (Individual Supply)
  color: '#FF8C42'
- id: heat_consumption_networks
  name: Änderung im Wärmeverbrauch (Wärmenetze)
  name_en: Changes in Heat Consumption (District Heating)
  color: '#B85450'
- id: heat_consumption_individual
  name: Änderung im Wärmeverbrauch (Einzelversorgung)
  name_en: Changes in Heat Consumption (Individual Supply)
  color: '#E67E22'
- id: electricity_generation
  name: Ausbau Erneuerbare Energien in der Stromerzeugung
  name_en: Expansion of Renewable Energy in Electricity Generation
  color: '#007C78'
- id: electricity_consumption
  name: Änderung im Stromverbrauch
  name_en: Changes in Electricity Consumption
  color: '#00A693'
- id: transport_energy_expansion
  name: Ausbau Erneuerbare Energien im Verkehr
  name_en: Expansion of Renewable Energy in Transport
  color: '#0505A0'
- id: transport_consumption
  name: Änderung im Energieverbrauch im Verkehr
  name_en: Changes in Energy Consumption in Transport
  color: '#2E4BC6'

dimensions:

- id: decision
  label_en: Decision
  label_de: Entscheidung
  categories:
  - id: district_heating_until_2030
    label_en: 1st Action Package EWP District Heating until 2030
    label_de: 1. Maßnahmepaket EWP Fernwärme bis 2030
  - id: district_heating_2030_2045
    label_en: Further expansion of heating networks 2030-2045 to 100% renewable 
      generation
    label_de: weiterer Ausbau der Wärmenetze 2030-2045 auf 100% Erneuerbare 
      Erzeugung
  - id: re_expansion_masterplan_2045
    label_en: Renewable energy expansion according to Masterplan 100% Climate 
      Protection until 2045
    label_de: EE-Ausbau laut Masterplan 100% Klimaschutz bis 2045
  - id: re_expansion_masterplan_kwp
    label_en: Renewable energy expansion Masterplan and additionally KWP
    label_de: EE-Ausbau Masterplan und zusätzlich KWP
  - id: district_heating_kwp_expansion_areas
    label_en: Expansion of heating networks until 2045 (KWP expansion areas)
    label_de: Ausbau der Wärmenetze bis 2045 (KWP-Ausbaugebiete)
  - id: district_heating_kwp_test_areas
    label_en: Expansion of heating networks until 2045 (additionally KWP test 
      areas)
    label_de: Ausbau der Wärmenetze bis 2045 (zusätzlich KWP-Prüfgebiete)
  - id: decentralized_heat_reduction_replacement
    label_en: Reduction of decentralized heat consumption through replacement 
      with heating networks
    label_de: Reduktion des dezentralen Wärmeverbrauchs durch Ersatz mit 
      Wärmenetzen
  - id: decentralized_heat_reduction_renovation
    label_en: Reduction of decentralized heat consumption through building 
      renovation
    label_de: Reduktion des dezentralen Wärmeverbrauchs durch Gebäudesanierung
  - id: pv_rooftop_expansion
    label_en: Expansion of PV rooftop systems according to Masterplan
    label_de: Ausbau PV Dachanlagen laut Masterplan
  - id: ground_mounted_pv_expansion
    label_en: Expansion of ground-mounted systems according to Masterplan
    label_de: Ausbau Freiflächenanlagen laut Masterplan
  - id: wind_power_potential
    label_en: Wind power plant potential (assumption 8 plants)
    label_de: Potential Windkraftanlagen (Annahme 8 Anlagen)
  - id: electricity_consumption_reduction
    label_en: Reduction of electricity consumption households and commercial
    label_de: Reduktion Stromverbrauch HH und Gewerbe
  - id: improved_federal_grid_mix
    label_en: Improved federal grid mix for residual electricity demand
    label_de: Verbesserter Bundesmix für Reststrombedarf
  - id: re_electricity_emobility
    label_en: Use of renewable electricity for e-mobility and tram (according to
      Masterplan)
    label_de: Nutzung EE-Strom für Elektromobiltät und Straßenbahn (laut 
      Masterplan)
  - id: fossil_fuel_replacement
    label_en: Replacement of fossil fuels with electricity and e-fuels
    label_de: Ersatz fossiler brennstoffe durch Strom und E-Fuels
  - id: local_transport_energy_reduction
    label_en: Reduction of total energy consumption local transport
    label_de: Reduktion Gesamtenergieverbrauch Binnenverkehr
  - id: baseline
    label_en: Baseline
    label_de: Baseline

- id: energietrager
  label_en: Energy Carriers
  label_de: Energieträger
  categories:
  - id: strom
    label_en: Electricity
    label_de: Strom
    aliases: [electricity, strom_fahrstrom]
  - id: fahrstrom
    label_en: Traction Power
    label_de: Fahrstrom
  - id: heizstrom
    label_en: Heating Electricity
    label_de: Heizstrom
    aliases: [heating_electricity]
  - id: fernwarme
    label_en: District Heating
    label_de: Fernwärme
    aliases: [district_heating]
  - id: nahwarme
    label_en: Local Heating
    label_de: Nahwärme
    aliases: [local_heating]
  - id: gas
    label_en: Gas
    label_de: Gas
    aliases: [natural_gas]
  - id: biogas
    label_en: Biogas
    label_de: Biogas
    aliases: [cng_bio]
  - id: heizol
    label_en: Heating Oil
    label_de: Heizöl
    aliases: [heating_oil]
  - id: kohle
    label_en: Coal
    label_de: Kohle
    aliases: [hard_coal]
  - id: brown_coal
    label_en: Brown coal
    label_de: Braunkohle
  - id: biomasse
    label_en: Biomass
    label_de: Biomasse
    aliases: [biomass]
  - id: solarthermie
    label_en: Solar Thermal
    label_de: Solarthermie
    aliases: [solar_thermal]
  - id: umweltwarme
    label_en: Ambient Heat
    label_de: Umweltwärme
    aliases: [environmental_heat]
  - id: other_renewables
    label_en: Other renewables
    label_de: Sonstige erneuerbare Energien
  - id: benzin_fossil
    label_en: Fossil Gasoline
    label_de: Benzin fossil
    aliases: [petrol]
  - id: benzin_biogen
    label_en: Biogenic Gasoline
    label_de: Benzin biogen
    aliases: [bio_petrol]
  - id: diesel_fossil
    label_en: Fossil Diesel
    label_de: Diesel fossil
    aliases: [diesel]
  - id: kerosene
    label_de: Kerosene
    label_en: Kerosene
  - id: diesel_biogen
    label_en: Biogenic Diesel
    label_de: Diesel biogen
    aliases: [biodiesel]
  - id: cng_fossil
    label_en: Fossil CNG (Compressed Natural Gas)
    label_de: CNG fossil
  - id: lpg
    label_en: LPG (Liquefied Petroleum Gas)
    label_de: LPG
  - id: wasserstoff
    label_en: Hydrogen
    label_de: Wasserstoff
  - id: other_conventional
    label_en: Other conventional
    label_de: Sonstige konventionelle Energien
    aliases: [other_conventional]
  - id: total
    label_en: Total
    label_de: Gesamt
    aliases: [total]

emission_sectors:

- id: net_emissions
  name: Gesamtemissionen Potsdam
  name_en: Emissions Potsdam
  is_outcome: true
  goals:
  - label_de: Ziel Netto-Emissionen
    default: true
    is_main_goal: true
    values:
    - year: 2030
      value: 551

nodes:

- id: weather_correction
  name: Witterungsbereinigung
  name_en: Weather Correction
  type: generic.GenericNode
  quantity: ratio
  unit: dimensionless
  input_datasets:
  - id: gpc/potsdam
    forecast_from: 2023
    tags: [baseline]
    column: weather_correction
    filters:
    - column: scope
  params:
  - id: operations
    value: do_correction
  - id: do_correction
    ref: weather_correction
  output_nodes:
  - id: heating_fuel_consumption
    tags: [non_additive]
    to_dimensions: []
  - id: heating_grid_energy_consumption
    tags: [non_additive]
    to_dimensions: []

- id: masterplan_scenario_energy
  name: Masterplan-Szenario energie
  name_en: Masterplan scenario energy
  type: generic.GenericNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [sector, energy_carrier]
  output_dimensions: [sector, energy_carrier]
  input_datasets:
  - id: potsdam/szenarien
    tags: [baseline]
    forecast_from: 2024
    column: energy
    filters:
    - column: scenario
      values: [masterplan_szenario, aktual]

- id: trend_scenario_energy
  name: Trend-Szenario energie
  name_en: Trend scenario energy
  type: generic.GenericNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [sector, energy_carrier]
  output_dimensions: [sector, energy_carrier]
  input_datasets:
  - id: potsdam/szenarien
    tags: [baseline]
    forecast_from: 2024
    column: energy
    filters:
    - column: scenario
      values: [trend_szenario, aktual]

- id: scenario_difference_energy
  name: Masterplan-Szenario energie
  name_en: Scenario difference energy
  type: generic.GenericNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [sector, energy_carrier]
  output_dimensions: [sector, energy_carrier]
  input_nodes:
  - id: masterplan_scenario_energy
  - id: trend_scenario_energy
    tags: [arithmetic_inverse]

- id: masterplan_scenario_emissions
  name: Masterplan-Szenario emissionen
  name_en: Masterplan scenario emissions
  type: generic.GenericNode
  quantity: emissions
  unit: t/a
  input_dimensions: [sector, energy_carrier]
  output_dimensions: [sector, energy_carrier]
  input_datasets:
  - id: potsdam/szenarien
    tags: [baseline]
    forecast_from: 2024
    column: emissions
    filters:
    - column: scenario
      values: [masterplan_szenario, aktual]

- id: trend_scenario_emissions
  name: Trend-Szenario emissionen
  name_en: Trend scenario emissions
  type: generic.GenericNode
  quantity: emissions
  unit: t/a
  input_dimensions: [sector, energy_carrier]
  output_dimensions: [sector, energy_carrier]
  input_datasets:
  - id: potsdam/szenarien
    tags: [baseline]
    forecast_from: 2024
    column: emissions
    filters:
    - column: scenario
      values: [trend_szenario, aktual]

- id: scenario_difference_emissions
  name: Masterplan-Szenario emissionen
  name_en: Scenario difference emissions
  type: generic.GenericNode
  quantity: emissions
  unit: t/a
  input_dimensions: [sector, energy_carrier]
  output_dimensions: [sector, energy_carrier]
  input_nodes:
  - id: masterplan_scenario_emissions
  - id: trend_scenario_emissions
    tags: [arithmetic_inverse]

- id: heating_fuel_consumption
  name: Endenergieverbrauch Wärmesektor
  name_en: Final Energy Heating Sector
  type: generic.GenericNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [energietrager, scope]
  output_dimensions: [energietrager, scope]
  input_datasets:
  - id: gpc/potsdam
    forecast_from: 2023
    tags: [baseline]
    column: energy
    filters:
    - column: sector
      value: i11
  output_nodes:
  - id: heating_fuel_emissions
    to_dimensions:
    - id: energietrager
    - id: scope

- id: heating_fuel_emissions
  name: Emissionen aus Wärmeenergie (ohne Fernwärme)
  name_en: Emissions from Heat Energy (excluding District Heating)
  type: simple.MultiplicativeNode
  quantity: emissions
  unit: kt/a
  input_dimensions: [energietrager, scope, ghg]
  output_dimensions: [energietrager, scope, ghg]
  output_nodes:
  - id: heating_emissions
    to_dimensions:
    - id: energietrager
    - id: scope
    - id: ghg

- id: heating_fuel_emission_factor
  name: Emissionsfaktor Wärmeenergie
  name_en: Emission Factor Heating Energy
  type: generic.GenericNode
  quantity: emission_factor
  unit: t/MWh
  input_dimensions: [ghg, energietrager, scope]
  output_dimensions: [energietrager, ghg, scope]
  input_datasets:
  - id: gpc/potsdam
    forecast_from: 2023
    tags: [baseline]
    column: emission_factor
    filters:
    - column: sector
      value: i11
  output_nodes:
  - id: heating_fuel_emissions
    to_dimensions:
    - id: ghg
    - id: energietrager
    - id: scope

- id: heating_grid_energy_consumption
  name: Netzenergieverbrauch Wohngebäude
  name_en: Grid Energy Consumption Residential Buildings
  type: generic.GenericNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [energietrager, scope]
  output_dimensions: [energietrager, scope]
  input_datasets:
  - id: gpc/potsdam
    forecast_from: 2023
    tags: [baseline]
    column: energy
    filters:
    - column: sector
      value: i12
  output_nodes:
  - id: heating_grid_emissions
    to_dimensions:
    - id: energietrager
    - id: scope

- id: heating_grid_emissions
  name: Emissionen aus Fernwärme
  name_en: Emissions from District Heating
  type: simple.MultiplicativeNode
  quantity: emissions
  unit: kt/a
  input_dimensions: [energietrager, scope, ghg]
  output_dimensions: [energietrager, scope, ghg]
  output_nodes:
  - id: heating_emissions
    to_dimensions:
    - id: energietrager
    - id: scope
    - id: ghg

- id: heating_grid_emission_factor
  name: Emissionsfaktor Netzenergieverbrauch Wohngebäude
  name_en: Emission Factor Grid Energy Consumption Residential Buildings
  type: generic.GenericNode
  quantity: emission_factor
  unit: t/MWh
  input_dimensions: [ghg, energietrager, scope]
  output_dimensions: [ghg, energietrager, scope]
  input_datasets:
  - id: gpc/potsdam
    forecast_from: 2023
    tags: [baseline]
    column: emission_factor
    filters:
    - column: sector
      value: i12
  output_nodes:
  - id: heating_grid_emissions
    to_dimensions:
    - id: ghg
    - id: energietrager
    - id: scope

- id: electricity_consumption
  name: Stromverbrauch (ohne Heizstrom)
  name_en: Electricity Consumption (without heating)
  type: generic.GenericNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [energietrager, scope]
  output_dimensions: [energietrager, scope]
  input_datasets:
  - id: gpc/potsdam
    forecast_from: 2023
    tags: [baseline]
    column: energy
    filters:
    - column: sector
      value: i42

- id: electricity_emissions
  name: Emissionen aus Stromverbrauch (ohne Heizstrom)
  name_en: Emissions from Electricity Consumption (without heating)
  type: simple.MultiplicativeNode
  quantity: emissions
  unit: kt/a
  color: '#2B729C'
  input_dimensions: [energietrager, scope, ghg]
  output_dimensions: [energietrager, scope, ghg]
  input_nodes:
  - id: corrected_electricity_emission_factor
    to_dimensions:
    - id: ghg
    - id: energietrager
    - id: scope
  - id: corrected_electricity_use
    to_dimensions:
    - id: energietrager
    - id: scope
  output_nodes:
  - id: net_emissions
    to_dimensions:
    - id: energietrager
    - id: scope
    - id: ghg

- id: electricity_emission_factor
  name: Emissionsfaktor Strom
  name_en: Emission Factor Electricity
  type: generic.GenericNode
  quantity: emission_factor
  unit: t/MWh
  input_dimensions: [ghg, energietrager, scope]
  output_dimensions: [ghg, energietrager, scope]
  input_datasets:
  - id: gpc/potsdam
    forecast_from: 2023
    tags: [baseline]
    column: emission_factor
    filters:
    - column: sector
      value: i42

# TODO: Should we use these local emission factors instead of national emission
# factors as defined in node electricity_emission_factor?
- id: local_electricity_emission_factor
  name: Lokaler Emissionsfaktor Strom
  name_en: Emission Factor Local Electricity Production
  type: generic.GenericNode
  quantity: emission_factor
  unit: t/MWh
  input_dimensions: [ghg, energietrager, scope]
  output_dimensions: [ghg, energietrager, scope]
  input_datasets:
  - id: gpc/potsdam
    forecast_from: 2023
    tags: [baseline]
    column: emission_factor
    filters:
    - column: sector
      value: i42

- id: transport_fuel_consumption
  name: Brennstoffverbrauch Verkehr
  name_en: Fuel Consumption Traffic
  type: generic.GenericNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [energietrager, scope]
  output_dimensions: [energietrager, scope]
  input_datasets:
  - id: gpc/potsdam
    forecast_from: 2023
    tags: [baseline]
    column: energy
    filters:
    - column: sector
      value: ii11

- id: transport_fuel_emissions
  name: Emissionen aus Brennstoffverbrauch Verkehr
  name_en: Emissions from Fuel Consumption Traffic
  type: simple.MultiplicativeNode
  quantity: emissions
  unit: kt/a
  input_dimensions: [energietrager, scope, ghg]
  output_dimensions: [energietrager, scope, ghg]
  input_nodes:
  - id: corrected_transport_emission_factor
    to_dimensions:
    - id: ghg
    - id: energietrager
    - id: scope
  - id: corrected_transport_fuel_use
    to_dimensions:
    - id: energietrager
    - id: scope
    - id: ghg
  output_nodes:
  - id: transport_emissions
    to_dimensions:
    - id: energietrager
    - id: scope
    - id: ghg

- id: transport_fuel_emission_factor
  name: Emissionsfaktor Brennstoffverbrauch Verkehr
  name_en: Emission Factor Fuels Traffic
  type: generic.GenericNode
  quantity: emission_factor
  unit: g/kWh
  input_dimensions: [ghg, energietrager, scope]
  output_dimensions: [ghg, energietrager, scope]
  input_datasets:
  - id: gpc/potsdam
    forecast_from: 2023
    tags: [baseline]
    column: emission_factor
    filters:
    - column: sector
      value: ii11

- id: transport_electricity_consumption
  name: Stromverbrauch ÖPNV
  name_en: Electricty Consumption Public Transport
  type: generic.GenericNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [energietrager, scope]
  output_dimensions: [energietrager, scope]
  input_datasets:
  - id: gpc/potsdam
    forecast_from: 2023
    tags: [baseline]
    column: energy
    filters:
    - column: sector
      value: ii12
  output_nodes:
  - id: transport_electricity_emissions
    to_dimensions:
    - id: energietrager
    - id: scope

- id: transport_electricity_emissions
  name: Emissionen aus Stromverbrauch ÖPNV
  name_en: Emissions from Electricity Consumption Public Transport
  type: simple.MultiplicativeNode
  quantity: emissions
  unit: kt/a
  input_dimensions: [energietrager, scope, ghg]
  output_dimensions: [energietrager, scope, ghg]
  output_nodes:
  - id: transport_emissions
    to_dimensions:
    - id: energietrager
    - id: scope
    - id: ghg

- id: transport_electricity_emission_factor
  name: Emissionsfaktor Stromverbrauch ÖPNV
  name_en: Emission Factor Electricity Public Transport
  type: generic.GenericNode
  quantity: emission_factor
  unit: t/MWh
  input_dimensions: [ghg, energietrager, scope]
  output_dimensions: [ghg, energietrager, scope]
  input_datasets:
  - id: gpc/potsdam
    forecast_from: 2023
    tags: [baseline]
    column: emission_factor
    filters:
    - column: sector
      value: ii12
  output_nodes:
  - id: transport_electricity_emissions
    to_dimensions:
    - id: ghg
    - id: energietrager
    - id: scope

- id: heating_emissions
  name: Gesamtemissionen Wärmesektor
  name_en: Emissions Heating Sector
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  color: '#9C2B54'
  input_dimensions: [energietrager, scope, ghg]
  output_dimensions: [energietrager, scope, ghg]
  output_nodes:
  - id: net_emissions
    to_dimensions:
    - id: energietrager
    - id: scope
    - id: ghg

- id: transport_emissions
  name: Gesamtemissionen Verkehrssektor
  name_en: Emissions Traffic Sector
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  color: '#299575'
  input_dimensions: [energietrager, scope, ghg]
  output_dimensions: [energietrager, scope, ghg]
  output_nodes:
  - id: net_emissions
    to_dimensions:
    - id: energietrager
    - id: scope
    - id: ghg

- id: i_stationary_energy
  name: Stationärer Energieverbrauch
  name_en: Stationary Energy Consumption
  type: simple.AdditiveNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [energietrager, scope]
  output_dimensions: [energietrager, scope]
  input_nodes:
  - heating_fuel_consumption
  - heating_grid_energy_consumption
  output_nodes:
  - total_energy_consumption

- id: on_road_transport_energy_consumption
  name: Endenergieverbrauch Verkehr
  name_en: Final Energy Traffic
  type: simple.AdditiveNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [energietrager, scope]
  output_dimensions: [energietrager, scope]
  input_nodes:
  - id: transport_electricity_consumption
  - id: corrected_transport_fuel_use
    from_dimensions:
    - id: ghg
      flatten: true
  output_nodes:
  - total_energy_consumption
  params:
  - id: drop_nulls
    value: true
  - id: drop_nans
    value: true

- id: total_energy_consumption
  name: Endenergieverbraucht Gesamt
  name_en: Final Energy Consumption Over All Sectors
  type: simple.AdditiveNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [energietrager, scope]
  output_dimensions: [energietrager, scope]

- id: district_heating_energy
  name: Fernwärmeenergie
  name_en: District heating energy
  type: generic.GenericNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [sector, energietrager]
  output_dimensions: [sector, energietrager]
  input_datasets:
  - id: potsdam/alle_historischen_energie
    tags: [baseline]
    forecast_from: 2025
    column: energy
    filters:
    - column: file_type
    - column: weather_correction
    - column: inventory_method
    - rename_col: energy_carrier
      value: energietrager
    - column: energietrager
      values: [district_heating]
      drop_col: false

- id: district_heating_emissions
  name: Fernwärmeemissionen
  name_en: District heating emissions
  type: generic.GenericNode
  quantity: emissions
  unit: kt/a
  input_dimensions: [sector, energietrager]
  output_dimensions: [sector, energietrager]
  input_nodes:
  - id: district_heating_energy
  - id: corrected_district_heating_emission_factor
  output_nodes:
  - id: heating_emissions2

- id: local_heating_energy
  name: Lokale Wärmeenergie
  name_en: Local heating energy
  type: generic.GenericNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [sector, energietrager]
  output_dimensions: [sector, energietrager]
  input_datasets:
  - id: potsdam/alle_historischen_energie
    tags: [baseline]
    forecast_from: 2025
    column: energy
    filters:
    - column: file_type
    - column: weather_correction
    - column: inventory_method
    - rename_col: energy_carrier
      value: energietrager
    - column: energietrager
      values: [district_heating]
      exclude: true
      drop_col: false
    - column: sector
      value: transport
      exclude: true
      drop_col: false

- id: local_heating_emissions
  name: Lokale Wärmeemissionen
  name_en: Local heating emissions
  type: generic.GenericNode
  quantity: emissions
  unit: kt/a
  input_dimensions: [sector, energietrager]
  output_dimensions: [sector, energietrager]
  input_nodes:
  - id: local_heating_energy
  - id: corrected_local_heating_emission_factor
  output_nodes:
  - id: heating_emissions2

- id: heating_emissions2
  name: Wärmeemissionen2
  name_en: Heating emissions2
  type: generic.GenericNode
  quantity: emissions
  unit: kt/a
  input_dimensions: [sector, energietrager]
  output_dimensions: [sector, energietrager]
  output_nodes:
  - id: net_emissions2

- id: net_emissions2
  name: Nettoemissionen2
  name_en: Net emissions2
  type: generic.GenericNode
  quantity: emissions
  unit: kt/a
  input_dimensions: [sector, energietrager]
  output_dimensions: [sector, energietrager]
  is_outcome: true

# Corrected multipliers affected by actions

- id: low_emission_district_heating_production
  name: Emissionsarme Fernwärmeerzeugung
  name_en: Low-emission district heating production
  type: generic.GenericNode
  quantity: emissions
  unit: kt/a
  input_dimensions: [sector, energietrager]
  output_dimensions: [sector, energietrager]
  input_datasets:
  - id: potsdam/action_baseline
    tags: [baseline]
    column: baseline
    filters:
    - column: decision
  input_nodes:
  - id: district_heating_energy
    tags: [use_as_shares]
  params:
    operations: add,use_as_shares

- id: low_emission_local_heating_production
  name: Emissionsarme lokale Wärmeerzeugung
  name_en: Low-emission local heating production
  type: generic.GenericNode
  quantity: emissions
  unit: kt/a
  input_dimensions: [sector, energietrager]
  output_dimensions: [sector, energietrager]
  input_datasets:
  - id: potsdam/action_baseline
    tags: [baseline]
    column: baseline
    filters:
    - column: decision
  input_nodes:
  - id: local_heating_energy
    tags: [use_as_shares]
  params:
    operations: add,use_as_shares

- id: low_energy_district_heating
  name: Energiesparende Fernwärme
  name_en: Low-energy district heating
  type: generic.GenericNode
  quantity: emissions
  unit: kt/a

- id: low_energy_local_heating
  name: Energiesparende lokale Wärme
  name_en: Low-energy local heating
  type: generic.GenericNode
  quantity: emissions
  unit: kt/a

- id: corrected_district_heating_emission_factor
  name: Korrigierter Fernwärme-Emissionsfaktor
  name_en: Corrected district heating emission factor
  description: Eine Maßnahme (A) hat eine bekannte Auswirkung auf das Ergebnis 
    (R) über einen Multiplikator (M1).</br> Da R = M1 * M2, mit Maßnahme R + A =
    M1' * M2 <=> M1' = (M1 * M2 + A) / M2 = M1 + A / M2.
  description_en: An action (A) has a known effect on the result (R) via one 
    multiplier (M1).</br> As R = M1 * M2, with action R + A = M1' * M2 <=> M1' =
    (M1 * M2 + A) / M2 = M1 + A / M2.
  type: generic.GenericNode
  quantity: emission_factor
  unit: g/kWh
  input_dimensions: [sector, energietrager]
  output_dimensions: [sector, energietrager]
  input_nodes:
  - id: heating_grid_emission_factor
    tags: [add_to_existing_dims]
    from_dimensions:
    - id: ghg
      flatten: true
    - id: scope
      flatten: true
    to_dimensions:
    - id: energietrager
  - id: district_heating_energy
    tags: [geometric_inverse]
    to_dimensions:
    - id: energietrager
    - id: sector
  - id: low_emission_district_heating_production
    tags: [arithmetic_inverse]
    to_dimensions:
    - id: energietrager
    - id: sector
  params:
    operations: multiply,add_to_existing_dims

- id: corrected_local_heating_emission_factor
  name: Korrigierter lokaler Wärme-Emissionsfaktor
  name_en: Corrected local heating emission factor
  description: Eine Maßnahme (A) hat eine bekannte Auswirkung auf das Ergebnis 
    (R) über einen Multiplikator (M1).</br> Da R = M1 * M2, mit Maßnahme R + A =
    M1' * M2 <=> M1' = (M1 * M2 + A) / M2 = M1 + A / M2.
  description_en: An action (A) has a known effect on the result (R) via one 
    multiplier (M1).</br> As R = M1 * M2, with action R + A = M1' * M2 <=> M1' =
    (M1 * M2 + A) / M2 = M1 + A / M2.
  type: generic.GenericNode
  quantity: emission_factor
  unit: g/kWh
  input_dimensions: [sector, energietrager]
  output_dimensions: [sector, energietrager]
  input_nodes:
  - id: heating_fuel_emission_factor
    tags: [add_to_existing_dims]
    from_dimensions:
    - id: ghg
      flatten: true
    - id: scope
      flatten: true
    to_dimensions:
    - id: energietrager
  - id: local_heating_energy
    tags: [geometric_inverse]
    to_dimensions:
    - id: energietrager
    - id: sector
  - id: low_emission_local_heating_production
    tags: [arithmetic_inverse]
    to_dimensions:
    - id: energietrager
    - id: sector
  params:
    operations: multiply,add_to_existing_dims,drop_nans

# Electricity

- id: low_emission_electricity_production
  name: Emissionsarme Stromerzeugung
  name_en: Low-emission electricity production
  description: Es gibt mehrere Quellen für emissionsfreie Stromerzeugung und die
    Verbesserung des nationalen Strommixes. Dies ist die Summe dieser 
    Produktion, angegeben als Emissionseinsparungen, die durch diese Produktion 
    erreicht werden können, da sie Strom mit normalem Emissionsfaktor ersetzt.
  description_en: There are several sources of zero-emission electricity and 
    cleaning of national electricity. This is the sum of that production, given 
    as emission savings reachable because of this production replaces 
    electricity with normal emission factor.
  type: generic.GenericNode
  quantity: emissions
  unit: kt/a

- id: corrected_electricity_emission_factor
  name: Korrigierter Strom-Emissionsfaktor
  name_en: Corrected electricity emission factor
  description: Eine Maßnahme (A) hat eine bekannte Auswirkung auf das Ergebnis 
    (R) über einen Multiplikator (M1).</br> Da R = M1 * M2, mit Maßnahme R + A =
    M1' * M2 <=> M1' = (M1 * M2 + A) / M2 = M1 + A / M2.
  description_en: An action (A) has a known effect on the result (R) via one 
    multiplier (M1).</br> As R = M1 * M2, with action R + A = M1' * M2 <=> M1' =
    (M1 * M2 + A) / M2 = M1 + A / M2.
  type: generic.GenericNode
  quantity: emission_factor
  unit: g/kWh
  input_dimensions: [energietrager, scope, ghg]
  output_dimensions: [energietrager, scope, ghg]
  input_nodes:
  - id: electricity_emission_factor
  - id: electricity_consumption
    tags: [geometric_inverse]
    to_dimensions:
    - id: energietrager
    - id: scope
  - id: low_emission_electricity_production
    tags: [arithmetic_inverse]
    to_dimensions:
    - id: ghg
      categories: [co2e]

- id: low_use_electricity
  name: Stromverbrauchsreduzierung
  name_en: Low-use electricity reduction
  description: Es gibt Quellen für die Reduzierung des Stromverbrauchs. Dies ist
    die Summe dieser Reduzierung, angegeben als Emissionseinsparungen, die durch
    diese verringerte Nutzung erreicht werden können.
  description_en: There are sources of electricity use reduction. This is the 
    sum of that reduction, given as emission savings reachable because of this 
    reduced use.
  type: generic.GenericNode
  quantity: emissions
  unit: kt/a

- id: corrected_electricity_use
  name: Korrigierter Stromverbrauch
  name_en: Corrected electricity use
  description: Eine Maßnahme (A) hat eine bekannte Auswirkung auf das Ergebnis 
    (R) über einen Multiplikator (M1).</br> Da R = M1 * M2, mit Maßnahme R + A =
    M1' * M2 <=> M1' = (M1 * M2 + A) / M2 = M1 + A / M2.
  description_en: An action (A) has a known effect on the result (R) via one 
    multiplier (M1).</br> As R = M1 * M2, with action R + A = M1' * M2 <=> M1' =
    (M1 * M2 + A) / M2 = M1 + A / M2.
  type: generic.GenericNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [energietrager, scope]
  output_dimensions: [energietrager, scope]
  input_nodes:
  - id: corrected_electricity_emission_factor
    tags: [geometric_inverse]
    from_dimensions:
    - id: ghg
      categories: [co2e]
      flatten: true
  - id: electricity_consumption
    to_dimensions:
    - id: energietrager
    - id: scope
  - id: low_use_electricity
    tags: [arithmetic_inverse]
    to_dimensions: []
  output_nodes:
  - id: total_energy_consumption

- id: low_emission_transport
  name: Emissionsarmer Verkehr
  name_en: Low-emission transport
  description: Es gibt mehrere Quellen für emissionsarmen Verkehr. Dies ist die 
    Summe dieser Produktion, angegeben als Emissionseinsparungen, die durch 
    diesen Verkehr erreicht werden können, da er Verkehr mit normalem 
    Emissionsfaktor ersetzt.
  description_en: There are several sources of low-emission transport available.
    This is the sum of that production, given as emission savings reachable 
    because of this transport replaces that with normal emission factor.
  type: generic.GenericNode
  quantity: emissions
  unit: kt/a

- id: energy_saving_fuel_shares
  name: Energiesparende Brennstoffanteile
  name_en: Energy saving fuel shares
  description: Da die Änderungen im Kraftstoffverbrauch als 
    Gesamtemissionsänderungen beschrieben werden, müssen wir die 
    Gesamteinsparung auf einige Energieträger aufteilen. Dies geschieht 
    entsprechend diesen Anteilen, die nominale Anteile der häufigsten 
    Energieträger sind.
  description_en: As the fuel use changes are described as total emissions 
    changes, we need to split the total saving to some energy carriers. This is 
    done according to these shares, which are nominal shares across the most 
    common energy carriers.
  type: generic.GenericNode
  quantity: fraction
  unit: dimensionless
  input_dimensions: [energietrager]
  output_dimensions: [energietrager]
  input_datasets:
  - id: potsdam/energieanteile_der_verbesserung
    tags: [baseline]
    column: energieanteile

# TODO This intermediate node is needed because adding nodes with mismatching dims is not allowed.
- id: low_emission_transport_split
  name: Emissionsarmer Verkehr aufgeteilt in Kategorien
  name_en: Low emission transport split into categories
  type: generic.GenericNode
  quantity: emissions
  unit: kt/a
  input_dimensions: [energietrager, scope]
  output_dimensions: [energietrager, scope]
  input_nodes:
  - id: energy_saving_fuel_shares
    tags: [use_as_shares]
    to_dimensions:
    - id: energietrager
    - id: scope
      categories: [scope1]
  - id: low_emission_transport
    tags: [skip_dim_test]
  params:
    operations: skip_dim_test,use_as_shares

- id: corrected_transport_emission_factor
  name: Korrigierter Verkehrs-Emissionsfaktor
  name_en: Corrected transport emission factor
  description: Eine Maßnahme (A) hat eine bekannte Auswirkung auf das Ergebnis 
    (R) über einen Multiplikator (M1).</br> Da R = M1 * M2, mit Maßnahme R + A =
    M1' * M2 <=> M1' = (M1 * M2 + A) / M2 = M1 + A / M2.
  description_en: An action (A) has a known effect on the result (R) via one 
    multiplier (M1).</br> As R = M1 * M2, with action R + A = M1' * M2 <=> M1' =
    (M1 * M2 + A) / M2 = M1 + A / M2.
  type: generic.GenericNode
  quantity: emission_factor
  unit: g/kWh
  input_dimensions: [energietrager, scope, ghg]
  output_dimensions: [energietrager, scope, ghg]
  input_nodes:
  - id: transport_fuel_emission_factor
  - id: transport_fuel_consumption
    tags: [geometric_inverse]
    to_dimensions:
    - id: energietrager
    - id: scope
  - id: low_emission_transport_split
    tags: [arithmetic_inverse]
    to_dimensions:
    - id: energietrager
    - id: scope
    - id: ghg
      categories: [co2e]

- id: low_fuel_transport
  name: Kraftstoffarmer Verkehr
  name_en: Low-fuel transport
  description: Es gibt Möglichkeiten, den Kraftstoffverbrauch im Verkehr zu 
    reduzieren. Dies ist die Summe dieser Reduzierung, angegeben als 
    Emissionseinsparungen, die durch diese Änderung im Verkehr erreicht werden 
    können.
  description_en: There are ways to reduce fuel use in transport. This is the 
    sum of that reduction, given as emission savings reachable because of this 
    change in transport.
  type: generic.GenericNode
  quantity: emissions
  unit: kt/a
  input_dimensions: [energietrager, scope]
  output_dimensions: [energietrager, scope]
  input_nodes:
  - id: transport_fuel_consumption
    tags: [use_as_shares]
  params:
    operations: skip_dim_test,use_as_shares

- id: corrected_transport_fuel_use
  name: Korrigierter Verkehrs-Kraftstoffverbrauch
  name_en: Corrected transport fuel use
  description: Eine Maßnahme (A) hat eine bekannte Auswirkung auf das Ergebnis 
    (R) über einen Multiplikator (M1).</br> Da R = M1 * M2, mit Maßnahme R + A =
    M1' * M2 <=> M1' = (M1 * M2 + A) / M2 = M1 + A / M2.
  description_en: An action (A) has a known effect on the result (R) via one 
    multiplier (M1).</br> As R = M1 * M2, with action R + A = M1' * M2 <=> M1' =
    (M1 * M2 + A) / M2 = M1 + A / M2.
  type: generic.GenericNode
  quantity: energy
  unit: MWh/a
  input_dimensions: [energietrager, scope, ghg]
  output_dimensions: [energietrager, scope, ghg]
  input_nodes:
  - id: corrected_transport_emission_factor
    tags: [geometric_inverse]
  - id: transport_fuel_consumption
    to_dimensions:
    - id: energietrager
    - id: scope
    - id: ghg
      categories: [co2e]
  - id: low_fuel_transport
    tags: [arithmetic_inverse]
    to_dimensions:
    - id: energietrager
    - id: scope

##### COSTS

- id: energy_prices
  name: Energiepreise
  name_en: Energy prices
  type: generic.GenericNode
  quantity: unit_price
  unit: EUR/MWh
  input_dimensions: [energietrager, sector]
  output_dimensions: [energietrager, sector]
  input_datasets:
  - id: potsdam/energy_prices
    tags: [baseline]

- id: total_energy_costs
  name: Endenergiekosten Gesamt
  name_en: Final Energy Costs Over All Sectors
  type: generic.GenericNode
  quantity: currency
  unit: MEUR/a
  input_dimensions: [energietrager, sector]
  output_dimensions: [energietrager, sector]
  input_nodes:
  - id: total_energy_consumption
    from_dimensions:
    - id: scope
      flatten: true
    to_dimensions:
    - id: energietrager
  - id: energy_prices

actions:

# NEW ACTIONS from action impact 250801.xlsx
# https://docs.google.com/spreadsheets/d/15aMuO2-GmvYw8IXe3pgSN6LvfdEqDPI6/edit?gid=2009060009#gid=2009060009

- id: district_heating_until_2030
  name: 1. Maßnahmepaket EWP (Energiewende-Programm) Fernwärme bis 2030
  name_en: 1st Action Package EWP (Energy Transition Program) District Heating 
    until 2030
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: heat_generation_networks
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: district_heating_until_2030
  output_nodes:
  - id: low_emission_district_heating_production
    to_dimensions: []

- id: district_heating_2030_2045
  name: Weiterer Ausbau der Wärmenetze 2030-2045 auf 100% Erneuerbare Erzeugung
  name_en: Further expansion of heating networks 2030-2045 to 100% renewable 
    generation
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: heat_generation_networks
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: district_heating_2030_2045
  output_nodes:
  - id: low_emission_district_heating_production
    to_dimensions: []

- id: re_expansion_masterplan_2045
  name: EE-Ausbau laut Masterplan 100% Klimaschutz bis 2045
  name_en: RE expansion according to Masterplan 100% Climate Protection until 
    2045
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: heat_generation_individual
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: re_expansion_masterplan_2045
  output_nodes:
  - id: low_emission_local_heating_production

- id: re_expansion_masterplan_kwp
  name: EE-Ausbau Masterplan und zusätzlich KWP (Kommunale Wärmeplanung)
  name_en: RE expansion Masterplan and additionally KWP (Municipal Heat 
    Planning)
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: heat_generation_individual
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: re_expansion_masterplan_kwp
  output_nodes:
  - id: low_emission_local_heating_production

- id: district_heating_kwp_expansion_areas
  name: Ausbau der Wärmenetze bis 2045 (KWP-Ausbaugebiete)
  name_en: Expansion of heating networks until 2045 (KWP expansion areas)
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: heat_consumption_networks
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: district_heating_kwp_expansion_areas
  output_nodes:
  - id: low_energy_district_heating

- id: district_heating_kwp_test_areas
  name: Ausbau der Wärmenetze bis 2045 (zusätzlich KWP-Prüfgebiete)
  name_en: Expansion of heating networks until 2045 (additionally KWP test 
    areas)
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: heat_consumption_networks
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: district_heating_kwp_test_areas
  output_nodes:
  - id: low_energy_district_heating

- id: decentralized_heat_reduction_replacement
  name: Reduktion des dezentralen Wärmeverbrauchs durch Ersatz mit Wärmenetzen
  name_en: Reduction of decentralized heat consumption through replacement with 
    heating networks
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: heat_consumption_individual
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: decentralized_heat_reduction_replacement
  output_nodes:
  - id: low_energy_local_heating

- id: decentralized_heat_reduction_renovation
  name: Reduktion des dezentralen Wärmeverbrauchs durch Gebäudesanierung
  name_en: Reduction of decentralized heat consumption through building 
    renovation
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: heat_consumption_individual
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: decentralized_heat_reduction_renovation
  output_nodes:
  - id: low_energy_local_heating

- id: pv_rooftop_expansion
  name: Ausbau PV Dachanlagen laut Masterplan
  name_en: Expansion of PV rooftop systems according to Masterplan
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: electricity_generation
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: pv_rooftop_expansion
  output_nodes:
  - id: low_emission_electricity_production

- id: ground_mounted_pv_expansion
  name: Ausbau Freiflächenanlagen laut Masterplan
  name_en: Expansion of ground-mounted systems according to Masterplan
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: electricity_generation
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: ground_mounted_pv_expansion
  output_nodes:
  - id: low_emission_electricity_production

- id: wind_power_potential
  name: Potential Windkraftanlagen (Annahme 8 Anlagen)
  name_en: Wind power plant potential (assumption 8 plants)
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: electricity_generation
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: wind_power_potential
  output_nodes:
  - id: low_emission_electricity_production

- id: electricity_consumption_reduction
  name: Reduktion Stromverbrauch HH und Gewerbe
  name_en: Reduction of electricity consumption households and commercial
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: electricity_consumption
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: electricity_consumption_reduction
  output_nodes:
  - id: low_use_electricity

- id: improved_federal_grid_mix
  name: Verbesserter Bundesmix für Reststrombedarf
  name_en: Improved federal grid mix for residual electricity demand
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: electricity_consumption
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: improved_federal_grid_mix
  output_nodes:
  - id: low_emission_electricity_production

- id: re_electricity_emobility
  name: Nutzung EE-Strom für Elektromobiltät und Straßenbahn (laut Masterplan)
  name_en: Use of RE electricity for e-mobility and tram (according to 
    Masterplan)
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: transport_energy_expansion
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: re_electricity_emobility
  output_nodes:
  - id: low_emission_transport

- id: fossil_fuel_replacement
  name: Ersatz fossiler brennstoffe durch Strom und E-Fuels
  name_en: Replacement of fossil fuels with electricity and e-fuels
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: transport_energy_expansion
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: fossil_fuel_replacement
  output_nodes:
  - id: low_emission_transport

- id: local_transport_energy_reduction
  name: Reduktion Gesamtenergieverbrauch Binnenverkehr
  name_en: Reduction of total energy consumption local transport
  type: simple.GenericAction
  quantity: emissions
  unit: kt/a
  group: transport_consumption
  input_datasets:
  - id: potsdam/action_impact
    tags: [baseline]
    forecast_from: 2025
    column: action_impact
    filters:
    - column: decision
      value: local_transport_energy_reduction
  output_nodes:
  - id: low_fuel_transport
    tags: [skip_dim_test] # Possible here because only one action to split

# OLD ACTIONS

# - id: i11_residential_fuel_consumption_action
#   name: Reduktion im Verbrauch von Wärmeenergieträgern (außer Fernwärme)
#   name_en: Reduction in consumption of heating energy carriers (excluding district heating)
#   description: Durch den prognostizierten starken Zuzug in die Landeshauptstadt wird auch der Bedarf nach Wärmeenergie steigen. Durch Maßnahmen zur Gebäudesanierung und hohen energetischen Standards im Neubau sollte jedoch eine deutliche Reduktion pro Quadratmeter erfolgen. In Summe sollte der Verbrauch von dezentralen Wärmeenergieträgern (ohne Fernwärme) bis zum Jahr 2045 um ca. 30% im Vergleich zum Jahr 2020 reduziert werden. Der Fernwärmeverbrauch sollte durch Ausbau und Verdichtung hingegen leicht steigen (siehe Maßnahme 1.3).
#   description_en: Due to the predicted strong population growth in the state capital, the demand for heating energy will also increase. However, through building renovation measures and high energy standards in new construction, a significant reduction per square meter should be achieved. In total, the consumption of decentralized heating energy carriers (excluding district heating) should be reduced by about 30% by 2045 compared to 2020. District heating consumption should increase slightly through expansion and densification (see measure 1.3).
#   type: simple.GenericAction
#   quantity: energy
#   unit: MWh/a
#   group: stationary
#   output_dimensions: [energietrager, scope]
#   input_datasets:
#   - id: gpc/potsdam_master_plan_actions
#     tags: [baseline]
#     forecast_from: 2025
#     column: energy
#     filters:
#     - column: sector
#       value: i11
#   output_nodes:
#   - id: heating_fuel_consumption

# - id: i11_residential_fuel_emission_factor_action
#   name: Umsetzung drastische CO2-Reduktion von Wärmeenergieträgern (außer Fernwärme)
#   name_en: Implementation of drastic CO2 reduction of heating energy carriers (excluding district heating)
#   description: Die Verringerung des Wärmenergieverbrauchs ist eine Seite der Medaille. Die andere ist die deutliche Reduzierung der Treibhausgasemissionen je eingesetzter Kilowattstunde. Kern der Potsdamer Strategie ist die langfristige Abkehr von fossilen Brennstoffen, insbesondere vom Erdgas. Die Substitution sollte v.a. durch Wärmepumpen, Fernwärme, kleine Nahwärmenetze und – in geringeren Mengen – grünen Gasen und Wasserstoff erfolgen.
#   description_en: The reduction of heating energy consumption is one side of the coin. The other is the significant reduction of greenhouse gas emissions per kilowatt hour used. The core of Potsdam's strategy is the long-term shift away from fossil fuels, especially natural gas. The substitution should be achieved primarily through heat pumps, district heating, small local heating networks and – in smaller quantities – green gases and hydrogen.
#   type: simple.GenericAction
#   quantity: emission_factor
#   unit: t/MWh
#   group: stationary
#   input_dimensions: [energietrager, scope, ghg]
#   output_dimensions: [energietrager, scope, ghg]
#   input_datasets:
#   - id: gpc/potsdam_master_plan_actions
#     tags: [baseline]
#     forecast_from: 2025
#     column: emission_factor
#     filters:
#     - column: sector
#       value: i11
#   output_nodes: [heating_fuel_emission_factor]

# - id: i12_residential_grid_energy_consumption_action
#   name: Ausbau der Fernwärme
#   name_en: Expansion of district heating
#   description: Der Ausbau der Fernwärme ist ein wichtiger Baustein in der Potsdamer Klimaschutzstrategie. Hier lassen sich zentral emissionsarme Technologien effizienter umsetzen, etwa die Tiefe Geothermie. Die Abnahmestellen sollten daher deutlich steigen und die Erzeugung – trotz verringerter Verbräuche pro m² - insgesamt steigen.
#   description_en: The expansion of district heating is an important building block in Potsdam's climate protection strategy. Low-emission technologies can be implemented more efficiently centrally, such as deep geothermal energy. The delivery points should therefore increase significantly and generation – despite reduced consumption per m² – should increase overall.
#   type: simple.GenericAction
#   quantity: energy
#   unit: MWh/a
#   group: stationary
#   output_dimensions: [energietrager, scope]
#   input_datasets:
#   - id: gpc/potsdam_master_plan_actions
#     tags: [baseline]
#     forecast_from: 2025
#     column: energy
#     filters:
#     - column: sector
#       value: i12
#   output_nodes:
#   - id: heating_grid_energy_consumption

# - id: i12_residential_grid_energy_emission_factor_action
#   name: Umsetzung drastische CO2-Reduktion in der Fernwärmeerzeugung
#   name_en: Implementation of drastic CO2 reduction in district heating generation
#   description: 'Der Emissionsfaktor der Potsdamer Fernwärme liegt derzeit bei ca. 155g/kWh und soll bis zum Jahr 2025 auf ca. 50g/kWh sinken. Zum Vergleich: Erdgas in der Wärmenutzung erzeugt ca. 250g/kWh, Biogas 110g/kWh und Solarthermie 25g/kWh (jeweils einschließlich CO2-Äquivalenten und Vorkettenemissionen). Das Ziel für die Fernwärme soll erreicht werden, indem Umweltwärme und Power-to-Heat stark ausgebaut und Kraft-Wärme-Kopplungsanlagen zunehmend mit emissionsärmeren Brennstoffen, etwa Wasserstoff, betrieben werden.'
#   description_en: 'The emission factor of Potsdam district heating is currently around 155g/kWh and should decrease to around 50g/kWh by 2025. For comparison: natural gas in heating use generates around 250g/kWh, biogas 110g/kWh and solar thermal 25g/kWh (each including CO2 equivalents and upstream emissions). The goal for district heating should be achieved by strongly expanding environmental heat and power-to-heat and increasingly operating combined heat and power plants with lower-emission fuels, such as hydrogen.'
#   type: simple.GenericAction
#   quantity: emission_factor
#   unit: t/MWh
#   group: stationary
#   output_dimensions: [energietrager, ghg, scope]
#   input_datasets:
#   - id: gpc/potsdam_master_plan_actions
#     tags: [baseline]
#     forecast_from: 2025
#     column: emission_factor
#     filters:
#     - column: sector
#       value: i12
#   output_nodes: [heating_grid_emission_factor]

# - id: i42_energy_grid_energy_consumption_action
#   name: Reduktion des Stromverbrauch in Haushalten und Gewerbe (ohne Heiz- und Mobilitätsstrom)
#   name_en: Reduction of electricity consumption in households and commerce (excluding heating and mobility electricity)
#   description: Der Stromverbrauch in diesem Bereich sollte deutlich reduziert werden, von heute ca. 525.000 MWh auf ca. 375.000 MWh bzw. pro Einwohner von 2.800 kWh auf 1.700 kWh pro Jahr. Dafür sind eine Vielzahl kleinteiliger Maßnahmen nötig, z.B. Klimaneutralitätskonzepte für große Unternehmen und Institutionen der Stadt (SPSG, Landesliegenschaften, Medienbranche u.a.); das Ausrollen von Smart- Metering; Energieeffizienznetzwerke der Wirtschaft; Energieberatung und Kampagnen; Anreize für effiziente Haushaltsgeräte sowie permanente Öffentlichkeitsarbeit.
#   description_en: Electricity consumption in this area should be significantly reduced, from today's approximately 525,000 MWh to approximately 375,000 MWh or per inhabitant from 2,800 kWh to 1,700 kWh per year. This requires a variety of small-scale measures, e.g. climate neutrality concepts for large companies and institutions in the city (SPSG, state properties, media industry, etc.); the rollout of smart metering; energy efficiency networks in business; energy consulting and campaigns; incentives for efficient household appliances as well as permanent public relations work.
#   type: simple.GenericAction
#   quantity: energy
#   unit: MWh/a
#   group: electricity
#   output_dimensions: [energietrager, scope]
#   input_datasets:
#   - id: gpc/potsdam_master_plan_actions
#     tags: [baseline]
#     forecast_from: 2025
#     column: energy
#     filters:
#     - column: sector
#       value: i42
#   output_nodes: [electricity_consumption]

# - id: i42_energy_grid_energy_emission_factor_action
#   name: Ausbau erneuerbarer Energien in der Stromerzeugung
#   name_en: Expansion of renewable energies in electricity generation
#   description: Strom wird künftig als Energieträger noch wichtiger als er es heute bereits ist. Auch Wärmeenergie und Mobilität sollen zum Teil darüber gedeckt werden. Umso wichtiger ist es die Erzeugung soweit möglich auf Erneuerbare Energie umzustellen.<br> Potsdam als städtischer Raum kann v.a. Dachflächen für die Photovoltaik nutzen. Das Potential liegt bei ca. 170 Gigawattstunden pro Jahr. Bisher werden lediglich ca. 20 MWh erzeugt. In den ländlichen Ortsteilen sind auch große Freiflächenanlagen möglich. 2017 wurde das Potential auf ca. 140 GWh geschätzt. Durch die Weiterentwicklung der Technik dürfte es heute noch etwas höher liegen. Derzeit sind Anlagen u.a. in Satzkorn in Planung.<br> Durch das Wind-an-Land-Gesetz von 2023 gibt es mittlerweile auch theoretisch die Möglichkeit der Windenergienutzung in Potsdam. Die planerischen Hürden sind hier sehr hoch, werden jedoch ebenfalls geprüft.
#   description_en: Electricity as an energy carrier will be even more important in the future than it already is today. Heating energy and mobility should also be partially covered by it. It is therefore all the more important to convert generation to renewable energy as much as possible.<br> Potsdam as an urban area can primarily use rooftop areas for photovoltaics. The potential is around 170 gigawatt hours per year. So far, only around 20 MWh is generated. Large ground-mounted systems are also possible in rural districts. In 2017, the potential was estimated at around 140 GWh. Due to technological development, it is likely to be somewhat higher today. Systems are currently being planned in Satzkorn, among other places.<br> The Onshore Wind Energy Act of 2023 now also theoretically provides the possibility of using wind energy in Potsdam. The planning hurdles are very high here, but are also being examined.
#   type: simple.GenericAction
#   quantity: emission_factor
#   unit: t/MWh
#   group: electricity
#   output_dimensions: [energietrager, ghg, scope]
#   input_datasets:
#   - id: gpc/potsdam_master_plan_actions
#     tags: [baseline]
#     forecast_from: 2025
#     column: emission_factor
#     filters:
#     - column: sector
#       value: i42
#   output_nodes: [electricity_emission_factor]

# - id: ii11_onroad_transport_fuel_consumption_action
#   name: Reduzierung Gesamtenergieverbrauchs im Binnenverkehr
#   name_en: Reduction of total energy consumption in local transport
#   description: Die Umstellung der Mobilität auf elektrische Antriebe und fossilfreie Brennstoffe sind nur die halbe Miete zur Erreichung der Klimaschutzziele. Der Energieeinsatz sollte bis 2045 etwa halbiert werden im Vergleich zu 2020. Zum Teil wird dies durch die höhere Effizienz von Elektromotoren erreicht werden können. Einen wesentlichen Teil sollte jedoch die deutliche Erhöhung des Umweltverbundes (Fuß, Rad, ÖPNV) haben, da hier Energie ganz eingespart oder pro Kopf effizienter eingesetzt wird.
#   description_en: Converting mobility to electric drives and fossil-free fuels is only half the battle for achieving climate protection goals. Energy use should be roughly halved by 2045 compared to 2020. This can be partially achieved through the higher efficiency of electric motors. However, a significant part should be the substantial increase in sustainable transport modes (walking, cycling, public transport), as energy is completely saved or used more efficiently per capita here.
#   type: simple.GenericAction
#   quantity: energy
#   unit: MWh/a
#   group: transport
#   output_dimensions: [energietrager, scope]
#   input_datasets:
#   - id: gpc/potsdam_master_plan_actions
#     tags: [baseline]
#     forecast_from: 2025
#     column: energy
#     filters:
#     - column: sector
#       value: ii11
#   output_nodes: [transport_fuel_consumption]

# - id: ii11_onroad_transport_fuel_emission_factor_action
#   name: Zunahme der Anteile emissionsarmer Brennstoffe und der Elektromobilität
#   name_en: Increase in the share of low-emission fuels and electromobility
#   description: Insbesondere die verbleibenden Anteile des Motorisierten Individualverkehrs (MIV) sollten durch Elektromobilität und – in geringerem Umfang – durch synthetische Treibstoffe und effiziente Erdgasnutzung gedeckt werden.
#   description_en: In particular, the remaining shares of motorized individual transport (MIT) should be covered by electromobility and – to a lesser extent – by synthetic fuels and efficient natural gas use.
#   type: simple.GenericAction
#   quantity: emission_factor
#   unit: t/MWh
#   group: transport
#   output_dimensions: [energietrager, ghg, scope]
#   input_datasets:
#   - id: gpc/potsdam_master_plan_actions
#     tags: [baseline]
#     forecast_from: 2025
#     column: emission_factor
#     filters:
#     - column: sector
#       value: ii11
#   output_nodes: [transport_fuel_emission_factor]

# - id: ii12_onroad_transport_grid_energy_consumption_action
#   name: Erhöhung des Anteils des stromgebundenen ÖPNV und der Elektromobilität
#   name_en: Increasing the share of electricity-based public transport and electromobility
#   description: Das Straßenbahnnetz soll ausgebaut und eine hohe Auslastung erreicht werden. Auch der MIV soll zunehmend elektrifiziert werden.
#   description_en: The tram network should be expanded and high capacity utilization achieved. Motorized individual transport should also be increasingly electrified.
#   type: simple.GenericAction
#   quantity: energy
#   unit: MWh/a
#   group: transport
#   output_dimensions: [energietrager, scope]
#   input_datasets:
#   - id: gpc/potsdam_master_plan_actions
#     tags: [baseline]
#     forecast_from: 2025
#     column: energy
#     filters:
#     - column: sector
#       value: ii12
#   output_nodes: [transport_electricity_consumption]

# - id: ii12_onroad_transport_grid_energy_emission_factor_action
#   name: Strom aus erneuerbaren Energien für ÖPNV und Elektromobilität
#   name_en: Electricity from renewable energies for public transport and electromobility
#   description: Wie unter Maßnahme 2.2 beschrieben, sollte auch der Strombedarf der Mobilität soweit möglich aus lokalen Erneuerbaren Quellen gedeckt werden.
#   description_en: As described under measure 2.2, the electricity demand for mobility should also be covered from local renewable sources as much as possible.
#   type: simple.GenericAction
#   quantity: emission_factor
#   unit: t/MWh
#   group: transport
#   output_dimensions: [energietrager, ghg, scope]
#   input_datasets:
#   - id: gpc/potsdam_master_plan_actions
#     tags: [baseline]
#     forecast_from: 2025
#     column: emission_factor
#     filters:
#     - column: sector
#       value: ii12
#   output_nodes: [transport_electricity_emission_factor]

pages:
- id: home
  name: Klimaschutz-Monitor Potsdam Treibhausgasinventar
  name_en: Climate Protection Monitor Potsdam Greenhouse Gas Inventory
  path: /
  type: emission
  outcome_node: net_emissions
  lead_title: Potsdam Zielwerte Klimaschutz
  lead_paragraph: Die Treibhausgasemissionen in Potsdam sinken kontinuierlich, 
    pro Kopf relativ deutlich. In der Vergangenheit konnten die Minderungsziele 
    weitgehend erreicht werden. Die hier abgebildeten Ziele des Masterplan 100% 
    Klimaschutz sind jedoch noch ambitionierter als die bisherigen. Der 
    Ausschlag nach unten im Jahr 2020 dürfte auf die Maßnahmen zur 
    Covid19-Pandemie zurückzuführen sein.

scenarios:

- id: baseline
  name: Business as Usual
  # name_en: Business as Usual

- id: default
  default: true
  name: Klimaschutzplan
  # name_en: Climate Protection Plan
  params:
  # New actions on
  - id: district_heating_until_2030.enabled
    value: true
  - id: district_heating_2030_2045.enabled
    value: false
  - id: re_expansion_masterplan_2045.enabled
    value: true
  - id: re_expansion_masterplan_kwp.enabled
    value: true
  - id: district_heating_kwp_expansion_areas.enabled
    value: true
  - id: district_heating_kwp_test_areas.enabled
    value: true
  - id: decentralized_heat_reduction_replacement.enabled
    value: true
  - id: decentralized_heat_reduction_renovation.enabled
    value: true
  - id: pv_rooftop_expansion.enabled
    value: true
  - id: ground_mounted_pv_expansion.enabled
    value: true
  - id: wind_power_potential.enabled
    value: true
  - id: electricity_consumption_reduction.enabled
    value: true
  - id: improved_federal_grid_mix.enabled
    value: true
  - id: re_electricity_emobility.enabled
    value: false
  - id: fossil_fuel_replacement.enabled
    value: true
  - id: local_transport_energy_reduction.enabled
    value: true
  # Old actions off
  # - id: i11_residential_fuel_consumption_action.enabled
  #   value: false
  # - id: i11_residential_fuel_emission_factor_action.enabled
  #   value: false
  # - id: i12_residential_grid_energy_consumption_action.enabled
  #   value: false
  # - id: i12_residential_grid_energy_emission_factor_action.enabled
  #   value: false
  # - id: i42_energy_grid_energy_consumption_action.enabled
  #   value: false
  # - id: i42_energy_grid_energy_emission_factor_action.enabled
  #   value: false
  # - id: ii11_onroad_transport_fuel_consumption_action.enabled
  #   value: false
  # - id: ii11_onroad_transport_fuel_emission_factor_action.enabled
  #   value: false
  # - id: ii12_onroad_transport_grid_energy_consumption_action.enabled
  #   value: false
  # - id: ii12_onroad_transport_grid_energy_emission_factor_action.enabled
  #   value: false

# - id: old_action_plan
#   default: false
#   name: Alte Klimaschutzplan
#   # name_en: Old Climate Protection Plan
#   params:
#   # New actions off
#   - id: district_heating_until_2030.enabled
#     value: false
#   - id: district_heating_2030_2045.enabled
#     value: false
#   - id: re_expansion_masterplan_2045.enabled
#     value: false
#   - id: re_expansion_masterplan_kwp.enabled
#     value: false
#   - id: district_heating_kwp_expansion_areas.enabled
#     value: false
#   - id: district_heating_kwp_test_areas.enabled
#     value: false
#   - id: decentralized_heat_reduction_replacement.enabled
#     value: false
#   - id: decentralized_heat_reduction_renovation.enabled
#     value: false
#   - id: pv_rooftop_expansion.enabled
#     value: false
#   - id: ground_mounted_pv_expansion.enabled
#     value: false
#   - id: wind_power_potential.enabled
#     value: false
#   - id: electricity_consumption_reduction.enabled
#     value: false
#   - id: improved_federal_grid_mix.enabled
#     value: false
#   - id: re_electricity_emobility.enabled
#     value: false
#   - id: fossil_fuel_replacement.enabled
#     value: false
#   - id: local_transport_energy_reduction.enabled
#     value: false
#   # Old actions on
#   - id: i11_residential_fuel_consumption_action.enabled
#     value: true
#   - id: i11_residential_fuel_emission_factor_action.enabled
#     value: true
#   - id: i12_residential_grid_energy_consumption_action.enabled
#     value: true
#   - id: i12_residential_grid_energy_emission_factor_action.enabled
#     value: true
#   - id: i42_energy_grid_energy_consumption_action.enabled
#     value: true
#   - id: i42_energy_grid_energy_emission_factor_action.enabled
#     value: true
#   - id: ii11_onroad_transport_fuel_consumption_action.enabled
#     value: true
#   - id: ii11_onroad_transport_fuel_emission_factor_action.enabled
#     value: true
#   - id: ii12_onroad_transport_grid_energy_consumption_action.enabled
#     value: true
#   - id: ii12_onroad_transport_grid_energy_emission_factor_action.enabled
#     value: true
