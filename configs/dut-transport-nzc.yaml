id: dut-transport-nzc
default_language: fi
supported_languages: [en]
site_url: https://dut-transport-nzc.paths.kausal.tech
dataset_repo:
  url: https://github.com/kausaltech/dvctest.git
  dvc_remote: kausal-s3
  commit: 8f2c9e0f2bb1cde5b63098688d1bc02faa197bfb
theme_identifier: default
name: 'DUT: Liikennetoimenpiteitä terveys- ja ilmastohyötyjen edistämiseksi'
name_en: 'DUT: Transport actions to promote health and climate benefits'
owner: Kausal Oy
owner_en: Kausal Ltd
emission_unit: kt/a
target_year: 2030
model_end_year: 2045
reference_year: 2022
minimum_historical_year: 2022
maximum_historical_year: 2022
emission_forecast_from: 2023
emission_dimensions: [scope, ghg, sector]
features:
  baseline_visible_in_graphs: true
  show_significant_digits: 4
  maximum_fraction_digits: 2
  hide_node_details: false

include:

- file: modules/dut_transport_actions.yaml
  node_group: DUT Transport Actions
  allow_override: true
- file: modules/health.yaml
  node_group: health
  allow_override: true
- file: nzc/transport.yaml
  node_group: Transport
  allow_override: true
- file: nzc/transport_cost.yaml # Adjust nodes, this should not be needed.
  node_group: Transport cost
  allow_override: true
- file: nzc/transport_health_cost.yaml
  node_group: Transport health
  allow_override: true
- file: nzc/freight_transport.yaml
  node_group: Freight transport
  allow_override: true
- file: nzc/electricity.yaml
  node_group: Electricity
  allow_override: true

params:
- id: municipality_name
  value: Finland
- id: discount_rate
  label: Discount rate
  value: 3.5
  min_value: 0
  max_value: 5
  unit: '%'
  is_visible: true
  is_customizable: false
- id: show_scenario_impacts
  label: Show scenario impacts instead of node outputs?
  value: false
  is_visible: false
  is_customizable: true
- id: statistical_correction
  label_en: Statistical correction
  label_fi: Tilastollinen korjaus
  value: true
  is_visible: false
  is_customizable: true
- id: measure_data_override
  value: false
  is_visible: false
  is_customizable: false
- id: measure_data_baseline_year_only
  value: false
  is_visible: false
  is_customizable: false
- id: population_size
  label_en: Population size in the city of interest
  label_fi: Väestön koko tarkasteltavassa kaupungissa
  is_visible: true
  is_customizable: true
  value: 250000
  min_value: 50000
  max_value: 685000
  step: 1000
  unit: dimensionless

action_groups:
- id: promoting_active_mobility
  name: Aktiivisen liikkumisen edistäminen
  name_en: Promoting active mobility
  color: 66c2a5
- id: promoting_systemic_public_transport
  name: Joukkoliikennejärjestelmän edistäminen
  name_en: Promoting systemic public transport
  color: '#fc8d62'
- id: limiting_cars
  name: Autoliikenteen rajoittaminen
  name_en: Limiting passenger cars
  color: '#8da0cb'
- id: electrification
  name: Sähköistäminen
  name_en: Electrification
  color: '#e78ac3'
- id: nzp_limiting_cars
  name: Autoliikenteen rajoittaminen (NetZeroPlanner-työkalusta)
  name_en: Limiting passenger cars (from NetZeroPlanner)
  color: '#a6d854'
- id: nzp_electrification
  name: Sähköistäminen (NetZeroPlanner-työkalusta)
  name_en: Electrification (from NetZeroPlanner)
  color: '#ffd92f'

impact_overviews:

- graph_type: cost_benefit
  cost_node: discounted_health_benefits
  effect_node: discounted_health_benefits
  # effect_unit: MEUR
  indicator_unit: MEUR
  stakeholder_dimension: stakeholder
  outcome_dimension: cost_type
  label_fi: Terveyshyödyt ja -haitat
  label_en: Health benefits and harms

dimensions:

- id: response
  label_fi: Terveysvaikutus
  label_en: Response
  aliases: [outcome]
  categories:
  - id: mortality
    label_fi: Kaikki ilmansaastealtistus
    label_en: All air pollution exposure
    color: '#a6cee3'
  - id: work_days_lost
    label_fi: Menetetyt työpäivät
    label_en: Work days lost
    color: '#1f78b4'
  - id: chronic_bronchitis
    label_fi: Keuhkoahtaumatauti
    label_en: Chronic bronchitis
  - id: cancer
    label_fi: Syöpä
    label_en: Cancer
  - id: tolerable_weekly_intake
    label_fi: Siedettävä viikkosaanti
    label_en: Tolerable weekly intake
  - id: chd_mortality
    label_fi: Sepelvaltimotautikuolleisuus
    label_en: Coronary heart disease mortality
  - id: breast_cancer
    label_fi: Rintasyöpä
    label_en: Breast cancer
  - id: deficiency  # TODO Add causative agent to response
    label_fi: Puutos
    label_en: Deficiency
  - id: infection  # TODO Add causative agent to response
    label_fi: Infektio
    label_en: Infection
  - id: physical_activity
    label: Fyysinen aktiivisuus
    label_en: Physical activity
    color: '#b2df8a'
  - id: air_pollution
    label: Ilmansaastealtistus liikenteessä
    label_en: Air pollution exposure in traffic
    color: '#33a02c'
  - id: crash_risk
    label: Liikenneonnettomuus
    label_en: Traffic accidents
    color: '#fb9a99'
  - id: noise
    label_en: Noise
    label_fi: Melu
  - id: carbon_emissions
    label: Hiilidioksidipäästöt
    label_en: CO2 emissions
  - id: nzp_response
    label: NZP-vaste
    color: '#e31a1c'

- id: pollutant
  label_fi: Saaste
  label_en: Pollutant
  categories:
  - id: co2
    label_fi: CO2
    label_en: CO2
    aliases: [co2e]
  - id: pm25
    label_fi: PM2.5
    label_en: PM2.5
    aliases: [pm2_5]
  - id: pm25_combustion
    label_en: PM2.5 combustion
    label_fi: Polttoperäinen PM2.5
  - id: nox
    label_fi: NOx
    label_en: NOx
  - id: pm10
    label_fi: PM10
    label_en: PM10
  - id: pm10_combustion
    label_en: PM10 combustion
    label_fi: Polttoperäinen PM10
  - id: walking
    label_fi: Kävely
    label_en: Walking
  - id: cycling
    label_fi: Pyöräily
    label_en: Cycling
  - id: pm1025
    label_fi: PM10-PM2.5
    label_en: PM10-PM2.5
  - id: so2
    label_fi: SO2
    label_en: SO2
  - id: nh3
    label_fi: NH3
    label_en: NH3
  - id: pm25_wear_tear
    label_en: PM2.5 wear & tear
    label_fi: Kulumis- ja pölyperäinen PM2.5
  - id: pm10_wear_tear
    label_en: PM10 wear & tear
    label_fi: Kulumis- ja pölyperäinen PM10

- id: sector
  label_en: Sector
  label_fi: Sektori
  help_text_en: Sectors as categorised in the Mission City Climate City Contracts
    (CCC).
  help_text_fi: Luokitteluna on käytetty Missio-kaupunkien Climate City Contractia
    (CCC).
  categories:
  - id: transport
    label_en: Transport
    label_fi: Liikenne
  - id: buildings
    label_en: Buildings & Heating
    label_fi: Rakennukset ja lämmitys
  - id: electricity
    label_en: Electricity
    label_fi: Sähkö
  - id: waste
    label_en: Waste
    label_fi: Jätteet
  - id: other
    label_en: Other (incl. IPPU & AFOLU)
    label_fi: Muut (sis. IPPU, AFOLU)

- id: scope
  label: Scope
  help_text: '1: Local emissions. 2: Grid emissions (electricity, district heating).
    3: Indirect emissions.'
  categories:
  - id: scope1
    label: Scope 1
    aliases: [scope_1]
  - id: scope2
    label: Scope 2
    aliases: [scope_2]
  - id: scope3
    label: Scope 3
    aliases: [scope_3]

- id: cost_type
  label_en: Cost Type
  label_fi: Kustannustyyppi
  categories:
  - id: energy_costs
    label_en: Energy Costs
    label_fi: Energiakustannukset
  - id: investment_costs
    label_en: Investment Costs
    label_fi: Investointikustannukset
  - id: capex
    label_en: CAPEX (capital expenditure)
    label_fi: CAPEX (pääomamenot)
  - id: capex_levelised
    label_en: CAPEX (levelised)
    label_fi: CAPEX (tasoitettu)
  - id: opex
    label_en: OPEX (operational expenditure)
    label_fi: OPEX (toimintamenot)
    aliases: [operation_cost, Operation Cost]
  - id: maintenance_costs
    label_en: Maintenance Costs
    label_fi: Huoltokustannukset
    aliases: [maintenance]
  - id: sales
    label_en: Sales income
    label_fi: Myyntitulot
  - id: air_pollution
    label_en: Air pollution in traffic
    label_fi: Ilmansaasteet liikenteessä
    aliases: [air_quality]
  - id: air_pollution_everywhere
    label_en: Air pollution everywhere
    label_fi: Kaikki ilmansaastekuolleisuus
  - id: noise
    label_en: Noise
    label_fi: Melu
  - id: accidents
    label_en: Accidents
    label_fi: Onnettomuudet
  - id: physical_activity
    aliases: [health]
    label_en: Health by physical activity
    label_fi: Terveys fyysisestä aktiivisuudesta
  - id: work_days_lost
    label_fi: Menetetyt työpäivät
    label_en: Work days lost
  - id: co2_cost
    label_en: CO2 Cost
    label_fi: CO2-kustannus
  - id: aesthetics
    label_en: Aesthetics and amenity
    label_fi: Estetiikka ja mukavuus
  - id: shading
    label_en: Shading
    label_fi: Varjostus
  - id: water_regulation
    label_en: Water regulation
    label_fi: Vedensäätely
    aliases: [water_regulations]
  - id: forest_management
    label_en: Forest management
    label_fi: Metsänhoito
  - id: bus_costs
    label_en: Bus costs
    label_fi: Bussikustannukset
  - id: homecharging_infrastructure
    label_en: Home-charging infrastructure
    label_fi: Kotilatausinfrastruktuuri
  - id: public_and_workplace_infrastructure
    label_en: Public & workplace infrastructure
    label_fi: Julkinen ja työpaikkainfrastruktuuri
  - id: charging_infrastructure_costs
    label_en: Charging infrastructure costs
    label_fi: Latausinfrastruktuurin kustannukset
  - id: vehicle_costs
    label_en: Vehicle costs
    label_fi: Ajoneuvokustannukset
  - id: infrastructure_costs
    label_en: Infrastructure costs
    label_fi: Infrastruktuurikustannukset
  - id: network
    label_en: Network
    label_fi: Verkko
  - id: fuel
    label_en: Fuel costs
    label_fi: Polttoainekustannukset
  - id: tires
    label_en: Tire costs
    label_fi: Rengaskustannukset
  - id: depreciation
    label_en: Depreciation costs
    label_fi: Poistokustannukset
  - id: labour_costs
    label_en: Labour costs
    label_fi: Työvoimakustannukset
  - id: industry_ippu
    label_en: Industry (IPPU)
    label_fi: Teollisuus (IPPU)
  - id: agriculture_afolu
    label_en: Agriculture (AFOLU)
    label_fi: Maatalous (AFOLU)
  - id: other_sources
    label_en: Other sources
    label_fi: Muut lähteet
  - id: grid_stability
    label_en: Storage, grid stability etc.
    label_fi: Varastointi, verkon vakaus jne.

- id: aggregated_cost_type
  label_en: Aggregated cost type
  label_fi: Koottu kustannustyyppi
  categories:
  - id: capex
    label_en: CAPEX
    label_fi: CAPEX
  - id: opex
    label_en: OPEX
    label_fi: OPEX
  - id: co_benefits
    label_en: Co-benefits
    label_fi: Rinnakkaishyödyt
  - id: co2_cost
    label_en: CO2 cost
    label_fi: CO2-kustannus

- id: ghg
  label_en: Greenhouse gas
  label_fi: Kasvihuonekaasu
  categories:
  - id: co2e
    label_en: CO2e
    label_fi: CO2e
    aliases: [co2]

- id: transport_mode
  label_en: Transport mode
  label_fi: Kuljetusmuoto
  categories:
  - id: cars
    aliases: [henkiloauto]
    label_en: Cars
    label_fi: Autot
  - id: buses
    aliases: [bussi]
    label_en: Buses
    label_fi: Bussit
  - id: trains
    label_en: Trains
    label_fi: Junat
    aliases: [Metro/tram, metro/tram, metro_tram, raide]
  - id: public_transport
    label_en: Public transport
    label_fi: Joukkoliikenne
  - id: walking
    aliases: [jalankulku]
    label_en: Walking
    label_fi: Kävely
  - id: cycling
    aliases: [pyoraliikenne]
    label_en: Cycling
    label_fi: Pyöräily
  - id: light_trucks
    label_en: Light duty trucks <3.5 tonne
    label_fi: Kevyet kuorma-autot <3,5 tonnia
  - id: heavy_trucks
    label_en: Heavy duty trucks >3.5 tonne
    label_fi: Raskaat kuorma-autot >3,5 tonnia
  - id: trucks
    label_en: Trucks
    label_fi: Kuorma-autot
  - id: other_motorized
    label_en: Other motorized transport
    label_fi: Muu moottoroitu liikenne
  - id: bikeshare
    label_en: Bikeshare
    label_fi: Kaupunkipyörät
  - id: ebike
    label_en: E-bike
    label_fi: Sähköpyörä
  - id: other
    aliases: [muu]
    label_fi: Muu
    label_en: Other
  - id: total
    aliases: [yhteensä]
    label_fi: Yhteensä
    label_en: Total

- id: energy_carrier
  label_en: Energy carrier
  label_fi: Energiamuoto
  categories:
  - id: petrol_diesel
    label_en: Petrol and diesel
    label_fi: Bensiini ja diesel
  - id: electricity
    label_en: Electricity
    label_fi: Sähkö
  - id: fossil
    label_en: Fossil (oil, coal, gas)
    label_fi: Fossiiliset (öljy, hiili, kaasu)
  - id: heat_pump
    label_en: Electric heat pumps / geothermal
    label_fi: Sähkölämpöpumput / maalämpö
  - id: bioenergy
    label_en: Bio (biogas, biomass) and solar heaters
    label_fi: Bio (biokaasu, biomassa) ja aurinkolämmittimet
  - id: waste
    label_en: Waste (fossil & non-fossil waste)
    label_fi: Jäte (fossiilinen ja ei-fossiilinen jäte)

- id: building_energy_class
  label: Building energy class
  categories:
  - id: new_standard
    label: New, standard
  - id: new_top_performance
    label: New, top performance
  - id: old_no_renovations
    label: Old, no renovation
  - id: minor_renovation
    aliases: [minor_renovations]
    label: Old, minor heating renovation
  - id: major_renovation
    aliases: [major_renovations]
    label: Old, extensive heating renovation
  - id: no_improvement  # TODO Remove redundant
    label: No improvement
  - id: minor_improvements
    label: Minor improvements
  - id: aggressive_improvements
    label: Aggressive improvements
  - id: moderate_improvements
    label: Moderate improvements
  - id: nzeb
    label: Net zero emission buildings
  - id: moderate_renovation
    aliases: [moderate_renovations]
    label: Moderate renovation

- id: heating_type
  label: Heating type
  categories:
  - id: district_heating
    label: District heating
  - id: local_heating
    label: Local heating

- id: fuel_type
  label_en: Fuel type
  label_fi: Polttoainetyyppi
  categories:
  - id: fossil
    label_en: Fossil
    label_fi: Fossiilinen
  - id: non_fossil
    label_en: Non-fossil
    label_fi: Ei-fossiilinen
    aliases: [nonfossil, non-fossil]
  - id: mixed
    label_en: Mixed fossil and non-fossil
    label_fi: Sekoitettu fossiilinen ja ei-fossiilinen
  - id: other
    label_en: Other (e.g. nuclear)
    label_fi: Muu (esim. ydinvoima)
  - id: local_pv
    label_en: Local photovoltaics
    label_fi: Paikalliset aurinkopaneelit
  - id: centralised_pv
    label_en: Centralised photovoltaics and wind
    label_fi: Keskitetyt aurinkopaneelit ja tuulivoima
  - id: pv
    label_en: Photovoltaics
    label_fi: Aurinkopaneelit
  - id: flexibility
    label_en: Flexibility
    label_fi: Joustavuus
  - id: direct_electricity
    label_en: Direct electricity
    label_fi: Suora sähkö
  - id: heat_pump
    label_en: Heat pump
    label_fi: Lämpöpumppu

- id: efficiency_programme
  label_en: Energy efficiency programme
  label_fi: Energiatehokkuusohjelma
  categories:
  - id: no_improvements
    label_en: No improvements
    label_fi: Ei parannuksia
    aliases: [no_improvement]
  - id: minor_improvements
    label_en: Minor improvements
    label_fi: Pieniä parannuksia
  - id: aggressive_improvements
    label_en: Aggressive improvements
    label_fi: Aggressiivisia parannuksia
  - id: moderate_improvements
    label_en: Moderate improvements
    label_fi: Kohtalaisia parannuksia
  - id: nzeb
    label_en: Net zero emission buildings
    label_fi: Nollapäästörakennukset

- id: city_area
  label_en: City area
  label_fi: Kaupunkialue
  categories:
  - id: grey
    label_en: Grey area
    label_fi: Harmaa alue
  - id: green
    label_en: Green area
    label_fi: Vihreä alue
  - id: grey_inside
    label_en: Grey area inside city
    label_fi: Harmaa alue kaupungin sisällä
  - id: green_inside
    label_en: Green area inside city
    label_fi: Vihreä alue kaupungin sisällä
  - id: green_outside
    label_en: Green area outside city
    label_fi: Vihreä alue kaupungin ulkopuolella
  - id: grey_outside
    label_en: Grey area outside city
    label_fi: Harmaa alue kaupungin ulkopuolella

- id: area_distance
  label_en: Area distance
  label_fi: Alueen etäisyys
  categories:
  - id: metropolitan
    label_en: Metropolitan
    label_fi: Suurkaupunki
  - id: inside
    label_en: Inside city
    label_fi: Kaupungin sisällä
  - id: outside
    label_en: Outside city
    label_fi: Kaupungin ulkopuolella
  - id: average
    label_en: Average
    label_fi: Keskimääräinen

- id: stakeholder
  label_en: Stakeholder
  label_fi: Sidosryhmä
  categories:
  - id: citizens
    label_en: Citizens
    label_fi: Kansalaiset
  - id: property_owners
    label_en: Property owners
    label_fi: Kiinteistönomistajat
  - id: city
    label_en: City
    label_fi: Kaupunki
    aliases: [cities, Cities]
  - id: healthcare_providers
    label_en: Healthcare providers
    label_fi: Terveydenhuollon tarjoajat
  - id: transport_operators
    label_en: Transport operators
    label_fi: Liikenneoperaattorit
  - id: utilities
    label_en: Utilities
    label_fi: Julkiset palvelut

- id: parameter
  label_en: Parameter
  label_fi: Parametri
  categories:
  - id: max_impact
    label_en: Maximum impact
    label_fi: Suurin vaikutus
  - id: max_year
    label_en: Year to reach maximum impact
    label_fi: Vuosi, jolloin suurin vaikutus
  - id: baseline_scenario
    label_en: Baseline scenario
    label_fi: Perusskenaario
  - id: decarbonisation_scenario
    label_en: Decarbonisation scenario
    label_fi: Hiilestä irtautumisen skenaario
  - id: frozen_scenario
    label_en: Frozen scenario
    label_fi: Jäädytetty skenaario

- id: country
  label: Country
  categories:
  - id: at
    label: Austria
  - id: be
    label: Belgium
  - id: cz
    label: Czeck Republic
  - id: dk
    label: Denmark
  - id: fr
    label: France
  - id: de
    label: Germany
  - id: it
    label: Italy
  - id: lt
    label: Latvia
  # - id: 'no'
  #   label: Norway
  - id: pl
    label: Poland
  - id: ro
    label: Romania
  - id: sk
    label: Slovakia
  - id: es
    label: Spain
  - id: se
    label: Sweden
  - id: average
    label: Average

- id: age
  label: age
  categories:
  - id: '20_49'
    label: 20-49
    aliases: ['2049']
  - id: '50_64'
    label: 50-64
    aliases: ['5064']
  - id: '65_79'
    label: 65-79
    aliases: ['6579']
  - id: '80_99'
    label: 80-99
    aliases: ['8099']

- id: subgroup
  label: Population subgroup
  categories:
  - id: toddlers
    label: Toddlers (always with an adult)
  - id: children
    label: Children (can walk and cycle alone)
  - id: adults_without_car
    label: Adults without own car
  - id: adults_with_car
    label: Adults with a car in their control
  - id: people_that_need_support
    label: People that need support in moving
  - id: unclassified
    label: Unclassified

- id: trip_length
  label: Trip length
  categories:
  - id: short
    label: Short (<2 km, easy to walk)
  - id: medium
    label: Medium (< 6 km, easy to cycle)
  - id: long
    label: Long (> 6 km)
  - id: unclassified
    label: Unclassified

- id: service_level
  label: Transport service level (fabrics)
  categories:
  - id: walking_city
    label: Walking city
  - id: public_transport_city
    label: Public transport city
  - id: car_city
    label: Car city
  - id: unclassified
    label: Unclassified

- id: activity_period
  label: Activity period
  categories:
  - id: rush_hours
    label: Rush hourd (07-09, 14-18)
  - id: silent_hours
    label: Silent hours (21-06)
  - id: average_hours
    label: Average hours (all others)
  - id: unclassified
    label: Unclassified

emission_sectors:
- id: net_emissions
  name_fi: Kokonaispäästöt (scope 1+2)
  name_en: Net emissions (scope 1+2)
  description_fi: Kasvihuonekaasujen kokonaispäästöt liikenteen osalta
  description_en: Total greenhouse gas emissions from transport
  type: simple.AdditiveNode
  is_outcome: true

nodes:

- id: technical_root_node
  name: Technical root node
  description: This node is used as the outcome node of ParentActionNodes so that
    they don't pick a random root node from the model.
  type: simple.AdditiveNode
  quantity: fraction
  unit: m**3
  historical_values: [[2018, 0.0], [2023, 0.0]]

- id: population
  name_fi: Väestön koko tarkasteltavassa kunnassa
  name_en: Population size in the city of interest
  description: Data Tilastokeskuksen <a 
    href='https://pxdata.stat.fi/PxWeb/pxweb/fi/StatFin/StatFin__vaerak/'>väestöennusteesta</a>.
  description_en: Data from Statiscitcs Finland <a href='https://pxdata.stat.fi/PxWeb/pxweb/fi/StatFin/StatFin__vaerak/'>population
    forecast</a>.
  type: simple.AdditiveNode
  quantity: population
  unit: cap
  historical_values: [[2018, 1], [2025, 1]]
  input_dataset_processors: [LinearInterpolation]
  params:
  - id: multiplier
    ref: population_size
  # input_datasets:
  # - id: gpc/dut_transport_nzc
  #   forecast_from: 2025
  # params:
  #   sector: Population

- id: average_trip_length
  name_en: Average trip length
  name_fi: Keskimääräinen matkan pituus
  type: gpc.DatasetNode
  quantity: factor
  unit: pkm/trip
  input_datasets:
  - id: gpc/dut_transport_nzc
  input_dimensions: [transport_mode]
  output_dimensions: [transport_mode]
  params:
    sector: Average trip length by type

- id: passenger_trips_data
  name_en: Passenger trips data
  name_fi: Matkaluvun data
  type: gpc.DatasetNode
  quantity: activity
  unit: trips/cap/d
  input_datasets:
  - id: gpc/dut_transport_nzc
    forecast_from: 2025
  input_dimensions: [transport_mode]
  output_dimensions: [transport_mode]
  params:
    sector: Average Finnish trips by type

- id: passenger_kilometres_data
  name_en: Passenger kilometres data
  name_fi: Matkakilometrien data
  type: simple.MultiplicativeNode
  quantity: activity
  unit: Mpkm/a
  input_dimensions: [transport_mode]
  output_dimensions: [transport_mode]
  input_nodes:
  - id: passenger_trips
  - id: population
    to_dimensions: []
  - id: average_trip_length

- id: passenger_kilometres
  name_en: Passenger kilometres
  name_fi: Henkilökilometrit
  type: simple.AdditiveNode
  quantity: mileage
  unit: Mpkm/a
  input_dimensions: [transport_mode]
  output_dimensions: [transport_mode]
  input_nodes:
  - id: passenger_kilometres_data
  - id: passenger_kilometres_reduced
  - id: passenger_kilometres_switched

- id: cycling_unit_price
  name_en: Cycling unit price
  name_fi: Pyöräilyn yksikköhinta
  type: simple.AdditiveNode
  quantity: unit_price
  unit: EUR/pkm
  input_dimensions: [transport_mode, cost_type]
  output_dimensions: [transport_mode, cost_type]
  input_nodes:
  - id: walking_cycling_unit_price1
    from_dimensions:
    - id: transport_mode
      categories: [walking] # In NZP, also contains cycling
      flatten: true
    to_dimensions:
    - id: transport_mode
      categories: [cycling]
    - id: cost_type
  - id: walking_cycling_unit_price2
    from_dimensions:
    - id: transport_mode
      categories: [walking] # In NZP, also contains cycling
      flatten: true
    to_dimensions:
    - id: transport_mode
      categories: [cycling]
    - id: cost_type
  output_nodes:
  - id: walking_cycling_unit_price

# ------------- Freight transport ----------

- id: freight_transport_need
  name_en: Freight transport need
  name_fi: Rahtiliikenteen tarve
  type: gpc.DatasetNode
  quantity: freight_mileage
  unit: Mtkm/a
  input_dimensions: [transport_mode]
  output_dimensions: [transport_mode]
  input_datasets: [gpc/dut_transport_nzc]
  input_nodes:
  - id: population
    tags: [non_additive]
    to_dimensions: []
  params:
    sector: Total transportation need within city - Road freight transport
    drop_nulls: true

# ------------- Electricity ----------

- id: historical_electricity_consumption # TODO Use inner join for multiplication; then drop_nulls is not needed.
  name_en: Historical electricity consumption
  name_fi: Historiallinen sähkönkulutus
  type: gpc.DatasetNode
  quantity: energy
  unit: GWh/a
  input_dimensions: [energy_carrier]
  output_dimensions: [energy_carrier]
  input_datasets:
  - id: nzc/defaults
  input_nodes:
  - id: population
    tags: [ratio_to_last_historical_value, non_additive]
    to_dimensions: []
  params:
    sector: Total electricity demand within city boundaries
    drop_nulls: true

# ------------- Jobs -----------------

- id: total_jobs_created
  name_fi: Syntyneiden työpaikkojen määrä
  name_En: Total jobs created
  type: simple.AdditiveNode
  quantity: employment
  unit: jobs

# ------------- Costs ----------------

- id: co2_unit_price
  name_fi: Hiilidioksidin yksikköhinta
  name: CO2 unit price
  type: gpc.DatasetNode
  quantity: unit_price
  unit: EUR/t
  input_dimensions: [cost_type, ghg]
  output_dimensions: [cost_type, ghg]
  input_datasets: [nzc/defaults]
  params:
    sector: Value of CO2 reduction

- id: co2_emissions_cost
  name_fi: CO2-päästön kustannus
  name_en: CO2 emissions cost
  type: simple.MultiplicativeNode
  quantity: currency
  unit: MEUR/a
  input_dimensions: [stakeholder, cost_type]
  output_dimensions: [stakeholder, cost_type]
  input_nodes:
  - id: co2_unit_price
    from_dimensions:
    - id: ghg
      flatten: true
    to_dimensions:
    - id: cost_type
    - id: stakeholder
      categories: [city]
  - id: net_emissions
    from_dimensions:
    - id: ghg
      flatten: true
    - id: scope
      flatten: true
    - id: sector
      flatten: true
    to_dimensions: []
  output_nodes:
  - id: total_cost
    to_dimensions:
    - id: cost_type
    - id: stakeholder
    - id: iteration
      categories: [nzp]

- id: transport_cost
  name_en: Transport cost
  name_fi: Liikenteen kustannukset
  type: simple.AdditiveNode
  quantity: currency
  unit: MEUR/a
  color: '#ffff33'
  input_dimensions: [stakeholder, transport_mode, cost_type]
  output_dimensions: [stakeholder, transport_mode, cost_type]
  output_nodes:
  - id: total_cost
    from_dimensions:
    - id: transport_mode
      flatten: true
    to_dimensions:
    - id: cost_type
    - id: stakeholder
    - id: iteration
      categories: [nzp]

- id: freight_transport_cost
  name_en: Freight transport cost
  name_fi: Rahtiliikenteen kustannukset
  type: simple.AdditiveNode
  quantity: currency
  unit: MEUR/a
  color: '#4daf4a'
  input_dimensions: [stakeholder, transport_mode, cost_type]
  output_dimensions: [stakeholder, transport_mode, cost_type]
  output_nodes:
  - id: total_cost
    from_dimensions:
    - id: transport_mode
      flatten: true
    to_dimensions:
    - id: cost_type
    - id: stakeholder
    - id: iteration
      categories: [nzp]

- id: electricity_cost
  name_en: Electricity cost
  name_fi: Sähkön kustannukset
  type: simple.AdditiveNode
  quantity: currency
  unit: MEUR/a
  color: '#377eb8'
  input_dimensions: [energy_carrier, cost_type, stakeholder]
  output_dimensions: [energy_carrier, cost_type, stakeholder]
  input_nodes:
  - id: renewable_electricity_investment_cost
    from_dimensions:
    - id: fuel_type
      flatten: true
  output_nodes:
  - id: total_cost
    from_dimensions:
    - id: energy_carrier
      flatten: true
    to_dimensions:
    - id: cost_type
    - id: stakeholder
    - id: iteration
      categories: [nzp]

- id: total_cost
  name_fi: Kokonaiskustannus
  name_en: Total cost
  type: simple.AdditiveNode
  quantity: currency
  unit: MEUR/a
  input_dimensions: [stakeholder, cost_type, iteration]
  output_dimensions: [stakeholder, cost_type, iteration]
  input_nodes:
  - id: health_costs_attributed_to_exposure
    from_dimensions:
    - id: response
      flatten: true
    to_dimensions:
    - id: cost_type
    - id: iteration
    - id: stakeholder
      categories: [citizens]

- id: aggregated_cost_types
  name_fi: Yhdistetyt kustannuslajit
  name_en: Aggregated cost types
  type: gpc.DatasetNode
  quantity: fraction
  unit: dimensionless
  input_dimensions: [cost_type, aggregated_cost_type]
  output_dimensions: [cost_type, aggregated_cost_type]
  input_datasets: [gpc/dut_transport_nzc]
  params:
    sector: Aggregated cost types

- id: aggregated_cost
  name_fi: Yhdistetyt kustannukset
  name_en: Aggregated cost
  type: simple.MultiplicativeNode
  quantity: currency
  unit: GEUR/a
  input_dimensions: [aggregated_cost_type, stakeholder, cost_type, iteration]
  output_dimensions: [aggregated_cost_type, stakeholder, cost_type, iteration]
  input_nodes:
  - id: total_cost
    tags: [non_additive, expectation]
    to_dimensions:
    - id: cost_type
    - id: stakeholder
    - id: iteration
  - id: aggregated_cost_types
    to_dimensions:
    - id: cost_type
    - id: aggregated_cost_type

- id: discounted_cost
  name_fi: Diskontatut kustannukset
  name_en: Discounted cost
  type: costs.ExponentialNode
  quantity: currency
  unit: MEUR/a
  is_outcome: true
  input_dimensions: [stakeholder, cost_type, aggregated_cost_type]
  output_dimensions: [stakeholder, cost_type, aggregated_cost_type]
  input_nodes:
  - id: aggregated_cost
    from_dimensions:
    - id: iteration
      flatten: true
  params:
  - id: annual_change
    ref: discount_rate
  - id: is_decreasing_rate
    value: true

- id: discounted_health_benefits
  name_fi: Diskontatut terveyshyödyt
  name_en: Discounted health benefits
  type: simple.AdditiveNode
  quantity: currency
  unit: MEUR/a
  is_outcome: true
  input_dimensions: [cost_type, stakeholder]
  output_dimensions: [cost_type, stakeholder]
  input_nodes:
  - id: discounted_cost
    from_dimensions:
    - id: aggregated_cost_type
      categories: [co_benefits]
      flatten: true

# - id: discounted_investment
#   name_fi: Diskontatut sijoitukset
#   name_en: Discounted investment
#   type: simple.AdditiveNode
#   quantity: currency
#   unit: MEUR/a
#   input_dimensions: [stakeholder, cost_type]
#   output_dimensions: [stakeholder, cost_type]
#   input_nodes:
#   - id: discounted_cost
#     from_dimensions:
#     - id: aggregated_cost_type
#       categories: [capex]
#       flatten: true
#     to_dimensions:
#     - id: stakeholder
#     - id: cost_type

- id: discounted_benefits
  name_fi: Diskontatut hyödyt
  name_en: Discounted benefits
  type: simple.AdditiveNode
  quantity: currency
  unit: MEUR/a
  is_outcome: true
  input_dimensions: [stakeholder, cost_type]
  output_dimensions: [stakeholder, cost_type]
  input_nodes:
  - id: discounted_cost
    from_dimensions:
    - id: aggregated_cost_type
      categories: [capex]
      exclude: true
      flatten: true
    to_dimensions:
    - id: stakeholder
    - id: cost_type

# ------------ City-specific nodes -----------

- id: road_transport_emissions_intermediate
  name_fi: Tieliikenteen CO2-päästöt
  name_en: CO2 emissions from road transport
  description_fi: Päämallin ja terveysmoduulin välissä oleva välisolmu, jossa summataan
    pois terveysmallissa tarpeettomat ulottuvuudet.
  description_en: Intermediate node between the main model and the health module.
    Unnecessary dimensions are summed up here.
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  input_nodes:
  - id: transport_emissions
    from_dimensions:
    - id: scope
      flatten: true
    - id: energy_carrier
      categories: [petrol_diesel]
      flatten: true
    - id: transport_mode
      flatten: true
    - id: ghg
      flatten: true
  - id: freight_transport_emissions
    from_dimensions:
    - id: transport_mode
      categories: [light_trucks]
      flatten: true
    - id: pollutant
      flatten: true
    - id: energy_carrier
      flatten: true
  historical_values: [[2020, 0]]
  output_nodes:
  - id: transport_air_pollution_emissions2
    tags: [non_additive]
    to_dimensions: []

- id: active_mobility_conversion  # TODO Fix units in dataset
  name: Aktiivisen liikkumisen muunnos
  type: simple.AdditiveNode
  quantity: exposure
  unit: passenger
  historical_values: [[2010, 1.0], [2023, 1.0]]
  input_dataset_processors: [LinearInterpolation]

- id: amount_of_active_mobility_by_nzc
  name: Aktiivisen liikkumisen määrä NZP:n mukaan
  description_fi: Aktiivisen liikkumisen tiedot, jotka perustuvat NetZeroPlanner-mallilla
    tuotettuun dataan. Katso myös solmu Aktiivisen liikkumisen määrä HLT:n mukaan.
  type: simple.MultiplicativeNode
  quantity: mileage
  unit: km/cap/d
  input_dimensions: [transport_mode]
  output_dimensions: [transport_mode]
  input_nodes:
  - id: passenger_kilometres
    from_dimensions:
    - id: transport_mode
      categories: [walking, cycling]
  - id: population
    tags: [geometric_inverse]
    to_dimensions: []
  - id: active_mobility_conversion
    tags: [geometric_inverse]
    to_dimensions: []
  output_nodes:
  - id: active_mobility_combined

# ----------------------- Active mobility ------------------

- id: population_group_sizes
  name: Population group sizes
  type: gpc.DatasetNode
  quantity: population
  unit: inh
  input_dimensions: [age]
  output_dimensions: [age]
  input_datasets:
  - id: hia/heat/lappeenranta_active_mobility
  params:
    sector: Population groups

- id: population_group_shares
  name: Väestöryhmien suhteet
  type: simple.AdditiveNode
  quantity: fraction
  unit: dimensionless
  input_dimensions: [age]
  output_dimensions: [age]
  input_nodes:
  - id: population_group_sizes
  params:
    share_dimension: age
    use_input_node_unit_when_adding: true

- id: active_mover_fraction
  name_fi: Aktiivisten liikkujien osuus ikäryhmästä
  name_en: Active mover fraction in each age group
  type: gpc.DatasetNode
  quantity: fraction
  unit: '%'
  input_dimensions: [age, transport_mode]
  output_dimensions: [age, transport_mode]
  input_datasets:
  - id: hia/heat/lappeenranta_active_mobility
  params:
    sector: Fraction of movers

- id: active_mover_distance
  name_fi: Aktiivisen liikkumisen määrä HLT:n mukaan
  name_en: Active mover distance
  description_fi: Aktiivisen liikkumisen määränä käytetään aktiivisten liikkujien
    keskimääräistä suomalaista arvoa, joka on saatu Henkilöliikennetutkimuksesta 2016.
    Laskenta on Lehtomäen työryhmän (2021) mukainen.<h3>Viitteet</h3>Heli Lehtomäki
    ym. 2021. Liikenteen terveysvaikutukset Suomessa ja suurimmissa kaupungeissa.
    Suomen ympäristökeskuksen raportteja 16 / 2021.
  type: gpc.DatasetNode
  quantity: mileage
  unit: km/person/d
  input_dimensions: [age, transport_mode]
  output_dimensions: [age, transport_mode]
  input_datasets:
  - id: hia/heat/lappeenranta_active_mobility
  params:
    sector: Moving distance

- id: active_mobility_by_hlt
  name_fi: Aktiivisen liikkumisen määrä ikäryhmissä
  name_en: Average active mobility in age groups
  description_fi: Tämä solmu kuvaa kyseisen väestöryhmän osuutta koko väestön liikkumisesta.
    Summaamalla osaväestöt yhteen saadaan koko väestön keskimääräinen liikkuminen.
  type: simple.MultiplicativeNode
  quantity: mileage
  unit: km/person/d
  input_dimensions: [transport_mode, age]
  output_dimensions: [transport_mode, age]
  input_nodes:
  - id: active_mover_fraction
  - id: active_mover_distance
    tags: [non_additive]
  - id: population_group_shares
    to_dimensions:
    - id: age
  output_nodes:
  - id: active_mobility_combined
    from_dimensions:
    - id: age
      flatten: true
    to_dimensions:
    - id: transport_mode

- id: active_trip_amount
  name_fi: Aktiivisten matkojen määrä
  name_en: Active trip amount
  type: simple.MultiplicativeNode
  quantity: mileage
  unit: trips/cap/d
  input_dimensions: [transport_mode]
  output_dimensions: [transport_mode]
  input_nodes:
  - id: active_mobility_by_hlt
    from_dimensions:
    - id: age
      flatten: true
  - id: average_trip_length
    tags: [geometric_inverse]
    to_dimensions:
    - id: transport_mode
  - id: trip_multiplier
    to_dimensions: []

- id: trip_multiplier
  name: Trip multiplier
  type: simple.AdditiveNode
  quantity: ratio
  unit: pkm/km
  historical_values: [[2020, 1]]

- id: active_mobility_combined
  name_fi: Aktiivisen liikkumisen yhdistelmä
  name_en: Combined active mobility
  description_fi: 'Tässä on yhdistetty kaksi tietolähdettä: toisaalta NetZeroCities-raportointi
    ja toisaalta Henkilöliikennetutkimus 2016. Tästä eteenpäin käytetään näiden lähteiden
    keskiarvoa.'
  type: simple.AdditiveNode
  quantity: mileage
  unit: km/person/d
  input_dimensions: [transport_mode]
  output_dimensions: [transport_mode]

- id: active_mobility_average
  name_fi: Aktiivisen liikkumisen keskiarvo
  name_en: Average active mobility
  description_fi: 'Tässä on yhdistetty kaksi tietolähdettä: toisaalta NetZeroCities-raportointi
    ja toisaalta Henkilöliikennetutkimus 2016. Tämä on näiden lähteiden keskiarvoa.
    Tämä solmu toimii myös välisolmuna terveysvaikutusmalliin.'
  type: simple.FixedMultiplierNode
  quantity: mileage
  unit: km/person/d
  input_dimensions: [transport_mode]
  output_dimensions: [transport_mode]
  input_nodes: [active_mobility_combined]
  output_nodes:
  - id: active_mobility_distance
  params:
  - id: multiplier
    is_customizable: true
    is_visible: true
    value: 0.5
    min_value: 0
    max_value: 1
    unit: dimensionless

- id: active_mobility_duration
  name_fi: Aktiivisen liikkumisen kesto
  name_en: Duration of active mobility
  description_fi: Keskimääräinen kesto, jonka väestö liikkuu aktiivilla kulkumuodoilla
    (kävely ja pyöräily).
  description_en: Average duration when the population moves by active modes (walking
    and cycling).
  type: simple.MultiplicativeNode
  quantity: exposure
  unit: min/person/d
  input_dimensions: [transport_mode]
  output_dimensions: [transport_mode]
  input_nodes:
  - id: amount_of_active_mobility_by_nzc
    to_dimensions:
    - id: transport_mode
  - id: active_mobility_speed
    tags: [geometric_inverse]
    to_dimensions:
    - id: transport_mode

# ------------- Effects from the other parts of the NZC model ---------

- id: fossil_plant_emissions
  name: Fossil plant emissions (placeholder)
  description: This model does not consider fossil plant emissions. This node is just
    for matching the necessary interfaces between modules.
  type: simple.AdditiveNode
  quantity: emissions
  unit: kt/a
  historical_values: [[2010, 0.0]]
  output_nodes:
  - id: fossil_plant_air_pollution_emissions
    tags: [non_additive]
    to_dimensions: []

pages:
- id: home
  name: DUT-liikenne- ja -päästöskenaario
  path: /
  type: emission
  outcome_node: net_emissions
  lead_title: DUT-liikenne- ja terveysskenaario (KOKEILUVERSIO)
  lead_title_en: DUT transport and health scenario (TEST VERSION)
  lead_paragraph_fi: DUT-hankkeessa kartoitetaan liikennetoimenpiteitä, joilla olisi
    myös terveydellisiä hyötyjä. Mallissa tarkastellaan keskimääräisten tietojen avulla
    suomalaiskaupunkia, jonka koko on oletuksena 250000 asukasta. Voit muuttaa
    kaupungin kokoa kohdasta Kaikki asetukset.
    <br/>Mallin tiedot on koottu asiantuntevista lähteistä, mutta niiden soveltuvuutta
    juuri sinua kiinnostavaan kaupunkiin ei voida varmistaa. Niinpä mallin antamiin
    tuloksiin tulee suhtautua suuntaa antavina. Toivottavasti ne kuitenkin auttavat
    pohtimaan terveyden merkitystä paikallistason liikennepolitiikassa.
    <br/>Tämä mallin on kehitetty hankkeessa, joka on osa EU:n Driving Urban Transitions (DUT)
    -ohjelmaa, ja sitä sponsoroivat Suomessa työ- ja elinkeinoministeriö sekä ympäristöministeriö.
    Hanketta koordinoi VTT ja mukana ovat Kausal Oy ja UKK-instituutti.<br/> Hankkeessa
    tuotettiin tämä testiversio mallista. Huomaa, että siinä on vielä virheitä ja
    puutteita, ja tuloksiin tulee suhtautua varauksella. Mallia kuitenkin kehitetään
    eteenpäin uusien hankkeiden voimin. Siksi olemme kiinnostuneet kaikista korjaus-
    ja parannusehdotuksista. Voit lähettää palautetta osoitteeseen support[at]kausal.tech.
  lead_paragraph_en: The DUT project maps transport measures that would also have health benefits. The model examines an average Finnish city with an assumed population of 250,000 using average data. You can change the city size in All settings.
    <br/>The model's data has been compiled from expert sources, but its applicability to the specific city you're interested in cannot be guaranteed. Therefore, the results provided by the model should be considered indicative. However, we hope they help in considering the importance of health in local transport policy.
    <br/>This model has been developed as part of the EU's Driving Urban Transitions (DUT) program in 2024, sponsored in Finland by the Ministry of Economic Affairs and Employment and the Ministry of the Environment. The project was coordinated by VTT with Kausal Oy and UKK Institute as partners.
    <b/>The project produced this test version of the model. Please note that it still contains errors and deficiencies, and results should be treated with caution. However, the model is being further developed through new projects. Therefore, we are interested in all suggestions for corrections and improvements. You can send feedback to support[at]kausal.tech.

scenarios:
- id: baseline
  name: Nykykehitys
  name_en: Baseline scenario
  params:
  - id: show_scenario_impacts
    value: false
  - id: statistical_correction
    value: false

- id: default
  default: true
  name: Aktiivinen toimenpideohjelma
  name_en: Action Plan
  all_actions_enabled: true
  params:
  - id: statistical_correction
    value: false
