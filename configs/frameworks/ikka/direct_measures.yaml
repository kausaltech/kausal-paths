# Data from https://drive.google.com/drive/u/0/folders/19UUut58R5ZZu4cAfETWz1f-npCFjVhUw
# Katalog für Maßnahmen und Instrumente im kommunalen Klimaschutz. Ifeu, Heidelberg, März 2025 (Version 2)

# ============================================
# IKKA DIRECT MEASURES - COMPLETE DEFINITION
# Based on: Section 3.1 (Tables 32-37)
# Version: 2.1 - Time Series Compatible
# ============================================

# ============================================
# DIRECT MEASURES - ELECTRICITY (Table 32)
# ============================================
direct_measures:

# ----- Electricity Generation -----
- id: DS1
  name_de: "Stromerzeugung – Photovoltaik"
  name_en: "Electricity Generation – Photovoltaics"
  description_de: "Installation von Photovoltaik-Dachanlagen auf kommunalen Gebäuden"
  description_en: "Installation of photovoltaic rooftop systems on municipal buildings"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: pv_generation_model
  
  intervention:
    description_de: "Direkte Installation von PV-Kapazität durch Kommune"
    description_en: "Direct installation of PV capacity by municipality"
    sets_variable: new_installations
    value_source: user_input
    input_id: capacity_kwp
    temporal_pattern:
      type: one_time
      note_de: "Kapazität einmalig hinzugefügt, erzeugt über Nutzungsdauer"
      note_en: "Capacity added once, generates for lifetime"
  
  adoption:
    type: direct_control
    factor: 1.0
    attribution: 1.0
  
  outputs:
    primary_reduction: operational_avoidance
    upstream_penalty: upstream_pv_production
    energy_generated: annual_electricity_generated
    
    derived:
    - id: climate_payback_years
      name_de: "Klimatische Amortisationszeit"
      name_en: "Climate payback period"
      formula: "cumsum(upstream_pv_production) / cumsum(operational_avoidance)"
      unit: years
      note_de: "Jahr, in dem kumulierte Vorteile kumulierte Kosten übersteigen"
      note_en: "Year when cumulative benefits exceed cumulative costs"
  
  user_inputs:
  - id: capacity_kwp
    label_de: "Installierte PV-Leistung"
    label_en: "Installed PV capacity"
    type: number
    unit: kWp
    required: true
    validation: {min: 0}
  
  - id: installation_year
    label_de: "Jahr der Installation"
    label_en: "Installation year"
    type: year
    required: true
  
  parameters_required:
  - irradiation
  - performance_ratio
  - ef_displacement
  - upstream_pv
  - lifetime_pv

- id: DS2
  name_de: "Stromerzeugung – Windkraft"
  name_en: "Electricity Generation – Wind Power"
  description_de: "Installation von Windkraftanlagen"
  description_en: "Installation of wind turbines"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: wind_generation_model
  
  intervention:
    description_de: "Direkte Investition der Kommune oder kommunales Stadtwerk"
    description_en: "Direct municipal investment or municipal utility"
    sets_variable: new_installations
    value_source: user_input
    input_id: capacity_kw
    temporal_pattern:
      type: one_time
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_avoidance
    upstream_penalty: upstream_wind_production
  
  user_inputs:
  - id: capacity_kw
    label_de: "Installierte Windkraftleistung"
    label_en: "Installed wind power capacity"
    type: number
    unit: kW
    required: true
    validation: {min: 0}
  
  - id: installation_year
    label_de: "Jahr der Installation"
    label_en: "Installation year"
    type: year
    required: true
  
  parameters_required:
  - full_load_hours_wind
  - ef_displacement
  - upstream_wind
  - lifetime_wind

- id: DS3
  name_de: "Stromerzeugung – Wasserkraft"
  name_en: "Electricity Generation – Hydropower"
  description_de: "Installation oder Modernisierung eines Wasserkraftwerks"
  description_en: "Installation or upgrade of hydropower plant"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: renewable_generation_generic_model
  
  intervention:
    description_de: "Installation oder Modernisierung von Wasserkraft"
    description_en: "Installation or upgrade of hydropower"
    sets_variable: new_installations
    value_source: user_input
    input_id: capacity_kw
    temporal_pattern:
      type: one_time
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_avoidance
    upstream_penalty: upstream_plant_production
  
  user_inputs:
  - id: capacity_kw
    label_de: "Installierte Wasserkraftleistung"
    label_en: "Installed hydropower capacity"
    type: number
    unit: kW
    required: true
  
  - id: installation_year
    label_de: "Jahr der Installation"
    label_en: "Installation year"
    type: year
    required: true
  
  parameters_required:
  - full_load_hours_hydro
  - ef_displacement
  - upstream_hydro
  - lifetime_hydro
  
  parameter_overrides:
  - full_load_hours: full_load_hours_hydro
  - upstream_plant: upstream_hydro
  - lifetime_plant: lifetime_hydro

- id: DS4
  name_de: "Stromerzeugung – Geothermie"
  name_en: "Electricity Generation – Geothermal"
  description_de: "Installation eines Geothermiekraftwerks"
  description_en: "Installation of geothermal power plant"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: renewable_generation_generic_model
  
  intervention:
    description_de: "Installation von Geothermie-Anlage"
    description_en: "Installation of geothermal plant"
    sets_variable: new_installations
    value_source: user_input
    input_id: capacity_kw
    temporal_pattern:
      type: one_time
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_avoidance
    upstream_penalty: upstream_plant_production
  
  user_inputs:
  - id: capacity_kw
    label_de: "Installierte Geothermieleistung"
    label_en: "Installed geothermal capacity"
    type: number
    unit: kW
    required: true
  
  - id: installation_year
    label_de: "Jahr der Installation"
    label_en: "Installation year"
    type: year
    required: true
  
  parameters_required:
  - full_load_hours_geothermal
  - ef_displacement
  - upstream_geothermal
  - lifetime_geothermal
  
  parameter_overrides:
  - full_load_hours: full_load_hours_geothermal
  - upstream_plant: upstream_geothermal
  - lifetime_plant: lifetime_geothermal

- id: DS5
  name_de: "Stromerzeugung Heizkraftwerke (inkl. KWK)"
  name_en: "Electricity Generation Combined Heat and Power Plants"
  description_de: "Installation oder Brennstoffumstellung eines KWK-Kraftwerks"
  description_en: "Installation or fuel conversion of CHP plant"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: chp_generation_model
  
  intervention:
    description_de: "Umstellung auf emissionsärmeren Brennstoff"
    description_en: "Switch to lower-emission fuel"
    sets_variable: fuel_type
    value_source: user_input
    input_id: fuel_type_new
    temporal_pattern:
      type: one_time
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_chp_emissions_electricity
    
    derived:
    - id: annual_ghg_reduction
      name_de: "Jährliche THG-Reduktion"
      name_en: "Annual GHG reduction"
      formula: "operational_chp_emissions_electricity[before] - operational_chp_emissions_electricity[after]"
      unit: tCO2e/year
      note_de: "Exergetisch dem Strom-Anteil zugeordnet"
      note_en: "Exergetically allocated to electricity portion"
  
  user_inputs:
  - id: electricity_output_kwh_year
    label_de: "Jährliche Stromerzeugung"
    label_en: "Annual electricity generation"
    type: number
    unit: kWh/year
    required: true
  
  - id: heat_output_kwh_year
    label_de: "Jährliche Wärmeerzeugung"
    label_en: "Annual heat generation"
    type: number
    unit: kWh/year
    required: true
  
  - id: fuel_type_before
    label_de: "Brennstofftyp vorher"
    label_en: "Fuel type before"
    type: choice
    choices: [natural_gas, biomass, biogas, waste]
  
  - id: fuel_type_after
    label_de: "Brennstofftyp nachher"
    label_en: "Fuel type after"
    type: choice
    choices: [natural_gas, biomass, biogas, waste]
  
  parameters_required:
  - efficiency_heat
  - efficiency_electricity
  - ef_fuel
  - exergy_electricity
  - exergy_heat

- id: DS6
  name_de: "Strombezug – Ökostrom"
  name_en: "Electricity Supply – Green Electricity"
  description_de: "Umstellung auf Ökostromtarif mit Zusätzlichkeitsgarantie"
  description_en: "Switch to green electricity tariff with additionality guarantee"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: green_electricity_procurement_model
  
  intervention:
    description_de: "Wechsel zu Ökostromtarif mit nachweisbarer Zusätzlichkeit"
    description_en: "Switch to green tariff with proven additionality"
    sets_variable: green_tariff_active
    value_source: user_input
    input_id: has_additionality_guarantee
    temporal_pattern:
      type: ongoing
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_avoidance
  
  user_inputs:
  - id: electricity_consumption_kwh_year
    label_de: "Jährlicher Stromverbrauch"
    label_en: "Annual electricity consumption"
    type: number
    unit: kWh/year
    required: true
  
  - id: has_additionality_guarantee
    type: boolean
    required: true
    note_de: "Falls nein, THG-Reduktion = 0"
    note_en: "If false, GHG reduction = 0"
  
  parameters_required:
  - green_tariff_additionality_factor
  - ef_displacement

# ----- Street and Building Lighting -----
- id: DS7
  name_de: "Stromverbrauch – Umstellung Straßenbeleuchtung"
  name_en: "Electricity Consumption – Street Lighting Conversion"
  description_de: "Ersatz von Straßenbeleuchtung durch LED und Regelschaltung"
  description_en: "Replacement of street lighting with LED and control systems"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: lighting_efficiency_model
  
  intervention:
    description_de: "Austausch von Straßenlaternen auf LED mit Steuerungssystem"
    description_en: "Replacement of street lights with LED and control system"
    sets_variable: number_of_lights_replaced
    value_source: user_input
    temporal_pattern:
      type: one_time
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
    upstream_penalty: upstream_led_net
  
  user_inputs:
  - id: number_of_lights
    label_de: "Anzahl Leuchten"
    label_en: "Number of lights"
    type: number
    unit: count
    required: true
  
  - id: power_before_w
    label_de: "Leistung vorher (W)"
    label_en: "Power before (W)"
    type: number
    unit: W
    required: true
  
  - id: power_after_w
    label_de: "Leistung nachher (W)"
    label_en: "Power after (W)"
    type: number
    unit: W
    required: true
  
  - id: has_control_system
    label_de: "Mit Regelungssystem"
    label_en: "With control system"
    type: boolean
    default: false
  
  parameters_required:
  - operating_hours_street_lighting
  - control_system_savings
  - ef_grid
  - upstream_led
  - upstream_old_lamp
  - lifetime_led

- id: DS8
  name_de: "Stromverbrauch – Umstellung Beleuchtung (Büro)"
  name_en: "Electricity Consumption – Lighting Conversion (Office)"
  description_de: "Ersatz von Bürobeleuchtung durch LED"
  description_en: "Replacement of office lighting with LED"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: lighting_efficiency_model
  
  intervention:
    description_de: "Austausch von Bürobeleuchtung auf LED"
    description_en: "Replacement of office lighting with LED"
    sets_variable: number_of_lights_replaced
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
    upstream_penalty: upstream_led_net
  
  user_inputs:
  - id: number_of_lights
    label_de: "Anzahl Leuchten"
    label_en: "Number of lights"
    type: number
    unit: count
    required: true
  
  - id: power_before_w
    label_de: "Leistung vorher (W)"
    label_en: "Power before (W)"
    type: number
    unit: W
    required: true
  
  - id: power_after_w
    label_de: "Leistung nachher (W)"
    label_en: "Power after (W)"
    type: number
    unit: W
    required: true
  
  parameters_required:
  - operating_hours_office
  - ef_grid
  - upstream_led
  - upstream_old_lamp
  - lifetime_led

- id: DS9
  name_de: "Stromverbrauch – Umstellung Beleuchtung (Sporthallen)"
  name_en: "Electricity Consumption – Lighting Conversion (Sports Halls)"
  description_de: "Ersatz von Sporthallenbeleuchtung durch LED"
  description_en: "Replacement of sports hall lighting with LED"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: lighting_efficiency_model
  
  intervention:
    description_de: "Austausch von Sporthallenbeleuchtung auf LED"
    description_en: "Replacement of sports hall lighting with LED"
    sets_variable: number_of_lights_replaced
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
    upstream_penalty: upstream_led_net
  
  user_inputs:
  - id: number_of_lights
    label_de: "Anzahl Leuchten"
    label_en: "Number of lights"
    type: number
    unit: count
    required: true
  
  - id: power_before_w
    label_de: "Leistung vorher (W)"
    label_en: "Power before (W)"
    type: number
    unit: W
    required: true
  
  - id: power_after_w
    label_de: "Leistung nachher (W)"
    label_en: "Power after (W)"
    type: number
    unit: W
    required: true
  
  parameters_required:
  - operating_hours_sports_hall
  - ef_grid
  - upstream_led
  - upstream_old_lamp
  - lifetime_led

- id: DS10
  name_de: "Stromverbrauch – Umstellung Beleuchtung (Sportplätze)"
  name_en: "Electricity Consumption – Lighting Conversion (Sports Fields)"
  description_de: "Ersatz von Sportplatzbeleuchtung durch LED"
  description_en: "Replacement of sports field lighting with LED"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: lighting_efficiency_model
  
  intervention:
    description_de: "Austausch von Sportplatzbeleuchtung auf LED"
    description_en: "Replacement of sports field lighting with LED"
    sets_variable: number_of_lights_replaced
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
    upstream_penalty: upstream_led_net
  
  user_inputs:
  - id: number_of_lights
    label_de: "Anzahl Leuchten"
    label_en: "Number of lights"
    type: number
    unit: count
    required: true
  
  - id: power_before_w
    label_de: "Leistung vorher (W)"
    label_en: "Power before (W)"
    type: number
    unit: W
    required: true
  
  - id: power_after_w
    label_de: "Leistung nachher (W)"
    label_en: "Power after (W)"
    type: number
    unit: W
    required: true
  
  parameters_required:
  - operating_hours_sports_field
  - ef_grid
  - upstream_led
  - upstream_old_lamp
  - lifetime_led

- id: DS11
  name_de: "Stromverbrauch – Verhaltensänderungen Gewerbe/Verwaltung"
  name_en: "Electricity Consumption – Behavioral Changes Commercial/Administration"
  description_de: "Verhaltensänderungen beim Stromverbrauch (Beleuchtung, Geräte, Lüftung)"
  description_en: "Behavioral changes in electricity use (lighting, devices, HVAC)"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: electricity_behavioral_savings_model
  
  intervention:
    description_de: "Verhaltensänderungen ohne Investitionen"
    description_en: "Behavioral changes without investment"
    sets_variable: behavioral_savings_rate
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
  
  user_inputs:
  - id: baseline_electricity_kwh_year
    label_de: "Ausgangsstromverbrauch"
    label_en: "Baseline electricity consumption"
    type: number
    unit: kWh/year
    required: true
  
  - id: savings_rate_percent
    label_de: "Erwartete Einsparungsrate"
    label_en: "Expected savings rate"
    type: percentage
    required: true
    default_parameter: behavioral_savings_rate_admin
    validation: {min: 0, max: 0.30}
  
  parameters_required:
  - behavioral_savings_rate_admin
  - ef_grid

- id: DS12
  name_de: "Stromverbrauch – Effizienz und Verhaltensmaßnahmen private Haushalte"
  name_en: "Electricity Consumption – Efficiency and Behavioral Measures Private Households"
  description_de: "Verhaltensänderungen beim Stromverbrauch in Privathaushalten"
  description_en: "Behavioral changes in household electricity use"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: electricity_behavioral_savings_model
  
  intervention:
    description_de: "Haushaltsbezogene Verhaltensänderungen"
    description_en: "Household behavioral changes"
    sets_variable: behavioral_savings_rate
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
  
  user_inputs:
  - id: baseline_electricity_kwh_year
    label_de: "Ausgangsstromverbrauch"
    label_en: "Baseline electricity consumption"
    type: number
    unit: kWh/year
    required: true
  
  - id: savings_rate_percent
    label_de: "Erwartete Einsparungsrate"
    label_en: "Expected savings rate"
    type: percentage
    required: true
    default_parameter: behavioral_savings_rate_households
    validation: {min: 0, max: 0.25}
  
  parameters_required:
  - behavioral_savings_rate_households
  - ef_grid

- id: DS13
  name_de: "Stromverbrauch – Gering- und nicht-investive Maßnahmen Gewerbe/Verwaltung (Einzelmaßnahmen)"
  name_en: "Electricity Consumption – Low and Non-Investment Measures Commercial/Administration (Individual Measures)"
  description_de: "Gering-investive Effizienzmaßnahmen (Bewegungsmelder, Steckerleisten, Zeitschaltuhren)"
  description_en: "Low-cost efficiency investments (motion sensors, power strips, timers)"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: electricity_efficiency_investment_model
  
  intervention:
    description_de: "Gering-investive Effizienzverbesserungen"
    description_en: "Low-cost efficiency improvements"
    sets_variable: efficiency_savings_rate
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
    upstream_penalty: upstream_devices
  
  user_inputs:
  - id: baseline_electricity_kwh_year
    label_de: "Ausgangsstromverbrauch"
    label_en: "Baseline electricity consumption"
    type: number
    unit: kWh/year
    required: true
  
  - id: savings_rate_percent
    label_de: "Erwartete Einsparungsrate"
    label_en: "Expected savings rate"
    type: percentage
    required: true
    default_parameter: low_investment_savings_rate_admin
    validation: {min: 0, max: 0.20}
  
  parameters_required:
  - low_investment_savings_rate_admin
  - ef_grid
  - upstream_devices

- id: DS14
  name_de: "Stromverbrauch – Gering- und nicht-investive Maßnahmen Gewerbe/Verwaltung (alle Bereiche)"
  name_en: "Electricity Consumption – Low and Non-Investment Measures Commercial/Administration (All Areas)"
  description_de: "Umfassendes gering-investives Effizienzprogramm über alle Verwaltungsbereiche"
  description_en: "Comprehensive low-cost efficiency program across all administrative areas"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: electricity_efficiency_investment_model
  
  intervention:
    description_de: "Umfassendes Effizienzprogramm"
    description_en: "Comprehensive efficiency program"
    sets_variable: efficiency_savings_rate
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
    upstream_penalty: upstream_devices
  
  user_inputs:
  - id: baseline_electricity_kwh_year
    label_de: "Ausgangsstromverbrauch"
    label_en: "Baseline electricity consumption"
    type: number
    unit: kWh/year
    required: true
  
  - id: savings_rate_percent
    label_de: "Erwartete Einsparungsrate"
    label_en: "Expected savings rate"
    type: percentage
    required: true
    default_parameter: low_investment_savings_rate_admin_comprehensive
  
  parameters_required:
  - low_investment_savings_rate_admin_comprehensive
  - ef_grid
  - upstream_devices

- id: DS15
  name_de: "Stromverbrauch – Gering- und nicht-investive Maßnahmen Haushalte"
  name_en: "Electricity Consumption – Low and Non-Investment Measures Households"
  description_de: "Gering-investive Effizienzmaßnahmen in Haushalten"
  description_en: "Low-cost efficiency measures in households"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: electricity_efficiency_investment_model
  
  intervention:
    description_de: "Haushaltsbezogene gering-investive Maßnahmen"
    description_en: "Household low-cost measures"
    sets_variable: efficiency_savings_rate
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
    upstream_penalty: upstream_devices
  
  user_inputs:
  - id: baseline_electricity_kwh_year
    label_de: "Ausgangsstromverbrauch"
    label_en: "Baseline electricity consumption"
    type: number
    unit: kWh/year
    required: true
  
  - id: savings_rate_percent
    label_de: "Erwartete Einsparungsrate"
    label_en: "Expected savings rate"
    type: percentage
    required: true
    default_parameter: low_investment_savings_rate_households
  
  parameters_required:
  - low_investment_savings_rate_households
  - ef_grid
  - upstream_devices

- id: DS16
  name_de: "Stromverbrauch – Raumlufttechnische Anlagen"
  name_en: "Electricity Consumption – Air Conditioning Systems"
  description_de: "Ersatz durch energieeffiziente RLT-Anlagen"
  description_en: "Replacement with energy-efficient HVAC systems"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: electricity_efficiency_investment_model
  
  intervention:
    description_de: "Austausch auf effiziente RLT-Systeme"
    description_en: "Replacement with efficient HVAC systems"
    sets_variable: efficiency_savings_rate
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
    upstream_penalty: upstream_devices
  
  user_inputs:
  - id: baseline_electricity_kwh_year
    label_de: "Stromverbrauch RLT-Anlagen"
    label_en: "HVAC electricity consumption"
    type: number
    unit: kWh/year
    required: true
  
  - id: savings_rate_percent
    label_de: "Erwartete Einsparungsrate"
    label_en: "Expected savings rate"
    type: percentage
    required: true
    default_parameter: hvac_efficiency_improvement
  
  parameters_required:
  - hvac_efficiency_improvement
  - ef_grid
  - upstream_hvac

- id: DS17
  name_de: "Stromverbrauch – Energieeffizienz Rechenzentren"
  name_en: "Electricity Consumption – Energy Efficiency Data Centers"
  description_de: "Energieeffizienzverbesserungen in Rechenzentren (Kühlung, Lüftung, Entfeuchtung)"
  description_en: "Energy efficiency improvements in data centers (cooling, ventilation, dehumidification)"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: electricity_efficiency_investment_model
  
  intervention:
    description_de: "Effizienzoptimierung Rechenzentrum"
    description_en: "Data center efficiency optimization"
    sets_variable: efficiency_savings_rate
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
    upstream_penalty: upstream_devices
  
  user_inputs:
  - id: baseline_electricity_kwh_year
    label_de: "Stromverbrauch Rechenzentrum"
    label_en: "Data center electricity consumption"
    type: number
    unit: kWh/year
    required: true
  
  - id: savings_rate_percent
    label_de: "Erwartete Einsparungsrate"
    label_en: "Expected savings rate"
    type: percentage
    required: true
    default_parameter: datacenter_efficiency_improvement
  
  parameters_required:
  - datacenter_efficiency_improvement
  - ef_grid
  - upstream_datacenter_equipment

- id: DS18
  name_de: "Stromverbrauch – Effiziente Geräte für Information, Kommunikation, Technik Gewerbe"
  name_en: "Electricity Consumption – Efficient Devices for ICT Commercial"
  description_de: "Ersatz von IT-Geräten durch energieeffiziente Geräte im Gewerbe"
  description_en: "Replacement of IT equipment with energy-efficient devices in commercial sector"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: electricity_efficiency_investment_model
  
  intervention:
    description_de: "Austausch auf effiziente IT-Geräte"
    description_en: "Replacement with efficient IT equipment"
    sets_variable: efficiency_savings_rate
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
    upstream_penalty: upstream_devices
  
  user_inputs:
  - id: baseline_electricity_kwh_year
    label_de: "Stromverbrauch IT-Geräte"
    label_en: "IT equipment electricity consumption"
    type: number
    unit: kWh/year
    required: true
  
  - id: savings_rate_percent
    label_de: "Erwartete Einsparungsrate"
    label_en: "Expected savings rate"
    type: percentage
    required: true
    default_parameter: ict_efficiency_improvement_commercial
  
  parameters_required:
  - ict_efficiency_improvement_commercial
  - ef_grid
  - upstream_ict_devices

- id: DS19
  name_de: "Stromverbrauch – Effiziente Geräte für Information, Kommunikation, Technik Haushalte"
  name_en: "Electricity Consumption – Efficient Devices for ICT Households"
  description_de: "Ersatz von Haushalts-IT-Geräten durch energieeffiziente Geräte"
  description_en: "Replacement of household IT equipment with energy-efficient devices"
  strategy_id: S0
  instrument_id: D
  table_number: 32
  
  bau_model_ref: electricity_efficiency_investment_model
  
  intervention:
    description_de: "Austausch auf effiziente Haushalts-IT"
    description_en: "Replacement with efficient household IT"
    sets_variable: efficiency_savings_rate
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
    upstream_penalty: upstream_devices
  
  user_inputs:
  - id: baseline_electricity_kwh_year
    label_de: "Stromverbrauch IT-Geräte"
    label_en: "IT equipment electricity consumption"
    type: number
    unit: kWh/year
    required: true
  
  - id: savings_rate_percent
    label_de: "Erwartete Einsparungsrate"
    label_en: "Expected savings rate"
    type: percentage
    required: true
    default_parameter: ict_efficiency_improvement_households
  
  parameters_required:
  - ict_efficiency_improvement_households
  - ef_grid
  - upstream_ict_devices


# ============================================
# DIRECT MEASURES - HEAT (Table 33)
# ============================================

- id: DW1
  name_de: "Klimafreundliche Wärmeerzeugung (dezentral) Gewerbe/Verwaltung"
  name_en: "Climate-Friendly Heat Generation (Decentralized) Commercial/Administration"
  description_de: "Ersatz fossiler Heizung durch klimafreundliches System (z.B. Wärmepumpe)"
  description_en: "Replacement of fossil heating with climate-friendly system (e.g., heat pump)"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: decentralized_heating_replacement_model
  
  intervention:
    description_de: "Heizungstausch auf klimafreundliche Technologie"
    description_en: "Heating system replacement with climate-friendly technology"
    sets_variable: heating_system_after
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_reduction
    upstream_penalty: upstream_heating_system
    
    additional_outputs:
    - operational_reduction_direct_combustion
    - operational_reduction_fuel_upstream
  
  user_inputs:
  - id: heat_demand_kwh_year
    label_de: "Jährlicher Wärmebedarf"
    label_en: "Annual heat demand"
    type: number
    unit: kWh/year
    required: true
  
  - id: fuel_type_before
    label_de: "Energieträger vorher"
    label_en: "Fuel type before"
    type: choice
    choices: [natural_gas, heating_oil, electricity_direct, coal, biomass]
    required: true
  
  - id: heating_system_after
    label_de: "Heizsystem nachher"
    label_en: "Heating system after"
    type: choice
    choices: [air_source_heat_pump, ground_source_heat_pump, biomass_boiler, pellet_boiler, solar_thermal_plus_backup]
    required: true
  
  parameters_required:
  - efficiency_before
  - efficiency_after
  - ef_fuel_before
  - ef_fuel_after
  - upstream_heating_system_new
  - upstream_heating_system_old
  - direct_combustion_share
  - lifetime_heating_system

- id: DW2
  name_de: "Klimafreundliche Wärmeerzeugung (dezentral) Haushalte"
  name_en: "Climate-Friendly Heat Generation (Decentralized) Households"
  description_de: "Heizungstausch in Haushalten auf klimafreundliches System"
  description_en: "Household heating replacement with climate-friendly system"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: decentralized_heating_replacement_model
  
  intervention:
    description_de: "Haushalts-Heizungstausch"
    description_en: "Household heating replacement"
    sets_variable: heating_system_after
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_reduction
    upstream_penalty: upstream_heating_system
  
  user_inputs:
  - id: heat_demand_kwh_year
    label_de: "Jährlicher Wärmebedarf"
    label_en: "Annual heat demand"
    type: number
    unit: kWh/year
    required: true
  
  - id: fuel_type_before
    label_de: "Energieträger vorher"
    label_en: "Fuel type before"
    type: choice
    choices: [natural_gas, heating_oil, electricity_direct, coal, biomass]
    required: true
  
  - id: heating_system_after
    label_de: "Heizsystem nachher"
    label_en: "Heating system after"
    type: choice
    choices: [air_source_heat_pump, ground_source_heat_pump, biomass_boiler, pellet_boiler, solar_thermal_plus_backup]
    required: true
  
  parameters_required:
  - efficiency_before
  - efficiency_after
  - ef_fuel_before
  - ef_fuel_after
  - upstream_heating_system_new
  - upstream_heating_system_old
  - lifetime_heating_system

- id: DW3
  name_de: "Klimafreundliche Wärmeerzeugung (dezentral-zentral) Gewerbe/Verwaltung"
  name_en: "Climate-Friendly Heat Generation (Decentralized-Centralized) Commercial/Administration"
  description_de: "Anschluss an Fernwärmenetz"
  description_en: "Connection to district heating network"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: district_heating_connection_model
  
  intervention:
    description_de: "Wechsel von Einzelheizung zu Fernwärme"
    description_en: "Switch from individual heating to district heating"
    sets_variable: heating_source
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_reduction
    upstream_penalty: upstream_connection
  
  user_inputs:
  - id: heat_demand_kwh_year
    label_de: "Jährlicher Wärmebedarf"
    label_en: "Annual heat demand"
    type: number
    unit: kWh/year
    required: true
  
  - id: fuel_type_before
    label_de: "Energieträger vorher"
    label_en: "Fuel type before"
    type: choice
    choices: [natural_gas, heating_oil, electricity_direct, coal]
    required: true
  
  - id: district_heating_emission_factor
    label_de: "Emissionsfaktor Fernwärme (lokal)"
    label_en: "District heating emission factor (local)"
    type: number
    unit: kg CO2e/kWh
    required: true
    note_de: "Kommune-spezifischer Wert verwenden"
    note_en: "Use municipality-specific value"
  
  parameters_required:
  - efficiency_before
  - ef_fuel_before
  - upstream_district_heating_connection
  - lifetime_district_heating_connection

- id: DW4
  name_de: "Klimafreundliche Wärmeerzeugung (dezentral-zentral) Haushalte"
  name_en: "Climate-Friendly Heat Generation (Decentralized-Centralized) Households"
  description_de: "Haushalts-Anschluss an Fernwärmenetz"
  description_en: "Household connection to district heating network"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: district_heating_connection_model
  
  intervention:
    description_de: "Haushalts-Fernwärmeanschluss"
    description_en: "Household district heating connection"
    sets_variable: heating_source
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_reduction
    upstream_penalty: upstream_connection
  
  user_inputs:
  - id: heat_demand_kwh_year
    label_de: "Jährlicher Wärmebedarf"
    label_en: "Annual heat demand"
    type: number
    unit: kWh/year
    required: true
  
  - id: fuel_type_before
    label_de: "Energieträger vorher"
    label_en: "Fuel type before"
    type: choice
    choices: [natural_gas, heating_oil, electricity_direct, coal]
    required: true
  
  - id: district_heating_emission_factor
    label_de: "Emissionsfaktor Fernwärme (lokal)"
    label_en: "District heating emission factor (local)"
    type: number
    unit: kg CO2e/kWh
    required: true
  
  parameters_required:
  - efficiency_before
  - ef_fuel_before
  - upstream_district_heating_connection
  - lifetime_district_heating_connection

- id: DW5
  name_de: "Wärmeverbrauch – Verhaltensänderungen Gewerbe/Verwaltung"
  name_en: "Heat Consumption – Behavioral Changes Commercial/Administration"
  description_de: "Verhaltensänderungen beim Heizen (niedrigere Temperatur, richtiges Lüften)"
  description_en: "Behavioral changes in heating (lower temperature, proper ventilation)"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: electricity_behavioral_savings_model
  
  intervention:
    description_de: "Verhaltensänderungen ohne Investitionen"
    description_en: "Behavioral changes without investment"
    sets_variable: behavioral_savings_rate
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
  
  user_inputs:
  - id: baseline_heat_kwh_year
    label_de: "Ausgangswärmeverbrauch"
    label_en: "Baseline heat consumption"
    type: number
    unit: kWh/year
    required: true
  
  - id: fuel_type
    label_de: "Energieträger"
    label_en: "Fuel type"
    type: choice
    choices: [natural_gas, heating_oil, district_heating, electricity]
    required: true
  
  - id: savings_rate_percent
    label_de: "Erwartete Einsparungsrate"
    label_en: "Expected savings rate"
    type: percentage
    required: true
    default_parameter: behavioral_heat_savings_admin
  
  parameters_required:
  - behavioral_heat_savings_admin
  - ef_fuel
  - heating_efficiency

- id: DW6
  name_de: "Wärmeverbrauch – Verhaltensänderungen private Haushalte"
  name_en: "Heat Consumption – Behavioral Changes Private Households"
  description_de: "Verhaltensänderungen beim Heizen in Haushalten"
  description_en: "Behavioral changes in household heating"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: electricity_behavioral_savings_model
  
  intervention:
    description_de: "Haushaltsbezogene Verhaltensänderungen beim Heizen"
    description_en: "Household heating behavioral changes"
    sets_variable: behavioral_savings_rate
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
  
  user_inputs:
  - id: baseline_heat_kwh_year
    label_de: "Ausgangswärmeverbrauch"
    label_en: "Baseline heat consumption"
    type: number
    unit: kWh/year
    required: true
  
  - id: fuel_type
    label_de: "Energieträger"
    label_en: "Fuel type"
    type: choice
    choices: [natural_gas, heating_oil, district_heating, electricity]
    required: true
  
  - id: savings_rate_percent
    label_de: "Erwartete Einsparungsrate"
    label_en: "Expected savings rate"
    type: percentage
    required: true
    default_parameter: behavioral_heat_savings_households
  
  parameters_required:
  - behavioral_heat_savings_households
  - ef_fuel
  - heating_efficiency

- id: DW7
  name_de: "Wärmeverbrauch – Gering- und nicht-investive Maßnahmen Gewerbe/Verwaltung"
  name_en: "Heat Consumption – Low and Non-Investment Measures Commercial/Administration"
  description_de: "Gering-investive Heizungseffizienzmaßnahmen (Verteilung, Warmwasser, Regelung, Kessel)"
  description_en: "Low-cost heating efficiency measures (distribution, DHW, controls, boiler)"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: electricity_efficiency_investment_model
  
  intervention:
    description_de: "Gering-investive Wärmeeffizienzverbesserungen"
    description_en: "Low-cost heat efficiency improvements"
    sets_variable: efficiency_savings_rate
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
    upstream_penalty: upstream_devices
  
  user_inputs:
  - id: baseline_heat_kwh_year
    label_de: "Ausgangswärmeverbrauch"
    label_en: "Baseline heat consumption"
    type: number
    unit: kWh/year
    required: true
  
  - id: fuel_type
    label_de: "Energieträger"
    label_en: "Fuel type"
    type: choice
    choices: [natural_gas, heating_oil, district_heating]
    required: true
  
  - id: savings_rate_percent
    label_de: "Erwartete Einsparungsrate"
    label_en: "Expected savings rate"
    type: percentage
    required: true
    default_parameter: low_investment_heat_savings_admin
  
  parameters_required:
  - low_investment_heat_savings_admin
  - ef_fuel
  - upstream_heat_controls

- id: DW8
  name_de: "Wärmeverbrauch – Gering- und nicht-investive Maßnahmen private Haushalte"
  name_en: "Heat Consumption – Low and Non-Investment Measures Private Households"
  description_de: "Gering-investive Heizungseffizienz in Haushalten"
  description_en: "Low-cost heating efficiency in households"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: electricity_efficiency_investment_model
  
  intervention:
    description_de: "Haushaltsbezogene gering-investive Wärmemaßnahmen"
    description_en: "Household low-cost heat measures"
    sets_variable: efficiency_savings_rate
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_savings
    upstream_penalty: upstream_devices
  
  user_inputs:
  - id: baseline_heat_kwh_year
    label_de: "Ausgangswärmeverbrauch"
    label_en: "Baseline heat consumption"
    type: number
    unit: kWh/year
    required: true
  
  - id: fuel_type
    label_de: "Energieträger"
    label_en: "Fuel type"
    type: choice
    choices: [natural_gas, heating_oil, district_heating]
    required: true
  
  - id: savings_rate_percent
    label_de: "Erwartete Einsparungsrate"
    label_en: "Expected savings rate"
    type: percentage
    required: true
    default_parameter: low_investment_heat_savings_households
  
  parameters_required:
  - low_investment_heat_savings_households
  - ef_fuel
  - upstream_heat_controls

- id: DW9
  name_de: "Gebäude – Sanierung und Heizungstausch eines Verwaltungsgebäudes"
  name_en: "Building – Renovation and Heating Replacement of Administrative Building"
  description_de: "Umfassende Sanierung mit Heizungssystemersatz"
  description_en: "Comprehensive renovation with heating system replacement"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: building_renovation_plus_heating_model
  
  intervention:
    description_de: "Kombinierte Sanierung und Heizungstausch"
    description_en: "Combined renovation and heating replacement"
    sets_variable: [heat_intensity_after, heating_system_after]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_reduction
    upstream_penalty: upstream_renovation_and_heating
    
    additional_outputs:
    - operational_reduction_sufficiency
    - operational_reduction_efficiency
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_before_kwh_m2_year
    label_de: "Wärmebedarf vorher"
    label_en: "Heat demand before"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: heat_intensity_after_kwh_m2_year
    label_de: "Wärmebedarf nachher"
    label_en: "Heat demand after"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: fuel_type_before
    label_de: "Energieträger vorher"
    label_en: "Fuel type before"
    type: choice
    choices: [natural_gas, heating_oil, district_heating, electricity]
    required: true
  
  - id: heating_system_after
    label_de: "Heizsystem nachher"
    label_en: "Heating system after"
    type: choice
    choices: [air_source_heat_pump, ground_source_heat_pump, district_heating, biomass_boiler]
    required: true
  
  parameters_required:
  - efficiency_before
  - efficiency_after
  - ef_fuel_before
  - ef_fuel_after
  - upstream_renovation_per_m2
  - upstream_heating_system
  - lifetime_renovation

- id: DW10
  name_de: "Gebäude – Sanierung und Heizungstausch eines Schulgebäudes"
  name_en: "Building – Renovation and Heating Replacement of School Building"
  description_de: "Schulgebäudesanierung mit Heizungstausch"
  description_en: "School building renovation with heating replacement"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: building_renovation_plus_heating_model
  
  intervention:
    description_de: "Schulsanierung kombiniert"
    description_en: "Combined school renovation"
    sets_variable: [heat_intensity_after, heating_system_after]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_reduction
    upstream_penalty: upstream_renovation_and_heating
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_before_kwh_m2_year
    label_de: "Wärmebedarf vorher"
    label_en: "Heat demand before"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: heat_intensity_after_kwh_m2_year
    label_de: "Wärmebedarf nachher"
    label_en: "Heat demand after"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: fuel_type_before
    label_de: "Energieträger vorher"
    label_en: "Fuel type before"
    type: choice
    choices: [natural_gas, heating_oil, district_heating]
    required: true
  
  - id: heating_system_after
    label_de: "Heizsystem nachher"
    label_en: "Heating system after"
    type: choice
    choices: [air_source_heat_pump, ground_source_heat_pump, district_heating]
    required: true
  
  parameters_required:
  - efficiency_before
  - efficiency_after
  - ef_fuel_before
  - ef_fuel_after
  - upstream_renovation_per_m2
  - upstream_heating_system
  - lifetime_renovation

- id: DW11
  name_de: "Gebäude – Sanierung und Heizungstausch einer Kita"
  name_en: "Building – Renovation and Heating Replacement of Kindergarten"
  description_de: "Kita-Sanierung mit Heizungstausch"
  description_en: "Kindergarten renovation with heating replacement"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: building_renovation_plus_heating_model
  
  intervention:
    description_de: "Kita-Sanierung kombiniert"
    description_en: "Combined kindergarten renovation"
    sets_variable: [heat_intensity_after, heating_system_after]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_reduction
    upstream_penalty: upstream_renovation_and_heating
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_before_kwh_m2_year
    label_de: "Wärmebedarf vorher"
    label_en: "Heat demand before"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: heat_intensity_after_kwh_m2_year
    label_de: "Wärmebedarf nachher"
    label_en: "Heat demand after"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: fuel_type_before
    label_de: "Energieträger vorher"
    label_en: "Fuel type before"
    type: choice
    choices: [natural_gas, heating_oil, district_heating]
    required: true
  
  - id: heating_system_after
    label_de: "Heizsystem nachher"
    label_en: "Heating system after"
    type: choice
    choices: [air_source_heat_pump, ground_source_heat_pump, district_heating]
    required: true
  
  parameters_required:
  - efficiency_before
  - efficiency_after
  - ef_fuel_before
  - ef_fuel_after
  - upstream_renovation_per_m2
  - upstream_heating_system
  - lifetime_renovation

- id: DW12
  name_de: "Gebäude – Sanierung und Heizungstausch einer Turnhalle"
  name_en: "Building – Renovation and Heating Replacement of Gymnasium"
  description_de: "Turnhallen-Sanierung mit Heizungstausch"
  description_en: "Gymnasium renovation with heating replacement"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: building_renovation_plus_heating_model
  
  intervention:
    description_de: "Turnhallen-Sanierung kombiniert"
    description_en: "Combined gymnasium renovation"
    sets_variable: [heat_intensity_after, heating_system_after]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_reduction
    upstream_penalty: upstream_renovation_and_heating
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_before_kwh_m2_year
    label_de: "Wärmebedarf vorher"
    label_en: "Heat demand before"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: heat_intensity_after_kwh_m2_year
    label_de: "Wärmebedarf nachher"
    label_en: "Heat demand after"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: fuel_type_before
    label_de: "Energieträger vorher"
    label_en: "Fuel type before"
    type: choice
    choices: [natural_gas, heating_oil, district_heating]
    required: true
  
  - id: heating_system_after
    label_de: "Heizsystem nachher"
    label_en: "Heating system after"
    type: choice
    choices: [air_source_heat_pump, ground_source_heat_pump, district_heating]
    required: true
  
  parameters_required:
  - efficiency_before
  - efficiency_after
  - ef_fuel_before
  - ef_fuel_after
  - upstream_renovation_per_m2
  - upstream_heating_system
  - lifetime_renovation

- id: DW13
  name_de: "Gebäude – Sanierung und Heizungstausch eines Einfamilienhauses"
  name_en: "Building – Renovation and Heating Replacement of Single-Family House"
  description_de: "Einfamilienhaus-Sanierung mit Heizungstausch"
  description_en: "Single-family house renovation with heating replacement"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: building_renovation_plus_heating_model
  
  intervention:
    description_de: "Einfamilienhaus-Sanierung kombiniert"
    description_en: "Combined single-family house renovation"
    sets_variable: [heat_intensity_after, heating_system_after]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_reduction
    upstream_penalty: upstream_renovation_and_heating
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_before_kwh_m2_year
    label_de: "Wärmebedarf vorher"
    label_en: "Heat demand before"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: heat_intensity_after_kwh_m2_year
    label_de: "Wärmebedarf nachher"
    label_en: "Heat demand after"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: fuel_type_before
    label_de: "Energieträger vorher"
    label_en: "Fuel type before"
    type: choice
    choices: [natural_gas, heating_oil, district_heating, electricity]
    required: true
  
  - id: heating_system_after
    label_de: "Heizsystem nachher"
    label_en: "Heating system after"
    type: choice
    choices: [air_source_heat_pump, ground_source_heat_pump, district_heating, pellet_boiler]
    required: true
  
  parameters_required:
  - efficiency_before
  - efficiency_after
  - ef_fuel_before
  - ef_fuel_after
  - upstream_renovation_per_m2
  - upstream_heating_system
  - lifetime_renovation

- id: DW14
  name_de: "Gebäude – Sanierung und Heizungstausch eines Reihenhauses"
  name_en: "Building – Renovation and Heating Replacement of Townhouse"
  description_de: "Reihenhaus-Sanierung mit Heizungstausch"
  description_en: "Townhouse renovation with heating replacement"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: building_renovation_plus_heating_model
  
  intervention:
    description_de: "Reihenhaus-Sanierung kombiniert"
    description_en: "Combined townhouse renovation"
    sets_variable: [heat_intensity_after, heating_system_after]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_reduction
    upstream_penalty: upstream_renovation_and_heating
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_before_kwh_m2_year
    label_de: "Wärmebedarf vorher"
    label_en: "Heat demand before"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: heat_intensity_after_kwh_m2_year
    label_de: "Wärmebedarf nachher"
    label_en: "Heat demand after"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: fuel_type_before
    label_de: "Energieträger vorher"
    label_en: "Fuel type before"
    type: choice
    choices: [natural_gas, heating_oil, district_heating]
    required: true
  
  - id: heating_system_after
    label_de: "Heizsystem nachher"
    label_en: "Heating system after"
    type: choice
    choices: [air_source_heat_pump, ground_source_heat_pump, district_heating]
    required: true
  
  parameters_required:
  - efficiency_before
  - efficiency_after
  - ef_fuel_before
  - ef_fuel_after
  - upstream_renovation_per_m2
  - upstream_heating_system
  - lifetime_renovation

- id: DW15
  name_de: "Gebäude – Sanierung und Heizungstausch eines Mehrfamilienhauses"
  name_en: "Building – Renovation and Heating Replacement of Multi-Family House"
  description_de: "Mehrfamilienhaus-Sanierung mit Heizungstausch"
  description_en: "Multi-family house renovation with heating replacement"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: building_renovation_plus_heating_model
  
  intervention:
    description_de: "Mehrfamilienhaus-Sanierung kombiniert"
    description_en: "Combined multi-family house renovation"
    sets_variable: [heat_intensity_after, heating_system_after]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_reduction
    upstream_penalty: upstream_renovation_and_heating
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_before_kwh_m2_year
    label_de: "Wärmebedarf vorher"
    label_en: "Heat demand before"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: heat_intensity_after_kwh_m2_year
    label_de: "Wärmebedarf nachher"
    label_en: "Heat demand after"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: fuel_type_before
    label_de: "Energieträger vorher"
    label_en: "Fuel type before"
    type: choice
    choices: [natural_gas, heating_oil, district_heating]
    required: true
  
  - id: heating_system_after
    label_de: "Heizsystem nachher"
    label_en: "Heating system after"
    type: choice
    choices: [air_source_heat_pump, district_heating, biomass_boiler]
    required: true
  
  parameters_required:
  - efficiency_before
  - efficiency_after
  - ef_fuel_before
  - ef_fuel_after
  - upstream_renovation_per_m2
  - upstream_heating_system
  - lifetime_renovation

- id: DW16
  name_de: "Gebäude – Sanierung und Heizungstausch eines Groß-Mehrfamilienhauses"
  name_en: "Building – Renovation and Heating Replacement of Large Multi-Family House"
  description_de: "Groß-Mehrfamilienhaus-Sanierung mit Heizungstausch"
  description_en: "Large multi-family house renovation with heating replacement"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: building_renovation_plus_heating_model
  
  intervention:
    description_de: "Groß-Mehrfamilienhaus-Sanierung kombiniert"
    description_en: "Combined large multi-family house renovation"
    sets_variable: [heat_intensity_after, heating_system_after]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_reduction
    upstream_penalty: upstream_renovation_and_heating
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_before_kwh_m2_year
    label_de: "Wärmebedarf vorher"
    label_en: "Heat demand before"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: heat_intensity_after_kwh_m2_year
    label_de: "Wärmebedarf nachher"
    label_en: "Heat demand after"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: fuel_type_before
    label_de: "Energieträger vorher"
    label_en: "Fuel type before"
    type: choice
    choices: [natural_gas, heating_oil, district_heating]
    required: true
  
  - id: heating_system_after
    label_de: "Heizsystem nachher"
    label_en: "Heating system after"
    type: choice
    choices: [district_heating, air_source_heat_pump]
    required: true
  
  parameters_required:
  - efficiency_before
  - efficiency_after
  - ef_fuel_before
  - ef_fuel_after
  - upstream_renovation_per_m2
  - upstream_heating_system
  - lifetime_renovation

- id: DW17
  name_de: "Gebäude – Neubau eines Verwaltungsgebäudes"
  name_en: "Building – New Construction of Administrative Building"
  description_de: "Neubau eines Verwaltungsgebäudes über gesetzlichen Mindeststandard hinaus"
  description_en: "New administrative building exceeding legal minimum standards"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: new_building_construction_model
  
  intervention:
    description_de: "Neubau mit höherem Effizienzstandard als GEG-Minimum"
    description_en: "New construction with higher efficiency than GEG minimum"
    sets_variable: [heat_intensity_standard, construction_ef]
    value_source: user_input
    temporal_pattern:
      type: one_time_construction
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_heating_reduction
    upstream_penalty: upstream_construction_delta
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_climate_kwh_m2_year
    label_de: "Wärmebedarf Klimaschutz-Variante"
    label_en: "Heat demand climate variant"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: construction_emission_factor_climate
    label_de: "Bau-Emissionsfaktor Klimaschutz-Variante"
    label_en: "Construction emission factor climate variant"
    type: number
    unit: kg CO2e/m²
    required: true
  
  - id: heating_system
    label_de: "Heizsystem"
    label_en: "Heating system"
    type: choice
    choices: [air_source_heat_pump, ground_source_heat_pump, district_heating]
    required: true
  
  - id: construction_year
    label_de: "Baujahr"
    label_en: "Construction year"
    type: year
    required: true
  
  parameters_required:
  - heat_intensity_geg_minimum
  - construction_ef_geg_minimum
  - ef_fuel_after
  - heating_efficiency
  - lifetime_building

- id: DW18
  name_de: "Gebäude – Neubau eines Schulgebäudes"
  name_en: "Building – New Construction of School Building"
  description_de: "Neubau eines Schulgebäudes über gesetzlichen Standard hinaus"
  description_en: "New school building exceeding legal standards"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: new_building_construction_model
  
  intervention:
    description_de: "Schulneubau mit höherem Effizienzstandard"
    description_en: "New school with higher efficiency standard"
    sets_variable: [heat_intensity_standard, construction_ef]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_heating_reduction
    upstream_penalty: upstream_construction_delta
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_climate_kwh_m2_year
    label_de: "Wärmebedarf Klimaschutz-Variante"
    label_en: "Heat demand climate variant"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: construction_emission_factor_climate
    label_de: "Bau-Emissionsfaktor Klimaschutz-Variante"
    label_en: "Construction emission factor climate variant"
    type: number
    unit: kg CO2e/m²
    required: true
  
  - id: heating_system
    label_de: "Heizsystem"
    label_en: "Heating system"
    type: choice
    choices: [air_source_heat_pump, district_heating]
    required: true
  
  parameters_required:
  - heat_intensity_geg_minimum
  - construction_ef_geg_minimum
  - ef_fuel_after
  - heating_efficiency
  - lifetime_building

- id: DW19
  name_de: "Gebäude – Neubau einer Kita"
  name_en: "Building – New Construction of Kindergarten"
  description_de: "Neubau einer Kita über gesetzlichen Standard hinaus"
  description_en: "New kindergarten exceeding legal standards"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: new_building_construction_model
  
  intervention:
    description_de: "Kita-Neubau mit höherem Effizienzstandard"
    description_en: "New kindergarten with higher efficiency standard"
    sets_variable: [heat_intensity_standard, construction_ef]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_heating_reduction
    upstream_penalty: upstream_construction_delta
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_climate_kwh_m2_year
    label_de: "Wärmebedarf Klimaschutz-Variante"
    label_en: "Heat demand climate variant"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: construction_emission_factor_climate
    label_de: "Bau-Emissionsfaktor Klimaschutz-Variante"
    label_en: "Construction emission factor climate variant"
    type: number
    unit: kg CO2e/m²
    required: true
  
  - id: heating_system
    label_de: "Heizsystem"
    label_en: "Heating system"
    type: choice
    choices: [air_source_heat_pump, district_heating]
    required: true
  
  parameters_required:
  - heat_intensity_geg_minimum
  - construction_ef_geg_minimum
  - ef_fuel_after
  - heating_efficiency
  - lifetime_building

- id: DW20
  name_de: "Gebäude – Neubau einer Turnhalle"
  name_en: "Building – New Construction of Gymnasium"
  description_de: "Neubau einer Turnhalle über gesetzlichen Standard hinaus"
  description_en: "New gymnasium exceeding legal standards"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: new_building_construction_model
  
  intervention:
    description_de: "Turnhallen-Neubau mit höherem Effizienzstandard"
    description_en: "New gymnasium with higher efficiency standard"
    sets_variable: [heat_intensity_standard, construction_ef]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_heating_reduction
    upstream_penalty: upstream_construction_delta
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_climate_kwh_m2_year
    label_de: "Wärmebedarf Klimaschutz-Variante"
    label_en: "Heat demand climate variant"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: construction_emission_factor_climate
    label_de: "Bau-Emissionsfaktor Klimaschutz-Variante"
    label_en: "Construction emission factor climate variant"
    type: number
    unit: kg CO2e/m²
    required: true
  
  - id: heating_system
    label_de: "Heizsystem"
    label_en: "Heating system"
    type: choice
    choices: [air_source_heat_pump, district_heating]
    required: true
  
  parameters_required:
  - heat_intensity_geg_minimum
  - construction_ef_geg_minimum
  - ef_fuel_after
  - heating_efficiency
  - lifetime_building

- id: DW21
  name_de: "Gebäude – Neubau eines Einfamilienhauses"
  name_en: "Building – New Construction of Single-Family House"
  description_de: "Neubau eines Einfamilienhauses über gesetzlichen Standard hinaus"
  description_en: "New single-family house exceeding legal standards"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: new_building_construction_model
  
  intervention:
    description_de: "Einfamilienhaus-Neubau mit höherem Effizienzstandard"
    description_en: "New single-family house with higher efficiency standard"
    sets_variable: [heat_intensity_standard, construction_ef]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_heating_reduction
    upstream_penalty: upstream_construction_delta
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_climate_kwh_m2_year
    label_de: "Wärmebedarf Klimaschutz-Variante"
    label_en: "Heat demand climate variant"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: construction_emission_factor_climate
    label_de: "Bau-Emissionsfaktor Klimaschutz-Variante"
    label_en: "Construction emission factor climate variant"
    type: number
    unit: kg CO2e/m²
    required: true
  
  - id: heating_system
    label_de: "Heizsystem"
    label_en: "Heating system"
    type: choice
    choices: [air_source_heat_pump, ground_source_heat_pump, pellet_boiler]
    required: true
  
  parameters_required:
  - heat_intensity_geg_minimum
  - construction_ef_geg_minimum
  - ef_fuel_after
  - heating_efficiency
  - lifetime_building

- id: DW22
  name_de: "Gebäude – Neubau eines Reihenhauses"
  name_en: "Building – New Construction of Townhouse"
  description_de: "Neubau eines Reihenhauses über gesetzlichen Standard hinaus"
  description_en: "New townhouse exceeding legal standards"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: new_building_construction_model
  
  intervention:
    description_de: "Reihenhaus-Neubau mit höherem Effizienzstandard"
    description_en: "New townhouse with higher efficiency standard"
    sets_variable: [heat_intensity_standard, construction_ef]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_heating_reduction
    upstream_penalty: upstream_construction_delta
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_climate_kwh_m2_year
    label_de: "Wärmebedarf Klimaschutz-Variante"
    label_en: "Heat demand climate variant"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: construction_emission_factor_climate
    label_de: "Bau-Emissionsfaktor Klimaschutz-Variante"
    label_en: "Construction emission factor climate variant"
    type: number
    unit: kg CO2e/m²
    required: true
  
  - id: heating_system
    label_de: "Heizsystem"
    label_en: "Heating system"
    type: choice
    choices: [air_source_heat_pump, district_heating]
    required: true
  
  parameters_required:
  - heat_intensity_geg_minimum
  - construction_ef_geg_minimum
  - ef_fuel_after
  - heating_efficiency
  - lifetime_building

- id: DW23
  name_de: "Gebäude – Neubau eines Mehrfamilienhauses"
  name_en: "Building – New Construction of Multi-Family House"
  description_de: "Neubau eines Mehrfamilienhauses über gesetzlichen Standard hinaus"
  description_en: "New multi-family house exceeding legal standards"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: new_building_construction_model
  
  intervention:
    description_de: "Mehrfamilienhaus-Neubau mit höherem Effizienzstandard"
    description_en: "New multi-family house with higher efficiency standard"
    sets_variable: [heat_intensity_standard, construction_ef]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_heating_reduction
    upstream_penalty: upstream_construction_delta
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_climate_kwh_m2_year
    label_de: "Wärmebedarf Klimaschutz-Variante"
    label_en: "Heat demand climate variant"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: construction_emission_factor_climate
    label_de: "Bau-Emissionsfaktor Klimaschutz-Variante"
    label_en: "Construction emission factor climate variant"
    type: number
    unit: kg CO2e/m²
    required: true
  
  - id: heating_system
    label_de: "Heizsystem"
    label_en: "Heating system"
    type: choice
    choices: [district_heating, air_source_heat_pump]
    required: true
  
  parameters_required:
  - heat_intensity_geg_minimum
  - construction_ef_geg_minimum
  - ef_fuel_after
  - heating_efficiency
  - lifetime_building

- id: DW24
  name_de: "Gebäude – Neubau eines Groß-Mehrfamilienhauses"
  name_en: "Building – New Construction of Large Multi-Family House"
  description_de: "Neubau eines Groß-Mehrfamilienhauses über gesetzlichen Standard hinaus"
  description_en: "New large multi-family house exceeding legal standards"
  strategy_id: W0
  instrument_id: D
  table_number: 33
  
  bau_model_ref: new_building_construction_model
  
  intervention:
    description_de: "Groß-Mehrfamilienhaus-Neubau mit höherem Effizienzstandard"
    description_en: "New large multi-family house with higher efficiency standard"
    sets_variable: [heat_intensity_standard, construction_ef]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_heating_reduction
    upstream_penalty: upstream_construction_delta
  
  user_inputs:
  - id: building_area_m2
    label_de: "Gebäudefläche"
    label_en: "Building area"
    type: number
    unit: m²
    required: true
  
  - id: heat_intensity_climate_kwh_m2_year
    label_de: "Wärmebedarf Klimaschutz-Variante"
    label_en: "Heat demand climate variant"
    type: number
    unit: kWh/m²/year
    required: true
  
  - id: construction_emission_factor_climate
    label_de: "Bau-Emissionsfaktor Klimaschutz-Variante"
    label_en: "Construction emission factor climate variant"
    type: number
    unit: kg CO2e/m²
    required: true
  
  - id: heating_system
    label_de: "Heizsystem"
    label_en: "Heating system"
    type: choice
    choices: [district_heating, air_source_heat_pump]
    required: true
  
  parameters_required:
  - heat_intensity_geg_minimum
  - construction_ef_geg_minimum
  - ef_fuel_after
  - heating_efficiency
  - lifetime_building


# ============================================
# DIRECT MEASURES - MOBILITY (Table 34)
# ============================================

- id: DM1
  name_de: "Pkw – Antriebswechsel"
  name_en: "Car – Drive Transition"
  description_de: "Ersatz von Verbrennungsfahrzeugen durch Elektrofahrzeuge"
  description_en: "Replacement of combustion engine vehicles with electric vehicles"
  strategy_id: M0
  instrument_id: D
  table_number: 34
  
  bau_model_ref: vehicle_fleet_electrification_model
  
  intervention:
    description_de: "Kauf von BEV statt Verbrenner"
    description_en: "Purchase of BEV instead of ICE"
    sets_variable: [new_ev_purchases, new_ice_purchases]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction_bisko: operational_bisko
    primary_reduction_non_bisko: operational_non_bisko
    upstream_penalty: upstream_vehicles_net
  
  user_inputs:
  - id: vehicles_replaced
    label_de: "Anzahl ersetzter Fahrzeuge"
    label_en: "Number of vehicles replaced"
    type: number
    unit: vehicles
    required: true
  
  - id: vehicle_category
    label_de: "Fahrzeugkategorie"
    label_en: "Vehicle category"
    type: choice
    choices: [compact, midsize, suv, van]
    required: true
  
  - id: annual_mileage_km
    label_de: "Jährliche Fahrleistung"
    label_en: "Annual mileage"
    type: number
    unit: km/year
    required: true
  
  - id: share_within_municipality
    label_de: "Anteil innerhalb Kommune"
    label_en: "Share within municipality"
    type: percentage
    required: true
    default: 0.90
    note_de: "Für BISKO-Allokation"
    note_en: "For BISKO allocation"
  
  parameters_required:
  - fuel_consumption_ice_per_100km
  - electricity_consumption_ev_per_100km
  - ef_fuel_ice
  - ef_grid
  - upstream_ev
  - upstream_ice
  - lifetime_vehicle

- id: DM2
  name_de: "Bus – Antriebswechsel"
  name_en: "Bus – Drive Transition"
  description_de: "Ersatz von Dieselbussen durch Elektro- oder Wasserstoffbusse"
  description_en: "Replacement of diesel buses with electric or hydrogen buses"
  strategy_id: M0
  instrument_id: D
  table_number: 34
  
  bau_model_ref: vehicle_fleet_electrification_model
  
  intervention:
    description_de: "Kauf von Elektro-/Wasserstoffbussen statt Dieselbussen"
    description_en: "Purchase of electric/hydrogen buses instead of diesel"
    sets_variable: [new_ev_purchases, new_ice_purchases]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction_bisko: operational_bisko
    primary_reduction_non_bisko: operational_non_bisko
    upstream_penalty: upstream_vehicles_net
  
  user_inputs:
  - id: buses_replaced
    label_de: "Anzahl ersetzter Busse"
    label_en: "Number of buses replaced"
    type: number
    unit: vehicles
    required: true
  
  - id: bus_type
    label_de: "Bustyp"
    label_en: "Bus type"
    type: choice
    choices: [city_bus_12m, city_bus_18m, regional_bus]
    required: true
  
  - id: annual_mileage_km
    label_de: "Jährliche Fahrleistung"
    label_en: "Annual mileage"
    type: number
    unit: km/year
    required: true
  
  - id: propulsion_type_new
    label_de: "Antriebsart neu"
    label_en: "Propulsion type new"
    type: choice
    choices: [battery_electric, hydrogen_fuel_cell, overhead_line]
    required: true
  
  parameters_required:
  - fuel_consumption_diesel_bus_per_100km
  - electricity_consumption_electric_bus_per_100km
  - hydrogen_consumption_per_100km
  - ef_diesel
  - ef_grid
  - ef_hydrogen
  - upstream_electric_bus
  - upstream_diesel_bus
  - lifetime_bus
  - share_within_municipality

- id: DM3
  name_de: "Pendelwege – Vermeidung/Verlagerung"
  name_en: "Commuting – Avoidance/Modal Shift"
  description_de: "Vermeidung durch Homeoffice und Verkehrsverlagerung auf nachhaltige Verkehrsträger"
  description_en: "Avoidance through home office and modal shift to sustainable transport"
  strategy_id: M0
  instrument_id: D
  table_number: 34
  
  bau_model_ref: modal_shift_model
  
  intervention:
    description_de: "Homeoffice-Politik und nachhaltige Verkehrsförderung"
    description_en: "Home office policy and sustainable transport promotion"
    sets_variable: modal_split
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction_bisko: operational_bisko
    primary_reduction_non_bisko: operational_non_bisko
    
    additional_outputs:
    - operational_avoidance
    - operational_shift
  
  user_inputs:
  - id: employees
    label_de: "Anzahl Mitarbeitende"
    label_en: "Number of employees"
    type: number
    unit: persons
    required: true
  
  - id: modal_split_before_car
    label_de: "Modal Split vorher - Auto"
    label_en: "Modal split before - car"
    type: percentage
    required: true
  
  - id: modal_split_before_pt
    label_de: "Modal Split vorher - ÖPNV"
    label_en: "Modal split before - public transport"
    type: percentage
    required: true
  
  - id: modal_split_before_active
    label_de: "Modal Split vorher - Rad/Fuß"
    label_en: "Modal split before - bike/walk"
    type: percentage
    required: true
  
  - id: modal_split_after_car
    label_de: "Modal Split nachher - Auto"
    label_en: "Modal split after - car"
    type: percentage
    required: true
  
  - id: modal_split_after_pt
    label_de: "Modal Split nachher - ÖPNV"
    label_en: "Modal split after - public transport"
    type: percentage
    required: true
  
  - id: modal_split_after_active
    label_de: "Modal Split nachher - Rad/Fuß"
    label_en: "Modal split after - bike/walk"
    type: percentage
    required: true
  
  - id: home_office_share
    label_de: "Anteil Homeoffice"
    label_en: "Home office share"
    type: percentage
    required: true
    default: 0.05
  
  parameters_required:
  - avg_commute_distance_km
  - work_days_per_year
  - emission_intensity_car
  - emission_intensity_pt
  - emission_intensity_bike_walk
  - share_local_trips

- id: DM4
  name_de: "Dienstwege und -reisen – Vermeidung/Verlagerung"
  name_en: "Official Trips and Travel – Avoidance/Modal Shift"
  description_de: "Vermeidung und Verkehrsverlagerung bei Dienstreisen"
  description_en: "Avoidance and modal shift of official trips"
  strategy_id: M0
  instrument_id: D
  table_number: 34
  
  bau_model_ref: modal_shift_model
  
  intervention:
    description_de: "Videokonferenzen und nachhaltige Verkehrspolitik"
    description_en: "Video conferencing and sustainable transport policy"
    sets_variable: modal_split
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction_bisko: operational_bisko
    primary_reduction_non_bisko: operational_non_bisko
  
  user_inputs:
  - id: employees
    label_de: "Anzahl Mitarbeitende"
    label_en: "Number of employees"
    type: number
    unit: persons
    required: true
  
  - id: avg_trips_per_employee_year
    label_de: "Dienstreisen pro Mitarbeiter/Jahr"
    label_en: "Official trips per employee/year"
    type: number
    unit: trips/year
    required: true
  
  - id: avg_trip_distance_km
    label_de: "Durchschnittliche Reisedistanz"
    label_en: "Average trip distance"
    type: number
    unit: km
    required: true
  
  - id: modal_split_before_car
    label_de: "Modal Split vorher - Auto"
    label_en: "Modal split before - car"
    type: percentage
    required: true
  
  - id: modal_split_before_pt
    label_de: "Modal Split vorher - Bahn"
    label_en: "Modal split before - train"
    type: percentage
    required: true
  
  - id: modal_split_before_plane
    label_de: "Modal Split vorher - Flugzeug"
    label_en: "Modal split before - plane"
    type: percentage
    required: true
  
  - id: modal_split_after_car
    label_de: "Modal Split nachher - Auto"
    label_en: "Modal split after - car"
    type: percentage
    required: true
  
  - id: modal_split_after_pt
    label_de: "Modal Split nachher - Bahn"
    label_en: "Modal split after - train"
    type: percentage
    required: true
  
  - id: modal_split_after_plane
    label_de: "Modal Split nachher - Flugzeug"
    label_en: "Modal split after - plane"
    type: percentage
    required: true
  
  - id: trips_avoided_share
    label_de: "Anteil vermiedener Reisen"
    label_en: "Share of avoided trips"
    type: percentage
    required: true
  
  parameters_required:
  - emission_intensity_car_business
  - emission_intensity_train
  - emission_intensity_plane
  - share_local_trips


# ============================================
# DIRECT MEASURES - FOOD & LAND USE (Table 35)
# ============================================

- id: DEL1
  name_de: "Ernährung – Umstellung (Mensa)"
  name_en: "Food – Conversion (Canteen)"
  description_de: "Umstellung auf vegetarisch/vegan, saisonal, regional, Reduktion Lebensmittelverschwendung"
  description_en: "Conversion to vegetarian/vegan, seasonal, regional, reduced food waste"
  strategy_id: EL0
  instrument_id: D
  table_number: 35
  
  bau_model_ref: canteen_menu_conversion_model
  
  intervention:
    description_de: "Menüumstellung auf klimafreundliche Ernährung"
    description_en: "Menu conversion to climate-friendly nutrition"
    sets_variable: ef_meal_type_after
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction_bisko: operational_bisko
    primary_reduction_non_bisko: operational_non_bisko
  
  user_inputs:
  - id: persons_served
    label_de: "Anzahl Personen"
    label_en: "Number of persons served"
    type: number
    unit: persons
    required: true
  
  - id: meals_per_person_year
    label_de: "Mahlzeiten pro Person/Jahr"
    label_en: "Meals per person/year"
    type: number
    unit: meals/year
    required: true
  
  - id: menu_type_before
    label_de: "Menütyp vorher"
    label_en: "Menu type before"
    type: choice
    choices: [mixed_diet_meat_heavy, mixed_diet_average, vegetarian, vegan]
    required: true
  
  - id: menu_type_after
    label_de: "Menütyp nachher"
    label_en: "Menu type after"
    type: choice
    choices: [mixed_diet_average, vegetarian, vegan, climate_optimized]
    required: true
  
  - id: regional_share_after
    label_de: "Regionalanteil nachher"
    label_en: "Regional share after"
    type: percentage
    required: true
  
  - id: food_waste_reduction
    label_de: "Reduktion Lebensmittelverschwendung"
    label_en: "Food waste reduction"
    type: percentage
    required: true
    default: 0.0
  
  parameters_required:
  - ef_meal_type_before
  - ef_meal_type_after
  - local_food_share_before
  - local_food_share_after

- id: DEL2
  name_de: "Grünflächen – Baumpflanzung"
  name_en: "Green Spaces – Tree Planting"
  description_de: "Pflanzung von Stadtbäumen zur Kohlenstoffbindung"
  description_en: "Planting of urban trees for carbon sequestration"
  strategy_id: EL0
  instrument_id: D
  table_number: 35
  
  bau_model_ref: tree_planting_sequestration_model
  
  intervention:
    description_de: "Baumpflanzung im Stadtgebiet"
    description_en: "Tree planting in urban area"
    sets_variable: new_trees_planted
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_sequestration: carbon_sequestration
    upstream_penalty: upstream_planting
  
  user_inputs:
  - id: trees_planted
    label_de: "Anzahl gepflanzte Bäume"
    label_en: "Number of trees planted"
    type: number
    unit: trees
    required: true
  
  - id: species_mix
    label_de: "Artenzusammensetzung"
    label_en: "Species composition"
    type: choice
    choices: [mixed_native, oak_dominated, linden_dominated]
    required: true
  
  - id: planting_year
    label_de: "Jahr der Pflanzung"
    label_en: "Planting year"
    type: year
    required: true
  
  parameters_required:
  - sequestration_rate_age_0_10
  - sequestration_rate_age_10_20
  - sequestration_rate_age_20_40
  - sequestration_rate_age_40_60
  - sequestration_rate_age_60_plus
  - lifetime_urban_tree
  - upstream_planting
  - mortality_rate

- id: DEL3
  name_de: "Landnutzung – Wiedervernässung organischer Böden"
  name_en: "Land Use – Rewetting of Organic Soils"
  description_de: "Wiedervernässung entwässerter Moorböden und organischer Böden"
  description_en: "Rewetting of drained peatlands and organic soils"
  strategy_id: EL0
  instrument_id: D
  table_number: 35
  
  bau_model_ref: organic_soil_rewetting_model
  
  intervention:
    description_de: "Wiedervernässung von Torfböden"
    description_en: "Rewetting of peat soils"
    sets_variable: area_rewetted
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_reduction
  
  user_inputs:
  - id: area_rewetted_ha
    label_de: "Wiedervernässte Fläche"
    label_en: "Area rewetted"
    type: number
    unit: ha
    required: true
  
  - id: previous_use
    label_de: "Vorherige Nutzung"
    label_en: "Previous use"
    type: choice
    choices: [intensive_agriculture, extensive_agriculture, drained_forest, grassland]
    required: true
  
  - id: future_use
    label_de: "Zukünftige Nutzung"
    label_en: "Future use"
    type: choice
    choices: [rewetted_no_use, paludiculture, wet_grassland]
    required: true
  
  parameters_required:
  - emission_factor_drained_soil
  - emission_factor_rewetted_soil
  - rewetting_establishment_period_years

- id: DEL4
  name_de: "Landnutzung – Aufforstung Freiflächen"
  name_en: "Land Use – Afforestation of Open Spaces"
  description_de: "Aufforstung von ungenutzten oder degradierten Flächen"
  description_en: "Afforestation of unused or degraded land"
  strategy_id: EL0
  instrument_id: D
  table_number: 35
  
  bau_model_ref: afforestation_model
  
  intervention:
    description_de: "Aufforstung von Brachflächen"
    description_en: "Afforestation of brownfield sites"
    sets_variable: new_afforestation
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_sequestration: carbon_sequestration
    upstream_penalty: upstream_afforestation
  
  user_inputs:
  - id: area_afforested_ha
    label_de: "Aufgeforstete Fläche"
    label_en: "Area afforested"
    type: number
    unit: ha
    required: true
  
  - id: previous_land_use
    label_de: "Vorherige Landnutzung"
    label_en: "Previous land use"
    type: choice
    choices: [degraded_land, former_agriculture, unsealed_brownfield]
    required: true
    note_de: "Muss zusätzlich sein - nicht Ersatz bestehender Wald"
    note_en: "Must be additional - not replacing existing forest"
  
  - id: forest_type
    label_de: "Waldtyp"
    label_en: "Forest type"
    type: choice
    choices: [mixed_native_species, coniferous, deciduous]
    required: true
  
  parameters_required:
  - sequestration_rate_forest_age_0_10
  - sequestration_rate_forest_age_10_20
  - sequestration_rate_forest_age_20_40
  - sequestration_rate_forest_age_40_plus
  - lifetime_forest_evaluation
  - upstream_afforestation

- id: DEL5
  name_de: "Landnutzung – Nachhaltige Waldbewirtschaftung"
  name_en: "Land Use – Sustainable Forest Management"
  description_de: "Umstellung auf naturnahe Waldbewirtschaftung"
  description_en: "Conversion to near-natural forest management"
  strategy_id: EL0
  instrument_id: D
  table_number: 35
  
  bau_model_ref: afforestation_model
  
  intervention:
    description_de: "Verbesserte Bewirtschaftung erhöht Kohlenstoffspeicherung"
    description_en: "Improved management increases carbon storage"
    sets_variable: sequestration_rate
    value_source: parameter_lookup
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_sequestration: carbon_sequestration
  
  user_inputs:
  - id: forest_area_ha
    label_de: "Waldfläche unter nachhaltiger Bewirtschaftung"
    label_en: "Forest area under sustainable management"
    type: number
    unit: ha
    required: true
  
  - id: forest_age_class
    label_de: "Altersklasse"
    label_en: "Age class"
    type: choice
    choices: [young_0_40, mature_40_80, old_growth_80_plus]
    required: true
  
  parameters_required:
  - sequestration_sustainable_management
  - sequestration_conventional_management
  - management_transition_period_years


# ============================================
# DIRECT MEASURES - WASTE & WASTEWATER (Table 36)
# ============================================

- id: DAW1
  name_de: "Restmüll – Vermeidung"
  name_en: "Residual Waste – Avoidance"
  description_de: "Reduktion von Restmüll durch Recycling und Vermeidung"
  description_en: "Reduction of residual waste through recycling and avoidance"
  strategy_id: AW0
  instrument_id: D
  table_number: 36
  
  bau_model_ref: waste_avoidance_model
  
  intervention:
    description_de: "Abfallvermeidungskampagne, bessere Mülltrennung"
    description_en: "Waste reduction campaign, better waste separation"
    sets_variable: waste_per_capita
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction_bisko: operational_bisko
    primary_reduction_non_bisko: operational_non_bisko
  
  user_inputs:
  - id: population
    label_de: "Betroffene Bevölkerung"
    label_en: "Affected population"
    type: number
    unit: persons
    required: true
  
  - id: waste_per_capita_before_kg_year
    label_de: "Restmüll pro Kopf vorher"
    label_en: "Residual waste per capita before"
    type: number
    unit: kg/person/year
    required: true
  
  - id: waste_per_capita_after_kg_year
    label_de: "Restmüll pro Kopf nachher"
    label_en: "Residual waste per capita after"
    type: number
    unit: kg/person/year
    required: true
  
  parameters_required:
  - ef_waste_treatment
  - ef_avoided_production
  - waste_treatment_mix_incineration
  - waste_treatment_mix_landfill

- id: DAW2
  name_de: "Trinkwasserbezug"
  name_en: "Drinking Water Supply"
  description_de: "Umstellung von Flaschenwasser auf Leitungswasser"
  description_en: "Switch from bottled water to tap water"
  strategy_id: AW0
  instrument_id: D
  table_number: 36
  
  bau_model_ref: bottled_water_switch_model
  
  intervention:
    description_de: "Verzicht auf Flaschenwasser zugunsten Leitungswasser"
    description_en: "Eliminate bottled water, use tap water"
    sets_variable: bottled_water_consumption
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction_bisko: operational_bisko
    primary_reduction_non_bisko: operational_non_bisko
  
  user_inputs:
  - id: persons
    label_de: "Anzahl Personen"
    label_en: "Number of persons"
    type: number
    unit: persons
    required: true
  
  - id: bottled_water_liters_per_person_year
    label_de: "Flaschenwasser pro Person/Jahr"
    label_en: "Bottled water per person/year"
    type: number
    unit: liters/year
    required: true
  
  - id: water_source
    label_de: "Wasserherkunft"
    label_en: "Water source"
    type: choice
    choices: [local, regional_less_100km, national, imported]
    required: true
  
  - id: bottle_type
    label_de: "Flaschentyp"
    label_en: "Bottle type"
    type: choice
    choices: [glass_reusable, glass_single_use, pet_single_use]
    required: true
  
  parameters_required:
  - ef_bottled_water_by_source
  - ef_tap_water
  - local_treatment_share

- id: DAW3
  name_de: "Wasserverbrauch – Vermeidung"
  name_en: "Water Consumption – Avoidance"
  description_de: "Reduktion von Wasser und Abwasser durch Effizienzmaßnahmen"
  description_en: "Reduction of water and wastewater through efficiency measures"
  strategy_id: AW0
  instrument_id: D
  table_number: 36
  
  bau_model_ref: water_consumption_reduction_model
  
  intervention:
    description_de: "Wassersparende Armaturen, Verhaltensänderung"
    description_en: "Water-saving fixtures, behavioral change"
    sets_variable: water_per_capita
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_bisko
  
  user_inputs:
  - id: population
    label_de: "Betroffene Bevölkerung"
    label_en: "Affected population"
    type: number
    unit: persons
    required: true
  
  - id: water_per_capita_before_m3_year
    label_de: "Wasserverbrauch pro Kopf vorher"
    label_en: "Water consumption per capita before"
    type: number
    unit: m³/year
    required: true
  
  - id: water_per_capita_after_m3_year
    label_de: "Wasserverbrauch pro Kopf nachher"
    label_en: "Water consumption per capita after"
    type: number
    unit: m³/year
    required: true
  
  parameters_required:
  - energy_water_supply_per_m3
  - energy_wastewater_treatment_per_m3
  - ef_grid


# ============================================
# DIRECT MEASURES - CONSUMPTION (Table 37)
# ============================================

- id: DK1
  name_de: "Papiernutzung – Recyclingpapier"
  name_en: "Paper Use – Recycled Paper"
  description_de: "Umstellung auf Recyclingpapier oder Reduktion Papierverbrauch"
  description_en: "Switch to recycled paper or reduction of paper consumption"
  strategy_id: K0
  instrument_id: D
  table_number: 37
  
  bau_model_ref: paper_consumption_model
  
  intervention:
    description_de: "Beschaffungspolitik für Recyclingpapier oder Digitalisierung"
    description_en: "Procurement policy for recycled paper or digitalization"
    sets_variable: [paper_type, paper_consumed]
    value_source: user_input
  
  adoption:
    type: direct_control
    factor: 1.0
  
  outputs:
    primary_reduction: operational_non_bisko
  
  user_inputs:
  - id: paper_consumed_tonnes_year
    label_de: "Papierverbrauch"
    label_en: "Paper consumption"
    type: number
    unit: tonnes/year
    required: true
  
  - id: paper_type_before
    label_de: "Papiertyp vorher"
    label_en: "Paper type before"
    type: choice
    choices: [virgin_paper, recycled_paper, mixed]
    required: true
  
  - id: paper_type_after
    label_de: "Papiertyp nachher"
    label_en: "Paper type after"
    type: choice
    choices: [recycled_paper, reduced_consumption]
    required: true
  
  - id: consumption_reduction_percent
    label_de: "Verbrauchsreduktion"
    label_en: "Consumption reduction"
    type: percentage
    required: true
    default: 0.0
  
  parameters_required:
  - ef_virgin_paper
  - ef_recycled_paper


# ============================================
# METADATA AND CALCULATION RULES
# ============================================
metadata:
  version: "2.1"
  based_on: "IKKA Katalog März 2025 + Empfehlungen April 2024"
  last_updated: "2025-01-XX"
  compatible_with_paths: true
  
  calculation_principles:
  - id: physical_accounting
    name_de: "Physikalisches Bilanzierungsprinzip"
    name_en: "Physical accounting principle"
    reference: "Chapter 5.1.1"
    description_de: "Physikalisch messbare THG-Emissionen darstellen"
    description_en: "Present physically measurable GHG emissions"
  
  - id: bisko_non_bisko_split
    name_de: "BISKO/Nicht-BISKO-Aufteilung"
    name_en: "BISKO/non-BISKO split"
    reference: "Chapter 5.1.2"
    description_de: "Einsparungen nach Sichtbarkeit in BISKO-Bilanz aufteilen"
    description_en: "Split savings by visibility in BISKO inventory"
  
  - id: lifecycle_boundaries
    name_de: "Lebenszyklusgrenzen"
    name_en: "Life cycle boundaries"
    reference: "Chapter 5.1.3"
    description_de: "Produktionsbedingte Vorkette + Nutzung einbeziehen, Entsorgung ausschließen"
    description_en: "Include production upstream + operation, exclude end-of-life"
  
  - id: temporal_reporting
    name_de: "Zeitliche Berichterstattung"
    name_en: "Temporal reporting"
    reference: "Chapter 5.1.5"
    description_de: "Sowohl jährliche als auch Lebensdauer-Reduktionen berichten"
    description_en: "Report both annual and lifetime reductions"
  
  - id: bisko_emission_factors
    name_de: "BISKO-Emissionsfaktoren"
    name_en: "BISKO emission factors"
    reference: "Chapter 5.1.7"
    description_de: "BISKO-Emissionsfaktoren verwenden wo verfügbar"
    description_en: "Use BISKO emission factors where available"
  
  - id: sequential_calculation
    name_de: "Sequentielle Berechnung"
    name_en: "Sequential calculation"
    reference: "Chapter 5.2.2"
    description_de: "Bei kombinierten Maßnahmen: Suffizienz → Effizienz → Konsistenz"
    description_en: "For combined measures: Sufficiency → Efficiency → Consistency"
  
  notes:
  - note_de: "Alle Formeln verwenden Parameterreferenzen mit $ Präfix"
    note_en: "All formulas use parameter references with $ prefix"
  
  - note_de: "Parameterwerte sind in separater Parameter-Datenbank definiert"
    note_en: "Parameter values defined separately in parameter database"
  
  - note_de: "BISKO-Klassifizierung folgt IKKA-Methodik Kapitel 5.1.2"
    note_en: "BISKO classification follows IKKA methodology Chapter 5.1.2"
  
  - note_de: "Vorkettenemissionen folgen Lebenszyklusgrenzen gemäß Kapitel 5.1.3"
    note_en: "Upstream emissions follow life cycle boundaries per Chapter 5.1.3"
  
  - note_de: "Direkte Maßnahmen haben Adoptionsfaktor = 1.0"
    note_en: "Direct measures have adoption factor = 1.0"
  
  - note_de: "Emissionsfaktoren beinhalten CO2-Äquivalente (CH4, N2O als CO2e)"
    note_en: "Emission factors include CO2 equivalents (CH4, N2O as CO2e)"
  
  - note_de: "Netzstrom nutzt Bundesstrommix für Verbrauch"
    note_en: "Grid electricity uses federal grid mix for consumption"
  
  - note_de: "Erneuerbare Erzeugung nutzt Verdrängungsmix für vermiedene Emissionen"
    note_en: "Renewable generation uses displacement mix for avoided emissions"
  
  - note_de: "Fernwärme nutzt kommunen-spezifischen lokalen Emissionsfaktor"
    note_en: "District heating uses municipality-specific local emission factor"
  
  - note_de: "Zeitliche Muster: one_time = einmalige Umsetzung, ongoing = fortlaufend"
    note_en: "Temporal patterns: one_time = single implementation, ongoing = repeated"
  
  - note_de: "Bestandsvariablen akkumulieren über Zeit, Flussvariablen sind jährlich"
    note_en: "Stock variables accumulate over time, flow variables are annual"
  
  - note_de: "Alle Variablen sind Zeitreihen (kompatibel mit Paths-Modellierung)"
    note_en: "All variables are time series (compatible with Paths modeling)"
  
  references:
  - id: technical_annex
    name: "Technischer Annex mit Parameterwerten"
    description: "Separate document with parameter values"
  
  - id: bisko_methodology
    name: "BISKO-Methodik"
    description: "BISKO standard from ifeu"
  
  - id: geg_current
    name: "Gebäudeenergiegesetz"
    description: "Building Energy Act (current version)"
  
  - id: local_data_required
    name: "Lokal bereitzustellende Daten"
    description: "Data municipality must provide"


# ============================================
# VARIABLE NAMING CONVENTIONS
# ============================================
conventions:
  variable_references:
    model_variables: "plain_name (e.g., pv_capacity_installed)"
    parameter_references: "$prefix (e.g., $irradiation)"
    time_shifted_variables: "variable[t - offset] (e.g., new_installations[t - $lifetime_pv])"
  
  accumulation_types:
  - stock: "Cumulative state variable (e.g., installed capacity)"
  - flow: "Annual flow (e.g., electricity generated per year)"
  - aging_stock: "Stock that moves through age cohorts (e.g., trees by age)"
  
  classification_attributes:
  - bisko: "true = visible in BISKO inventory, false = not visible"
  - upstream: "true = production/construction emissions, false = operational"
  - territorial: "local = within municipality, non_local/external = outside"
  - temporal: "at_installation/at_construction = one-time, ongoing = annual"
  - component: "sufficiency/efficiency/consistency or avoidance/modal_shift"
  
  output_quantities:
  - emission: "tCO2e or tCO2e/year"
  - energy: "kWh or kWh/year"
  - cost: "EUR or EUR/year"
  - material: "tonnes or tonnes/year"
  
  temporal_patterns:
  - one_time: "Implementation happens once (e.g., PV installation)"
  - ongoing: "Continuous implementation (e.g., green electricity tariff)"
  - one_time_construction: "Construction phase, then ongoing operation"
  - phased: "Implementation over multiple years"


# ============================================
# FORMULA NOTATION GUIDE
# ============================================
formula_notation:
  description_de: "Formeln als parsierbare Strings für spätere Code-Generierung"
  description_en: "Formulas as parseable strings for later code generation"
  
  operators:
  - arithmetic: "+, -, *, /, ()"
  - functions: "sum(), cumsum(), max(), min()"
  - conditionals: "if(condition, true_value, false_value)"
  - time_reference: "variable[t], variable[t-1], variable[t-offset]"
  - aggregation: "sum(variable, years=start to end)"
  
  examples:
  - simple: "pv_capacity_installed * $irradiation * $performance_ratio"
  - time_shifted: "new_installations[t - $lifetime_pv]"
  - conditional: "if(has_control_system, $control_system_savings, 0)"
  - multi_line: "(heat_demand_before - heat_demand_after) / $efficiency_after * $ef_fuel_after / 1000"
  - aggregation: "sum(emissions_by_mode)"
  
  parameter_lookup:
    description_de: "Parameter können von User-Inputs abhängen"
    description_en: "Parameters can depend on user inputs"
    example: "$ef_fuel_before depends on fuel_type_before choice"
    implementation: "Lookup table in parameter database"


# ============================================
# OUTPUT STRUCTURE FOR PATHS INTEGRATION
# ============================================
paths_integration:
  description_de: "Wie IKKA-Maßnahmen in Paths-Modelle integriert werden"
  description_en: "How IKKA measures integrate into Paths models"
  
  model_execution:
  - step: 1
    name_de: "BAU-Szenario ausführen"
    name_en: "Run BAU scenario"
    description_de: "Modell ohne Maßnahme über gesamten Zeitraum"
    description_en: "Model without measure over entire timespan"
  
  - step: 2
    name_de: "Maßnahmen-Intervention anwenden"
    name_en: "Apply measure intervention"
    description_de: "Parameter ändern gemäß intervention.sets_variable"
    description_en: "Change parameters per intervention.sets_variable"
  
  - step: 3
    name_de: "Klimaschutz-Szenario ausführen"
    name_en: "Run climate scenario"
    description_de: "Modell mit Maßnahme über gesamten Zeitraum"
    description_en: "Model with measure over entire timespan"
  
  - step: 4
    name_de: "Szenarien vergleichen"
    name_en: "Compare scenarios"
    description_de: "Differenz = THG-Einsparung der Maßnahme"
    description_en: "Difference = GHG reduction of measure"
  
  time_series_outputs:
    description_de: "Alle Outputs sind jährliche Zeitreihen"
    description_en: "All outputs are annual time series"
    
    primary_outputs:
    - id: annual_reduction_by_year
      description_de: "Jährliche Reduktion für jedes Jahr (t=0 bis t=end)"
      description_en: "Annual reduction for each year (t=0 to t=end)"
      unit: tCO2e/year
    
    aggregated_outputs:
    - id: cumulative_reduction
      description_de: "Kumulierte Reduktion über Zeit"
      description_en: "Cumulative reduction over time"
      formula: "cumsum(annual_reduction_by_year)"
      unit: tCO2e
    
    - id: lifetime_total_reduction
      description_de: "Gesamtreduktion über Nutzungsdauer"
      description_en: "Total reduction over lifetime"
      formula: "sum(annual_reduction_by_year, t=1 to lifetime)"
      unit: tCO2e
    
    - id: climate_payback_year
      description_de: "Jahr der klimatischen Amortisation"
      description_en: "Year of climate payback"
      formula: "year when cumsum(operational_avoidance) >= cumsum(upstream_penalty)"
      unit: year
  
  bisko_reporting:
    description_de: "Separate Zeitreihen für BISKO und Nicht-BISKO"
    description_en: "Separate time series for BISKO and non-BISKO"
    
    series:
    - annual_reduction_bisko: "From outputs with classification.bisko=true"
    - annual_reduction_non_bisko: "From outputs with classification.bisko=false"
    - annual_upstream_penalty: "From outputs with classification.upstream=true"
    - annual_operational_benefit: "From outputs with classification.upstream=false"


# ============================================
# PARAMETER DEPENDENCY MAPPINGS
# ============================================
parameter_dependencies:
  description_de: "Wie Parameter von User-Auswahlen abhängen"
  description_en: "How parameters depend on user choices"
  
  fuel_types:
  - parameter_group: heating_fuel
    affects:
    - ef_fuel_before
    - efficiency_before
    - upstream_heating_system_old
    - direct_combustion_share
    
    mappings:
      natural_gas:
        ef_fuel: 0.247  # kg CO2e/kWh (total with upstream)
        efficiency: 0.85
        upstream_system: 600  # kg CO2e
        direct_combustion_share: 0.818  # 202/(202+45)
      
      heating_oil:
        ef_fuel: 0.318
        efficiency: 0.82
        upstream_system: 650
        direct_combustion_share: 0.850
      
      coal:
        ef_fuel: 0.438
        efficiency: 0.75
        upstream_system: 700
        direct_combustion_share: 0.900
      
      biomass:
        ef_fuel: 0.027
        efficiency: 0.80
        upstream_system: 800
        direct_combustion_share: 0.200
      
      electricity_direct:
        ef_fuel: 0.420  # Grid mix
        efficiency: 1.0
        upstream_system: 200
        direct_combustion_share: 0.0
      
      district_heating:
        ef_fuel: local_factor_required
        efficiency: 1.0
        upstream_system: 0
        direct_combustion_share: varies
  
  heating_systems:
  - parameter_group: heating_system_after
    affects:
    - efficiency_after
    - ef_fuel_after
    - upstream_heating_system_new
    
    mappings:
      air_source_heat_pump:
        efficiency: 3.5  # Seasonal COP
        ef_fuel: 0.420  # Grid electricity
        upstream_system: 1500  # kg CO2e
      
      ground_source_heat_pump:
        efficiency: 4.0
        ef_fuel: 0.420
        upstream_system: 2000
      
      biomass_boiler:
        efficiency: 0.85
        ef_fuel: 0.027
        upstream_system: 800
      
      pellet_boiler:
        efficiency: 0.90
        ef_fuel: 0.027
        upstream_system: 900
      
      district_heating:
        efficiency: 1.0
        ef_fuel: local_factor_required
        upstream_system: 0  # Counted in connection
      
      solar_thermal_plus_backup:
        efficiency: 0.95
        ef_fuel: 0.247  # Backup gas
        upstream_system: 1200
  
  vehicle_categories:
  - parameter_group: vehicle_category
    affects:
    - fuel_consumption_ice_per_100km
    - electricity_consumption_ev_per_100km
    - upstream_ev
    - upstream_ice
    
    mappings:
      compact:
        fuel_consumption: 5.5  # liters/100km
        electricity_consumption: 15  # kWh/100km
        upstream_ev: 11000  # kg CO2e
        upstream_ice: 7000
      
      midsize:
        fuel_consumption: 6.5
        electricity_consumption: 18
        upstream_ev: 13000
        upstream_ice: 9000
      
      suv:
        fuel_consumption: 8.5
        electricity_consumption: 22
        upstream_ev: 16000
        upstream_ice: 11000
      
      van:
        fuel_consumption: 7.5
        electricity_consumption: 24
        upstream_ev: 14000
        upstream_ice: 9500
  
  bus_types:
  - parameter_group: bus_type
    affects:
    - fuel_consumption_diesel_bus_per_100km
    - electricity_consumption_electric_bus_per_100km
    - hydrogen_consumption_per_100km
    
    mappings:
      city_bus_12m:
        fuel_consumption: 35  # liters/100km
        electricity_consumption: 120  # kWh/100km
        hydrogen_consumption: 8  # kg H2/100km
      
      city_bus_18m:
        fuel_consumption: 45
        electricity_consumption: 150
        hydrogen_consumption: 10
      
      regional_bus:
        fuel_consumption: 30
        electricity_consumption: 100
        hydrogen_consumption: 7
  
  menu_types:
  - parameter_group: menu_type
    affects:
    - ef_meal_type
    
    mappings:
      mixed_diet_meat_heavy:
        ef_meal: 3.1  # kg CO2e/meal
      
      mixed_diet_average:
        ef_meal: 2.5
      
      vegetarian:
        ef_meal: 1.5
      
      vegan:
        ef_meal: 1.0
      
      climate_optimized:
        ef_meal: 0.8  # Vegan + regional + seasonal + zero waste
  
  organic_soil_previous_use:
  - parameter_group: previous_use
    affects:
    - emission_factor_drained_soil
    
    mappings:
      intensive_agriculture:
        emission_factor: 30  # t CO2e/ha/year
      
      extensive_agriculture:
        emission_factor: 20
      
      drained_forest:
        emission_factor: 15
      
      grassland:
        emission_factor: 12
  
  organic_soil_future_use:
  - parameter_group: future_use
    affects:
    - emission_factor_rewetted_soil
    
    mappings:
      rewetted_no_use:
        emission_factor: 2  # t CO2e/ha/year
      
      paludiculture:
        emission_factor: 5
      
      wet_grassland:
        emission_factor: 8
  
  water_source:
  - parameter_group: water_source
    affects:
    - ef_bottled_water_by_source
    
    mappings:
      local:
        ef_bottled_water: 0.15  # kg CO2e/liter
      
      regional_less_100km:
        ef_bottled_water: 0.20
      
      national:
        ef_bottled_water: 0.35
      
      imported:
        ef_bottled_water: 0.50


# ============================================
# REPORTING AND OUTPUT AGGREGATION
# ============================================
reporting_structure:
  description_de: "Struktur für Berichterstattung und Ausgabe-Aggregation"
  description_en: "Structure for reporting and output aggregation"
  
  standard_report_outputs:
  - id: annual_ghg_reduction_year_1
    name_de: "Jährliche THG-Reduktion Jahr 1"
    name_en: "Annual GHG reduction year 1"
    formula: "operational_reduction[t=1]"
    unit: tCO2e/year
    note_de: "Reduktion im ersten Jahr nach Umsetzung"
    note_en: "Reduction in first year after implementation"
  
  - id: annual_ghg_reduction_average
    name_de: "Durchschnittliche jährliche THG-Reduktion"
    name_en: "Average annual GHG reduction"
    formula: "mean(operational_reduction[t=1 to lifetime])"
    unit: tCO2e/year
    note_de: "Mittelwert über Nutzungsdauer (berücksichtigt Netz-Dekarbonisierung)"
    note_en: "Average over lifetime (accounts for grid decarbonization)"
  
  - id: lifetime_total_ghg_reduction
    name_de: "Gesamte THG-Reduktion über Nutzungsdauer"
    name_en: "Total GHG reduction over lifetime"
    formula: "sum(operational_reduction[t=1 to lifetime])"
    unit: tCO2e
  
  - id: total_upstream_emissions
    name_de: "Gesamte Vorkettenemissionen"
    name_en: "Total upstream emissions"
    formula: "sum(all outputs where classification.upstream=true)"
    unit: tCO2e
  
  - id: net_lifetime_benefit
    name_de: "Netto-Nutzen über Nutzungsdauer"
    name_en: "Net lifetime benefit"
    formula: "lifetime_total_ghg_reduction - total_upstream_emissions"
    unit: tCO2e
  
  - id: climate_payback_period
    name_de: "Klimatische Amortisationszeit"
    name_en: "Climate payback period"
    formula: "year when cumsum(operational_reduction) >= cumsum(upstream_emissions)"
    unit: years
  
  bisko_breakdown:
  - id: annual_reduction_bisko
    name_de: "Jährliche Reduktion (BISKO-Anteil)"
    name_en: "Annual reduction (BISKO portion)"
    formula: "sum(outputs where classification.bisko=true)"
    unit: tCO2e/year
    note_de: "Sichtbar in kommunaler BISKO-Bilanz"
    note_en: "Visible in municipal BISKO inventory"
  
  - id: annual_reduction_non_bisko
    name_de: "Jährliche Reduktion (Nicht-BISKO-Anteil)"
    name_en: "Annual reduction (non-BISKO portion)"
    formula: "sum(outputs where classification.bisko=false and classification.upstream=false)"
    unit: tCO2e/year
    note_de: "Nicht in kommunaler BISKO-Bilanz sichtbar, aber Teil anderer Bilanzen"
    note_en: "Not visible in municipal BISKO, but part of other inventories"
  
  - id: annual_upstream_emissions
    name_de: "Jährliche Vorkettenemissionen"
    name_en: "Annual upstream emissions"
    formula: "sum(outputs where classification.upstream=true)"
    unit: tCO2e/year
    note_de: "Produktions-/Bauemissionen (meist nicht-BISKO)"
    note_en: "Production/construction emissions (mostly non-BISKO)"
  
  component_breakdown:
    description_de: "Für Maßnahmen mit mehreren Handlungsansätzen"
    description_en: "For measures with multiple strategy approaches"
    
    components:
    - sufficiency: "Outputs with classification.component=sufficiency"
    - efficiency: "Outputs with classification.component=efficiency"
    - consistency: "Outputs with classification.component=consistency"
    - avoidance: "Outputs with classification.component=avoidance"
    - modal_shift: "Outputs with classification.component=modal_shift"


# ============================================
# VALIDATION RULES
# ============================================
validation_rules:
  description_de: "Regeln zur Validierung von User-Inputs und Berechnungen"
  description_en: "Rules for validating user inputs and calculations"
  
  user_input_validation:
  - rule: non_negative_quantities
    description_de: "Mengen müssen nicht-negativ sein"
    description_en: "Quantities must be non-negative"
    applies_to: [capacity, area, count, consumption]
  
  - rule: percentage_sum_to_one
    description_de: "Modal-Split-Anteile müssen sich zu 1.0 addieren"
    description_en: "Modal split shares must sum to 1.0"
    applies_to: [modal_split_before, modal_split_after]
    validation: "sum(modal_split_before_car + modal_split_before_pt + modal_split_before_active + home_office_share) = 1.0"
  
  - rule: temporal_consistency
    description_de: "Installationsjahr muss innerhalb Modellzeitraum liegen"
    description_en: "Installation year must be within model timespan"
    applies_to: [installation_year, construction_year, planting_year]
  
  calculation_validation:
  - rule: energy_conservation
    description_de: "Einsparungen können nicht größer als Ausgangswert sein"
    description_en: "Savings cannot exceed baseline"
    validation: "electricity_saved <= baseline_electricity_consumption"
  
  - rule: emissions_non_negative_after
    description_de: "Emissionen nach Maßnahme können nicht negativ sein"
    description_en: "Emissions after measure cannot be negative"
    validation: "emissions_after >= 0"
  
  - rule: bisko_classification_complete
    description_de: "Alle Emissions-Outputs müssen BISKO-Klassifizierung haben"
    description_en: "All emission outputs must have BISKO classification"
    validation: "all outputs with quantity=emission must have classification.bisko defined"


# ============================================
# IMPLEMENTATION NOTES FOR PATHS
# ============================================
implementation_notes:
  description_de: "Hinweise für Implementierung in Paths-System"
  description_en: "Notes for implementation in Paths system"
  
  formula_parsing:
  - note_de: "Formeln als Strings gespeichert, zur Laufzeit geparst"
    note_en: "Formulas stored as strings, parsed at runtime"
    implementation: "Use sympy or similar for symbolic math parsing"
  
  - note_de: "Parameter-Referenzen ($param) durch Werte aus Parameter-DB ersetzen"
    note_en: "Replace parameter references ($param) with values from parameter DB"
    implementation: "Lookup in parameter database with scope resolution"
  
  - note_de: "User-Input-abhängige Parameter via Dependency-Mappings auflösen"
    note_en: "Resolve user-input-dependent parameters via dependency mappings"
    implementation: "Check parameter_dependencies for mapping rules"
  
  time_series_handling:
  - note_de: "Bestandsvariablen benötigen Initialisierung und Akkumulation"
    note_en: "Stock variables require initialization and accumulation"
    implementation: "Use numpy arrays or pandas Series with index=years"
  
  - note_de: "Zeitverschobene Referenzen [t-offset] mit Historie implementieren"
    note_en: "Implement time-shifted references [t-offset] with history"
    implementation: "Store historical values, lookup by offset"
  
  - note_de: "Alterungs-Kohorten für Bäume/Wälder als verkettete Bestände"
    note_en: "Aging cohorts for trees/forests as linked stocks"
    implementation: "Cohort-component model with annual transitions"
  
  unit_handling:
  - note_de: "Pint für Unit-Handling nutzen wie besprochen"
    note_en: "Use Pint for unit handling as discussed"
    implementation: "All quantities with units, automatic conversion"
  
  - note_de: "Division durch 1000 für kg→tonnes in Formeln explizit"
    note_en: "Division by 1000 for kg→tonnes explicit in formulas"
    implementation: "Could be handled by Pint if units consistent"
  
  scenario_comparison:
  - note_de: "Zwei Modellläufe: BAU und Mit-Maßnahme"
    note_en: "Two model runs: BAU and With-Measure"
    implementation: "Run model twice with different intervention parameters"
  
  - note_de: "Differenz der Outputs = Maßnahmenwirkung"
    note_en: "Difference in outputs = measure impact"
    implementation: "result = scenario_climate - scenario_bau"
  
  output_aggregation:
  - note_de: "Primäre Outputs sind Zeitreihen, Aggregationen nachgelagert"
    note_en: "Primary outputs are time series, aggregations downstream"
    implementation: "Don't compute lifetime totals in nodes, aggregate afterward"
  
  - note_de: "BISKO/Nicht-BISKO-Summen aus Klassifizierung ableiten"
    note_en: "Derive BISKO/non-BISKO totals from classification"
    implementation: "Filter outputs by classification.bisko, then sum"


# ============================================
# QUALITY ASSURANCE
# ============================================
quality_assurance:
  description_de: "Qualitätssicherung für Berechnungen"
  description_en: "Quality assurance for calculations"
  
  uncertainty_categories:
  - low: "±10-15%"
    applies_to: "Well-established technologies (PV, LED, heat pumps)"
  
  - medium: "±15-25%"
    applies_to: "Emerging technologies, behavioral measures"
  
  - high: "±25-40%"
    applies_to: "Nature-based solutions, long-term projections"
  
  data_quality_indicators:
  - high: "Measured data, established methodology"
  - medium: "Engineering estimates, standard parameters"
  - low: "Assumptions, extrapolations, proxy data"
  
  validation_checks:
  - id: energy_balance
    name_de: "Energiebilanz"
    name_en: "Energy balance"
    check: "Sum of energy inputs = sum of energy outputs (within tolerance)"
  
  - id: mass_balance
    name_de: "Massenbilanz"
    name_en: "Mass balance"
    check: "For material flows (e.g., fuel, waste)"
  
  - id: plausibility_ranges
    name_de: "Plausibilitätsbereiche"
    name_en: "Plausibility ranges"
    check: "Results within expected ranges for measure type"
  
  - id: bisko_consistency
    name_de: "BISKO-Konsistenz"
    name_en: "BISKO consistency"
    check: "BISKO-classified emissions use BISKO-compliant factors"


# ============================================
# VERSION HISTORY
# ============================================
version_history:
- version: "2.1"
  date: "2025-01-XX"
  changes_de:
  - "Umstellung auf quantity statt type für Outputs"
  - "Entfernung redundanter BISKO-Klassifizierung aus Maßnahmen"
  - "Ergänzung fehlender deutscher/englischer Übersetzungen"
  - "Hinzufügung von Retirement-Flows für Bestandsvariablen"
  - "Klarstellung: Lifetime-Totals sind nachgelagerte Aggregationen"
  - "Verbesserung Zeitreihen-Kompatibilität mit Paths"
  changes_en:
  - "Changed to quantity instead of type for outputs"
  - "Removed redundant BISKO classification from measures"
  - "Added missing German/English translations"
  - "Added retirement flows for stock variables"
  - "Clarified: Lifetime totals are downstream aggregations"
  - "Improved time series compatibility with Paths"
  
- version: "2.0"
  date: "2025-01-XX"
  changes_de:
  - "Initiale strukturierte Version basierend auf IKKA-Katalog"
  changes_en:
  - "Initial structured version based on IKKA catalog"
