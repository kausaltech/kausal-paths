# YAML configuration for converting Klimaschutz-Planer Excel files
# Supports multiple dataset configurations that will be processed sequentially and concatenated

# Top-level output file path (optional - can be overridden per dataset)
output_file_path: "output/normalized_dataset.csv"

# Option 1: Single dataset configuration (backward compatible)
# All fields below can be used directly at the top level

# Option 2: Multiple dataset configurations
# Use the 'datasets' key with a list of dataset configurations
datasets:
  # First dataset: Excel file with multiple sheets (one per year)
  - input_file_path: "path/to/your/file.xlsx"
    file_type: "excel"  # Auto-detected from extension if not specified
    
    # Sheet configuration
    # Option A: Process multiple sheets, mapping each to a year
    sheet_year_mapping:
      "2020": 2020
      "2021": 2021
      "2022": 2022
      "2023": 2023
      # Add more sheets as needed
    
    # Option B: Process a single sheet
    # sheet_name: "2020"  # Uncomment to process only this sheet
    
    # Dataset schema configuration
    row_identifier_name: "EnergyCarrier"  # Name for the identifier column in output
    identifier_column: 0  # 0-based column index containing row identifiers (Energieträger column)
    
    # Skip rows at the beginning (explanation/header rows)
    # Rows 0-3 are metadata: "Köln, Stadt", "Regionalschlüssel", "Stand", empty row
    skip_rows: 4
    
    # Whether the file has a header row
    # Row 4 contains: "Energieträger	Gewerbe, Handel, Dienstleistungen	Industrie	..."
    has_header: true
    
    # Name for the value column in output
    value_column_name: "Value"
    
    # All dimension names used in this dataset
    dimension_names:
      - "EnergyCarrier"
      - "Sector"
    
    # Column specifications
    # Column numbers are 0-based indices
    column_specs:
      # Column 0: Energy carrier names (Energieträger)
      # This is the identifier column, specified above
      
      # Column 1: Gewerbe, Handel, Dienstleistungen sector
      1:
        quantity: "Energy consumption"
        unit: "kWh"
        dimensions:
          Sector: "Gewerbe, Handel, Dienstleistungen"
      
      # Column 2: Industrie sector
      2:
        quantity: "Energy consumption"
        unit: "kWh"
        dimensions:
          Sector: "Industrie"
      
      # Column 3: Kommunale Einrichtungen sector
      3:
        quantity: "Energy consumption"
        unit: "kWh"
        dimensions:
          Sector: "Kommunale Einrichtungen"
      
      # Column 4: Private Haushalte sector
      4:
        quantity: "Energy consumption"
        unit: "kWh"
        dimensions:
          Sector: "Private Haushalte"
      
      # Column 5: Verkehr sector
      5:
        quantity: "Energy consumption"
        unit: "kWh"
        dimensions:
          Sector: "Verkehr"
      
      # Column 6: Gesamt (Total) - skip this column as it's just totals
      # Not included in column_specs, so it will be ignored
    
    # Identifier mappings (optional)
    # Map energy carrier names to additional attributes if needed
    identifier_mappings:
      # Example mappings - add more as needed
      # "Benzin":
      #   description: "Petrol"
      # "Diesel":
      #   description: "Diesel fuel"

  # Second dataset: Parquet file (no schema needed, loaded as-is)
  - input_file_path: "path/to/another/file.parquet"
    file_type: "parquet"  # Auto-detected from extension if not specified
    # No schema needed for parquet - data is loaded as-is

  # Third dataset: CSV file
  - input_file_path: "path/to/csv/file.csv"
    file_type: "csv"  # Auto-detected from extension if not specified
    
    row_identifier_name: "Sector"
    identifier_column: 0
    skip_rows: 1
    has_header: true
    value_column_name: "Value"
    
    dimension_names:
      - "Category"
    
    column_specs:
      1:
        quantity: "Some quantity"
        unit: "unit"
        dimensions:
          Category: "Value1"
      2:
        quantity: "Some quantity"
        unit: "unit"
        dimensions:
          Category: "Value2"
    
    identifier_mappings: {}
